<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>mdlObjet.zig - source view</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPNJREFUeNpi/P//PwMlgOXHUjly9E0G4hwgZmQiQZMqEK8H4v9QzUEgQSaoADK+zhH9iAGL+C0gDoAaNg9mGLoLfgA1awK9hS9gzgJxA9RQBmQDrgMxJzRMGKE4HYj/Ial5A8QmQLwCJoBsgBYW2+TR1ChDaWt4LOBxKsi/VUh8XiD+gq4IVyzwQAMJBoKwacZlAB8Qf0bi96IZhtOAe1D6LpqaEiz6rmEzQAeIzwGxCJpieFqApo/vQKyJboAaEBsAsSEupwI1MwKjGBTVHOhegMX5UajYRqiBjMgYmj400cVh0XgTiKdC0zhJgJHS7AwQYABm9EAdCKrEfAAAAABJRU5ErkJggg=="/>
    <style>
      body{
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        margin: 0;
        line-height: 1.5;
      }

      pre > code {
        display: block;
        overflow: auto;
        line-height: normal;
        margin: 0em;
      }
      .tok-kw {
          color: #333;
          font-weight: bold;
      }
      .tok-str {
          color: #d14;
      }
      .tok-builtin {
          color: #005C7A;
      }
      .tok-comment {
          color: #545454;
          font-style: italic;
      }
      .tok-fn {
          color: #900;
          font-weight: bold;
      }
      .tok-null {
          color: #005C5C;
      }
      .tok-number {
          color: #005C5C;
      }
      .tok-type {
          color: #458;
          font-weight: bold;
      }
      pre {
        counter-reset: line;
      }
      pre .line:before {
        counter-increment: line;
        content: counter(line);
        display: inline-block;
        padding-right: 1em;
        width: 2em;
        text-align: right;
        color: #999;
      }
      
      .line {
        width: 100%;
        display: inline-block;
      }
      .line:target {
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
        background: #fafafa;
      }

      @media (prefers-color-scheme: dark) {
        body{
            background:#222;
            color: #ccc;
        }
        pre > code {
            color: #ccc;
            background: #222;
            border: unset;
        }
        .line:target {
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            background: #333;
        }
        .tok-kw {
            color: #eee;
        }
        .tok-str {
            color: #2e5;
        }
        .tok-builtin {
            color: #ff894c;
        }
        .tok-comment {
            color: #aa7;
        }
        .tok-fn {
            color: #B1A0F8;
        }
        .tok-null {
            color: #ff8080;
        }
        .tok-number {
            color: #ff8080;
        }
        .tok-type {
            color: #68f;
        }
      }
    </style>
</head>
<body>
<pre><code><span class="line" id="L1"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line" id="L2"><span class="tok-kw">const</span> dds = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;dds&quot;</span>);</span>
<span class="line" id="L3"></span>
<span class="line" id="L4"><span class="tok-comment">/// terminal Fonction</span></span>
<span class="line" id="L5"><span class="tok-kw">const</span> term = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;cursed&quot;</span>);</span>
<span class="line" id="L6"><span class="tok-comment">// keyboard</span>
</span>
<span class="line" id="L7"><span class="tok-kw">const</span> kbd = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;cursed&quot;</span>).kbd;</span>
<span class="line" id="L8"></span>
<span class="line" id="L9"><span class="tok-comment">// error</span>
</span>
<span class="line" id="L10"><span class="tok-kw">const</span> msgerr = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).ErrForms;</span>
<span class="line" id="L11"><span class="tok-kw">const</span> dsperr = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).dsperr;</span>
<span class="line" id="L12"></span>
<span class="line" id="L13"><span class="tok-comment">// full delete for produc</span>
</span>
<span class="line" id="L14"><span class="tok-kw">const</span> forms = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>);</span>
<span class="line" id="L15"></span>
<span class="line" id="L16"><span class="tok-comment">// frame</span>
</span>
<span class="line" id="L17"><span class="tok-kw">const</span> frm = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).frm;</span>
<span class="line" id="L18"><span class="tok-comment">// panel</span>
</span>
<span class="line" id="L19"><span class="tok-kw">const</span> pnl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).pnl;</span>
<span class="line" id="L20"><span class="tok-comment">// button</span>
</span>
<span class="line" id="L21"><span class="tok-kw">const</span> btn = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).btn;</span>
<span class="line" id="L22"><span class="tok-comment">// label</span>
</span>
<span class="line" id="L23"><span class="tok-kw">const</span> lbl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lbl;</span>
<span class="line" id="L24"><span class="tok-comment">// menu</span>
</span>
<span class="line" id="L25"><span class="tok-kw">const</span> mnu = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).mnu;</span>
<span class="line" id="L26"><span class="tok-comment">// flied</span>
</span>
<span class="line" id="L27"><span class="tok-kw">const</span> fld = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).fld;</span>
<span class="line" id="L28"><span class="tok-comment">// line horizontal</span>
</span>
<span class="line" id="L29"><span class="tok-kw">const</span> lnh = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lnh;</span>
<span class="line" id="L30"><span class="tok-comment">// line vertival</span>
</span>
<span class="line" id="L31"><span class="tok-kw">const</span> lnv = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lnv;</span>
<span class="line" id="L32"></span>
<span class="line" id="L33"><span class="tok-comment">// grid</span>
</span>
<span class="line" id="L34"><span class="tok-kw">const</span> grd = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;grid&quot;</span>).grd;</span>
<span class="line" id="L35"></span>
<span class="line" id="L36"><span class="tok-comment">// tools utility</span>
</span>
<span class="line" id="L37"><span class="tok-kw">const</span> utl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;utils&quot;</span>);</span>
<span class="line" id="L38"></span>
<span class="line" id="L39"><span class="tok-comment">// tools regex</span>
</span>
<span class="line" id="L40"><span class="tok-kw">const</span> reg = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;match&quot;</span>);</span>
<span class="line" id="L41"></span>
<span class="line" id="L42"><span class="tok-kw">var</span> numPanel: <span class="tok-type">usize</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L43"></span>
<span class="line" id="L44"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ErrMain = <span class="tok-kw">error</span>{</span>
<span class="line" id="L45">	main_append_XPANEL_invalide,</span>
<span class="line" id="L46">	main_run_EnumFunc_invalide,</span>
<span class="line" id="L47">	main_run_EnumTask_invalide,</span>
<span class="line" id="L48">	main_loadPanel_allocPrint_invalide,</span>
<span class="line" id="L49">	main_updatePanel_allocPrint_invalide,</span>
<span class="line" id="L50">	main_XPANEL_invalide,</span>
<span class="line" id="L51">};</span>
<span class="line" id="L52"></span>
<span class="line" id="L53"><span class="tok-kw">fn</span> <span class="tok-fn">strToUsize</span>(v: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">usize</span> {</span>
<span class="line" id="L54">	<span class="tok-kw">if</span> (v.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-number">0</span>;</span>
<span class="line" id="L55">	<span class="tok-kw">return</span> std.fmt.parseUnsigned(<span class="tok-type">u64</span>, v, <span class="tok-number">10</span>) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L56">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L57">	};</span>
<span class="line" id="L58">}</span>
<span class="line" id="L59"></span>
<span class="line" id="L60"><span class="tok-kw">fn</span> <span class="tok-fn">usizeToStr</span>(v: <span class="tok-type">usize</span>) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line" id="L61">	<span class="tok-kw">return</span> std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>, .{v}) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L62">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L63">	};</span>
<span class="line" id="L64">}</span>
<span class="line" id="L65"></span>
<span class="line" id="L66"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L67"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L68"><span class="tok-comment">// choix work panel</span>
</span>
<span class="line" id="L69"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">qryPanel</span>(vpnl: *std.ArrayList(pnl.PANEL)) <span class="tok-type">usize</span> {</span>
<span class="line" id="L70">	<span class="tok-kw">var</span> cellPos: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L71"></span>
<span class="line" id="L72">	<span class="tok-kw">var</span> Xcombo: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L73">		<span class="tok-str">&quot;qryPanel&quot;</span>,</span>
<span class="line" id="L74">		<span class="tok-number">1</span>,</span>
<span class="line" id="L75">		<span class="tok-number">1</span>,</span>
<span class="line" id="L76">		<span class="tok-number">20</span>,</span>
<span class="line" id="L77">		grd.gridStyle,</span>
<span class="line" id="L78">		dds.CADRE.line1,</span>
<span class="line" id="L79">	);</span>
<span class="line" id="L80">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Xcombo);</span>
<span class="line" id="L81"></span>
<span class="line" id="L82">	grd.newCell(Xcombo, <span class="tok-str">&quot;ID&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L83">	grd.newCell(Xcombo, <span class="tok-str">&quot;Name&quot;</span>, <span class="tok-number">10</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L84">	grd.newCell(Xcombo, <span class="tok-str">&quot;Title&quot;</span>, <span class="tok-number">15</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L85">	grd.setHeaders(Xcombo);</span>
<span class="line" id="L86"></span>
<span class="line" id="L87">	<span class="tok-kw">for</span> (vpnl.items, <span class="tok-number">0</span>..) |p, idx| {</span>
<span class="line" id="L88">		grd.addRows(Xcombo, &amp;.{ usizeToStr(idx), p.name, p.frame.title });</span>
<span class="line" id="L89">	}</span>
<span class="line" id="L90"></span>
<span class="line" id="L91">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L92">	<span class="tok-kw">defer</span> Gkey.Buf.deinit();</span>
<span class="line" id="L93"></span>
<span class="line" id="L94">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L95">		Gkey = grd.ioCombo(Xcombo, cellPos);</span>
<span class="line" id="L96"></span>
<span class="line" id="L97">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L98">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L99"></span>
<span class="line" id="L100">			<span class="tok-kw">return</span> strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L101">		}</span>
<span class="line" id="L102"></span>
<span class="line" id="L103">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L104">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L105"></span>
<span class="line" id="L106">			<span class="tok-kw">return</span> <span class="tok-number">999</span>;</span>
<span class="line" id="L107">		}</span>
<span class="line" id="L108">	}</span>
<span class="line" id="L109">}</span>
<span class="line" id="L110"></span>
<span class="line" id="L111"></span>
<span class="line" id="L112"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">Panel_HELP</span>() *pnl.PANEL {</span>
<span class="line" id="L113">	<span class="tok-kw">var</span> Panel : *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;HELP&quot;</span>,</span>
<span class="line" id="L114">										<span class="tok-number">1</span>, <span class="tok-number">1</span>,</span>
<span class="line" id="L115">										<span class="tok-number">4</span>,</span>
<span class="line" id="L116">										<span class="tok-number">100</span> ,</span>
<span class="line" id="L117">										dds.CADRE.line1,</span>
<span class="line" id="L118">										<span class="tok-str">&quot;&quot;</span></span>
<span class="line" id="L119">										);</span>
<span class="line" id="L120"></span>
<span class="line" id="L121">	Panel.button.append(btn.newButton(</span>
<span class="line" id="L122">									kbd.F12,		<span class="tok-comment">// function</span>
</span>
<span class="line" id="L123">									<span class="tok-null">true</span>,			<span class="tok-comment">// show</span>
</span>
<span class="line" id="L124">									<span class="tok-null">false</span>,			<span class="tok-comment">// check field</span>
</span>
<span class="line" id="L125">									<span class="tok-str">&quot;Abord&quot;</span>,		<span class="tok-comment">// title </span>
</span>
<span class="line" id="L126">									)</span>
<span class="line" id="L127">								) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L128">	</span>
<span class="line" id="L129"></span>
<span class="line" id="L130">	Panel.field.append(fld.newFieldTextFull(<span class="tok-str">&quot;HELP&quot;</span>,<span class="tok-number">2</span>,<span class="tok-number">5</span>,<span class="tok-number">90</span>,<span class="tok-str">&quot;&quot;</span>,<span class="tok-null">false</span>,</span>
<span class="line" id="L131">								<span class="tok-str">&quot;&quot;</span>,<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L132">								<span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L133">	fld.setProtect(Panel,<span class="tok-number">0</span>,<span class="tok-null">true</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L134">	<span class="tok-kw">return</span> Panel;</span>
<span class="line" id="L135">	}</span>
<span class="line" id="L136"></span>
<span class="line" id="L137"><span class="tok-comment">// end desription Function</span>
</span>
<span class="line" id="L138"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L139"></span>
<span class="line" id="L140"><span class="tok-kw">var</span> maxY: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L141"><span class="tok-kw">var</span> maxX: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L142"><span class="tok-kw">var</span> minY: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L143"><span class="tok-kw">var</span> minX: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L144"><span class="tok-kw">var</span> X: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L145"><span class="tok-kw">var</span> Y: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L146"></span>
<span class="line" id="L147"></span>
<span class="line" id="L148"><span class="tok-comment">//pub fn main() !void {</span>
</span>
<span class="line" id="L149"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fnPanel</span>(XPANEL: *std.ArrayList(pnl.PANEL)) <span class="tok-type">void</span> {</span>
<span class="line" id="L150">	term.cls();</span>
<span class="line" id="L151"></span>
<span class="line" id="L152">	numPanel = qryPanel(XPANEL);</span>
<span class="line" id="L153"></span>
<span class="line" id="L154">	<span class="tok-kw">if</span> (numPanel == <span class="tok-number">999</span>) <span class="tok-kw">return</span>;</span>
<span class="line" id="L155"></span>
<span class="line" id="L156">	term.cls();</span>
<span class="line" id="L157">	<span class="tok-kw">var</span> pFmt01: *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;FRAM01&quot;</span>,</span>
<span class="line" id="L158">		XPANEL.items[numPanel].posx, XPANEL.items[numPanel].posy,</span>
<span class="line" id="L159">		XPANEL.items[numPanel].lines, XPANEL.items[numPanel].cols,</span>
<span class="line" id="L160">		XPANEL.items[numPanel].frame.cadre,</span>
<span class="line" id="L161">		XPANEL.items[numPanel].frame.title);</span>
<span class="line" id="L162"></span>
<span class="line" id="L163">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].button.items) |p| {</span>
<span class="line" id="L164">		pFmt01.button.append(p)</span>
<span class="line" id="L165">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L166">	}</span>
<span class="line" id="L167">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].label.items) |p| {</span>
<span class="line" id="L168">		pFmt01.label.append(p)</span>
<span class="line" id="L169">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L170">	}</span>
<span class="line" id="L171">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].field.items, <span class="tok-number">0</span>..) |p, idx| {</span>
<span class="line" id="L172">		pFmt01.field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L173">		<span class="tok-kw">var</span> vText: [] <span class="tok-type">u8</span> = <span class="tok-null">undefined</span> ;</span>
<span class="line" id="L174">		</span>
<span class="line" id="L175"> </span>
<span class="line" id="L176">			<span class="tok-kw">switch</span>(p.reftyp) {</span>
<span class="line" id="L177">				dds.REFTYP.TEXT_FREE, dds.REFTYP.TEXT_FULL ,	dds.REFTYP.ALPHA ,</span>
<span class="line" id="L178">				dds.REFTYP.ALPHA_UPPER,	dds.REFTYP.ALPHA_NUMERIC, dds.REFTYP.ALPHA_NUMERIC_UPPER,</span>
<span class="line" id="L179">				dds.REFTYP.PASSWORD, dds.REFTYP.YES_NO  =&gt;{</span>
<span class="line" id="L180">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L181">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'#'</span>);</span>
<span class="line" id="L182">				} ,</span>
<span class="line" id="L183"></span>
<span class="line" id="L184">				dds.REFTYP.UDIGIT =&gt;{</span>
<span class="line" id="L185">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L186">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L187">					<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L188">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L189">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L190">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L191">					}</span>
<span class="line" id="L192">				} ,</span>
<span class="line" id="L193">			</span>
<span class="line" id="L194">				dds.REFTYP.DIGIT =&gt;{</span>
<span class="line" id="L195">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width + <span class="tok-number">1</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L196">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L197">					vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s}&quot;</span>, .{vText[<span class="tok-number">0</span>..p.width]})</span>
<span class="line" id="L198">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L199">					<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L200">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L201">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L202">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L203">					}</span>
<span class="line" id="L204">				} ,</span>
<span class="line" id="L205">			</span>
<span class="line" id="L206">				dds.REFTYP.UDECIMAL =&gt;{</span>
<span class="line" id="L207">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width + <span class="tok-number">1</span> + p.scal) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L208">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..(p.width + p.scal)] , <span class="tok-str">'0'</span>);</span>
<span class="line" id="L209">					vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}.{s}&quot;</span>, .{vText[<span class="tok-number">0</span>..p.width],vText[<span class="tok-number">0</span>..p.scal]})</span>
<span class="line" id="L210">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L211">					<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L212">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L213">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L214">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L215">					}</span>
<span class="line" id="L216">				} ,</span>
<span class="line" id="L217">			</span>
<span class="line" id="L218">				dds.REFTYP.DECIMAL =&gt;{</span>
<span class="line" id="L219">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width + <span class="tok-number">2</span> + p.scal) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L220">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..(p.width + p.scal)], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L221">					vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s}.{s}&quot;</span>, .{vText[<span class="tok-number">0</span>..p.width],vText[<span class="tok-number">0</span>..p.scal]})</span>
<span class="line" id="L222">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L223">				<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L224">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L225">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L226">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L227">					}</span>
<span class="line" id="L228">				} ,</span>
<span class="line" id="L229">			</span>
<span class="line" id="L230">				dds.REFTYP.DATE_ISO =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;YYYY-MM-DD&quot;</span>, .{})</span>
<span class="line" id="L231">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L232">				dds.REFTYP.DATE_FR  =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;DD/MM/YYYY&quot;</span>, .{})</span>
<span class="line" id="L233">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L234"></span>
<span class="line" id="L235">				dds.REFTYP.DATE_US  =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;MM/DD/YYYY&quot;</span>, .{})</span>
<span class="line" id="L236">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L237"></span>
<span class="line" id="L238">				dds.REFTYP.TELEPHONE =&gt;{</span>
<span class="line" id="L239">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L240">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'*'</span>);</span>
<span class="line" id="L241">				} ,</span>
<span class="line" id="L242"></span>
<span class="line" id="L243">				dds.REFTYP.MAIL_ISO  =&gt;{</span>
<span class="line" id="L244">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L245">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'@'</span>);</span>
<span class="line" id="L246">				} ,</span>
<span class="line" id="L247">				dds.REFTYP.SWITCH   =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}&quot;</span>, .{dds.CTRUE})</span>
<span class="line" id="L248">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L249"></span>
<span class="line" id="L250">				dds.REFTYP.FUNC  =&gt;{</span>
<span class="line" id="L251">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L252">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'F'</span>);</span>
<span class="line" id="L253">				} ,</span>
<span class="line" id="L254"></span>
<span class="line" id="L255">			}</span>
<span class="line" id="L256">			fld.setText(pFmt01,	idx, vText) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L257"></span>
<span class="line" id="L258">	}</span>
<span class="line" id="L259"></span>
<span class="line" id="L260">	</span>
<span class="line" id="L261">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].linev.items) |p| {</span>
<span class="line" id="L262">		pFmt01.linev.append(p)</span>
<span class="line" id="L263">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L264">	}</span>
<span class="line" id="L265">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].lineh.items) |p| {</span>
<span class="line" id="L266">		pFmt01.lineh.append(p)</span>
<span class="line" id="L267">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L268">	}</span>
<span class="line" id="L269"></span>
<span class="line" id="L270">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].menu.items) |p| {</span>
<span class="line" id="L271">		pFmt01.menu.append(p)</span>
<span class="line" id="L272">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L273">	}</span>
<span class="line" id="L274"></span>
<span class="line" id="L275">	pFmt01.menu.append(mnu.newMenu(<span class="tok-str">&quot;Choix&quot;</span>, <span class="tok-comment">// name</span>
</span>
<span class="line" id="L276">			<span class="tok-number">1</span>, <span class="tok-number">1</span>, <span class="tok-comment">// posx, posy</span>
</span>
<span class="line" id="L277">			dds.CADRE.line1, <span class="tok-comment">// type line fram</span>
</span>
<span class="line" id="L278">			dds.MNUVH.vertical, <span class="tok-comment">// type menu vertical / horizontal</span>
</span>
<span class="line" id="L279">			&amp;.{ <span class="tok-comment">// item</span>
</span>
<span class="line" id="L280">			<span class="tok-str">&quot;Label-Order&quot;</span>,</span>
<span class="line" id="L281">			<span class="tok-str">&quot;Label-Remove&quot;</span>,</span>
<span class="line" id="L282">			<span class="tok-str">&quot;field-Order&quot;</span>,</span>
<span class="line" id="L283">			<span class="tok-str">&quot;field-Remove&quot;</span>,</span>
<span class="line" id="L284">			}</span>
<span class="line" id="L285">		)</span>
<span class="line" id="L286">	) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L287"> </span>
<span class="line" id="L288"> </span>
<span class="line" id="L289">	pnl.printPanel(pFmt01);</span>
<span class="line" id="L290"></span>
<span class="line" id="L291">	maxY = pFmt01.cols + pFmt01.posy;</span>
<span class="line" id="L292">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) maxY -= <span class="tok-number">0</span>;</span>
<span class="line" id="L293">	</span>
<span class="line" id="L294">	minY = pFmt01.posy;</span>
<span class="line" id="L295">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) minY += <span class="tok-number">1</span>;</span>
<span class="line" id="L296"></span>
<span class="line" id="L297">	maxX = pFmt01.lines + pFmt01.posx;</span>
<span class="line" id="L298">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) maxX -= <span class="tok-number">2</span>;</span>
<span class="line" id="L299">	</span>
<span class="line" id="L300">	minX = pFmt01.posx;</span>
<span class="line" id="L301">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) minX += <span class="tok-number">1</span>;</span>
<span class="line" id="L302"></span>
<span class="line" id="L303">	term.onMouse();</span>
<span class="line" id="L304">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>; <span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L305">	<span class="tok-kw">var</span> pFmtH01 = Panel_HELP();</span>
<span class="line" id="L306">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L307">		term.cursShow();</span>
<span class="line" id="L308">		Tkey = kbd.getKEY();</span>
<span class="line" id="L309"></span>
<span class="line" id="L310">		<span class="tok-kw">if</span> (Tkey.Key == kbd.mouse) {</span>
<span class="line" id="L311">			forms.dspMouse(pFmt01);</span>
<span class="line" id="L312">			<span class="tok-kw">continue</span>;</span>
<span class="line" id="L313">		} <span class="tok-comment">// active display Cursor x/y mouse</span>
</span>
<span class="line" id="L314"></span>
<span class="line" id="L315">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L316">			.F1	 =&gt; {</span>
<span class="line" id="L317">				fld.setText(pFmtH01,<span class="tok-number">0</span>,<span class="tok-str">&quot;F11 ENRG  F12 Abort  Alt-T Title Alt-L label Alt-F Field AltW Outils&quot;</span>)</span>
<span class="line" id="L318">					<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L319">				_= pnl.ioPanel(pFmtH01);</span>
<span class="line" id="L320">				pnl.rstPanel(pFmtH01,pFmt01);</span>
<span class="line" id="L321">				term.gotoXY(<span class="tok-number">1</span>,<span class="tok-number">1</span>);</span>
<span class="line" id="L322">				<span class="tok-kw">continue</span>;</span>
<span class="line" id="L323">			},</span>
<span class="line" id="L324">			.F11 =&gt; {</span>
<span class="line" id="L325">				XPANEL.items[numPanel].label.clearAndFree();</span>
<span class="line" id="L326">				XPANEL.items[numPanel].label = std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L327">				XPANEL.items[numPanel].label.clearRetainingCapacity();</span>
<span class="line" id="L328">				<span class="tok-kw">for</span> (pFmt01.label.items) |p| {</span>
<span class="line" id="L329">					XPANEL.items[numPanel].label.append(p)</span>
<span class="line" id="L330">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L331">				}</span>
<span class="line" id="L332"></span>
<span class="line" id="L333">				XPANEL.items[numPanel].field.clearAndFree();</span>
<span class="line" id="L334">				XPANEL.items[numPanel].field = std.ArrayList(fld.FIELD).init(dds.allocatorPnl);</span>
<span class="line" id="L335">				XPANEL.items[numPanel].field.clearRetainingCapacity();</span>
<span class="line" id="L336">				<span class="tok-kw">for</span> (pFmt01.field.items) |p| {</span>
<span class="line" id="L337">					XPANEL.items[numPanel].field.append(p) </span>
<span class="line" id="L338">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L339">				}</span>
<span class="line" id="L340"></span>
<span class="line" id="L341">				pnl.freePanel(pFmt01);</span>
<span class="line" id="L342">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt01);</span>
<span class="line" id="L343">				dds.deinitUtils();</span>
<span class="line" id="L344">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L345">			},</span>
<span class="line" id="L346">			.F12 =&gt; {</span>
<span class="line" id="L347">				pnl.freePanel(pFmt01);</span>
<span class="line" id="L348">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt01);</span>
<span class="line" id="L349">				dds.deinitUtils();</span>
<span class="line" id="L350">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L351">			},</span>
<span class="line" id="L352"></span>
<span class="line" id="L353">			<span class="tok-comment">// Def Title</span>
</span>
<span class="line" id="L354">			.altT =&gt; {</span>
<span class="line" id="L355">				term.getCursor();</span>
<span class="line" id="L356">				</span>
<span class="line" id="L357">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L358">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L359">				</span>
<span class="line" id="L360">				term.offMouse();</span>
<span class="line" id="L361">				writeLabel(pFmt01, <span class="tok-null">true</span>);</span>
<span class="line" id="L362">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L363">				term.onMouse();</span>
<span class="line" id="L364">			},</span>
<span class="line" id="L365"></span>
<span class="line" id="L366">			<span class="tok-comment">// def label</span>
</span>
<span class="line" id="L367">			.altL =&gt; {</span>
<span class="line" id="L368">				term.getCursor();</span>
<span class="line" id="L369">				</span>
<span class="line" id="L370">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L371">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L372">				</span>
<span class="line" id="L373">				term.offMouse();</span>
<span class="line" id="L374">				writeLabel(pFmt01, <span class="tok-null">false</span>);</span>
<span class="line" id="L375">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L376">				term.onMouse();</span>
<span class="line" id="L377">			},</span>
<span class="line" id="L378"></span>
<span class="line" id="L379">			<span class="tok-comment">// def field</span>
</span>
<span class="line" id="L380">			.altF =&gt; {</span>
<span class="line" id="L381">				term.getCursor();</span>
<span class="line" id="L382">				</span>
<span class="line" id="L383">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L384">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L385"></span>
<span class="line" id="L386">				term.writeStyled(<span class="tok-str">&quot;?&quot;</span>, pFmt01.attribut);</span>
<span class="line" id="L387">				term.gotoXY(term.posCurs.x, term.posCurs.y);</span>
<span class="line" id="L388">				term.getCursor();</span>
<span class="line" id="L389">				term.offMouse();</span>
<span class="line" id="L390">				writefield(pFmt01);</span>
<span class="line" id="L391">				term.cls();</span>
<span class="line" id="L392">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L393">				term.onMouse();</span>
<span class="line" id="L394">			},</span>
<span class="line" id="L395">			<span class="tok-comment">// Order / Remove</span>
</span>
<span class="line" id="L396">			.altW =&gt; {</span>
<span class="line" id="L397">				<span class="tok-kw">var</span> nitem: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L398">				nitem = mnu.ioMenu(pFmt01, pFmt01.menu.items[<span class="tok-number">0</span>], nitem);</span>
<span class="line" id="L399"></span>
<span class="line" id="L400">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">0</span>) orderLabel(pFmt01);	<span class="tok-comment">// Order  Label</span>
</span>
<span class="line" id="L401"></span>
<span class="line" id="L402">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">1</span>) removeLabel(pFmt01);   <span class="tok-comment">// Remove Label</span>
</span>
<span class="line" id="L403"></span>
<span class="line" id="L404">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">2</span>) orderField(pFmt01);	<span class="tok-comment">// order field</span>
</span>
<span class="line" id="L405"></span>
<span class="line" id="L406">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">3</span>) removeField(pFmt01);   <span class="tok-comment">// Remove field</span>
</span>
<span class="line" id="L407"></span>
<span class="line" id="L408">				term.offMouse();</span>
<span class="line" id="L409">				term.cls();</span>
<span class="line" id="L410">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L411">				term.onMouse();</span>
<span class="line" id="L412">			},</span>
<span class="line" id="L413">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L414">		}</span>
<span class="line" id="L415">	}</span>
<span class="line" id="L416">}</span>
<span class="line" id="L417"></span>
<span class="line" id="L418"><span class="tok-comment">//------------------------------------------------------------------</span>
</span>
<span class="line" id="L419"><span class="tok-comment">// definition label</span>
</span>
<span class="line" id="L420"></span>
<span class="line" id="L421"><span class="tok-kw">fn</span> <span class="tok-fn">writeLabel</span>(vpnl: *pnl.PANEL, vtitle: <span class="tok-type">bool</span>) <span class="tok-type">void</span> {</span>
<span class="line" id="L422">	<span class="tok-comment">//term.getCursor();</span>
</span>
<span class="line" id="L423">	<span class="tok-kw">var</span> e_count: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L424">	<span class="tok-kw">var</span> tampon: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L425">	<span class="tok-kw">var</span> text: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L426">	<span class="tok-kw">var</span> e_LABEL = std.ArrayList([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>).init(dds.allocatorUtils);</span>
<span class="line" id="L427">	<span class="tok-kw">defer</span> e_LABEL.deinit();</span>
<span class="line" id="L428">	<span class="tok-kw">defer</span> dds.allocatorUtils.destroy(&amp;e_LABEL);</span>
<span class="line" id="L429"></span>
<span class="line" id="L430">	<span class="tok-kw">var</span> e_posx: <span class="tok-type">usize</span> = term.posCurs.x;</span>
<span class="line" id="L431">	<span class="tok-kw">var</span> e_posy: <span class="tok-type">usize</span> = term.posCurs.y;</span>
<span class="line" id="L432">	<span class="tok-kw">var</span> e_curs: <span class="tok-type">usize</span> = e_posy;</span>
<span class="line" id="L433"></span>
<span class="line" id="L434">	<span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L435">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L436">	<span class="tok-kw">var</span> pFmtH01 = Panel_HELP();</span>
<span class="line" id="L437"></span>
<span class="line" id="L438">	<span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L439">	<span class="tok-kw">while</span> (i &lt; vpnl.cols) : (i += <span class="tok-number">1</span>) {</span>
<span class="line" id="L440">		e_LABEL.append(<span class="tok-str">&quot; &quot;</span>) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L441">			<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L442">		};</span>
<span class="line" id="L443">	}</span>
<span class="line" id="L444">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L445">		forms.dspCursor(vpnl, e_posx, e_curs,<span class="tok-str">&quot;Label/Title&quot;</span>);</span>
<span class="line" id="L446"></span>
<span class="line" id="L447">		Tkey = kbd.getKEY();</span>
<span class="line" id="L448"></span>
<span class="line" id="L449">		<span class="tok-comment">//dspMouse(vpnl);  // active display Cursor x/y mouse</span>
</span>
<span class="line" id="L450">		<span class="tok-comment">//std.debug.print(&quot;Key: {d}  - {d}\n\r&quot;,.{term.posCurs.x, term.posCurs.y});</span>
</span>
<span class="line" id="L451">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L452">			.F1	 =&gt; {</span>
<span class="line" id="L453">				fld.setText(pFmtH01,<span class="tok-number">0</span>,<span class="tok-str">&quot;F12 Abort  ctrl-V&quot;</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L454">				_= pnl.ioPanel(pFmtH01);</span>
<span class="line" id="L455">				pnl.rstPanel(pFmtH01,vpnl);</span>
<span class="line" id="L456">				term.gotoXY(<span class="tok-number">1</span>,<span class="tok-number">1</span>);</span>
<span class="line" id="L457">				<span class="tok-kw">continue</span>;</span>
<span class="line" id="L458">			},</span>
<span class="line" id="L459">			</span>
<span class="line" id="L460">			.F12 =&gt; <span class="tok-kw">return</span>,</span>
<span class="line" id="L461"></span>
<span class="line" id="L462">			.ctrlV =&gt; {</span>
<span class="line" id="L463">				tampon = std.fmt.allocPrint(dds.allocatorStr, <span class="tok-str">&quot;L{d}{d}&quot;</span>, .{ e_posx, e_posy })</span>
<span class="line" id="L464">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L465">				</span>
<span class="line" id="L466">				text = utl.trimStr(utl.listToStr(e_LABEL));</span>
<span class="line" id="L467">				<span class="tok-kw">if</span> (vtitle == <span class="tok-null">true</span> ) {</span>
<span class="line" id="L468">					vpnl.label.append(lbl.newTitle(tampon, e_posx, e_posy, fld.ToStr(text)))</span>
<span class="line" id="L469">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L470">				} <span class="tok-kw">else</span> {</span>
<span class="line" id="L471">					vpnl.label.append(lbl.newLabel(tampon, e_posx, e_posy, fld.ToStr(text))) </span>
<span class="line" id="L472">					   <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L473">				}</span>
<span class="line" id="L474">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L475">			},</span>
<span class="line" id="L476">			.home =&gt; {</span>
<span class="line" id="L477">				e_count = <span class="tok-number">0</span>;</span>
<span class="line" id="L478">				e_curs = e_posy;</span>
<span class="line" id="L479">			},</span>
<span class="line" id="L480">			.end =&gt; {</span>
<span class="line" id="L481">				tampon = utl.listToStr(e_LABEL);</span>
<span class="line" id="L482">				e_count = utl.trimStr(tampon).len - <span class="tok-number">1</span>;</span>
<span class="line" id="L483">				e_curs = e_posy + utl.trimStr(tampon).len - <span class="tok-number">1</span>;</span>
<span class="line" id="L484">			},</span>
<span class="line" id="L485">			.right, .tab =&gt; {</span>
<span class="line" id="L486">				<span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posy) - <span class="tok-number">1</span>) {</span>
<span class="line" id="L487">					e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L488">					e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L489">				}</span>
<span class="line" id="L490">			},</span>
<span class="line" id="L491">			.left, .stab =&gt; {</span>
<span class="line" id="L492">				<span class="tok-kw">if</span> (e_curs &gt; e_posy) {</span>
<span class="line" id="L493">					e_count -= <span class="tok-number">1</span>;</span>
<span class="line" id="L494">					e_curs -= <span class="tok-number">1</span>;</span>
<span class="line" id="L495">				}</span>
<span class="line" id="L496">			},</span>
<span class="line" id="L497">			.char =&gt; {</span>
<span class="line" id="L498">				<span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posy) - <span class="tok-number">1</span>) {</span>
<span class="line" id="L499">					<span class="tok-kw">if</span> (vtitle) {</span>
<span class="line" id="L500">						term.writeStyled(Tkey.Char, lbl.AtrTitle);</span>
<span class="line" id="L501">						e_LABEL.items[e_count] = Tkey.Char;</span>
<span class="line" id="L502">					} <span class="tok-kw">else</span> {</span>
<span class="line" id="L503">						term.writeStyled(Tkey.Char, lbl.AtrLabel);</span>
<span class="line" id="L504">						e_LABEL.items[e_count] = Tkey.Char;</span>
<span class="line" id="L505">					}</span>
<span class="line" id="L506">					<span class="tok-kw">if</span> (e_count &lt; vpnl.cols) {</span>
<span class="line" id="L507">						e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L508">						e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L509">					}</span>
<span class="line" id="L510">				}</span>
<span class="line" id="L511">			},</span>
<span class="line" id="L512">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L513">		}</span>
<span class="line" id="L514">	}</span>
<span class="line" id="L515">}</span>
<span class="line" id="L516"></span>
<span class="line" id="L517"><span class="tok-comment">// Order label</span>
</span>
<span class="line" id="L518"><span class="tok-kw">fn</span> <span class="tok-fn">orderLabel</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L519">	<span class="tok-kw">var</span> idy: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L520">	<span class="tok-kw">const</span> allocatorOrder = std.heap.page_allocator;</span>
<span class="line" id="L521">	<span class="tok-kw">var</span> newlabel = std.ArrayList(lbl.LABEL).init(allocatorOrder);</span>
<span class="line" id="L522">	<span class="tok-kw">var</span> savlabel = std.ArrayList(lbl.LABEL).init(allocatorOrder);</span>
<span class="line" id="L523"></span>
<span class="line" id="L524">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L525">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L526"></span>
<span class="line" id="L527">	<span class="tok-kw">for</span> (vpnl.label.items) |p| {</span>
<span class="line" id="L528">		savlabel.append(p)</span>
<span class="line" id="L529">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };		</span>
<span class="line" id="L530">	}</span>
<span class="line" id="L531"></span>
<span class="line" id="L532">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L533">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L534">		<span class="tok-number">2</span>,</span>
<span class="line" id="L535">		<span class="tok-number">2</span>,</span>
<span class="line" id="L536">		<span class="tok-number">25</span>,</span>
<span class="line" id="L537">		grd.gridStyle,</span>
<span class="line" id="L538">		dds.CADRE.line1,</span>
<span class="line" id="L539">	);</span>
<span class="line" id="L540">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L541"></span>
<span class="line" id="L542">	<span class="tok-kw">var</span> Order: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L543">		<span class="tok-str">&quot;Order&quot;</span>,</span>
<span class="line" id="L544">		<span class="tok-number">2</span>,</span>
<span class="line" id="L545">		<span class="tok-number">70</span>,</span>
<span class="line" id="L546">		<span class="tok-number">25</span>,</span>
<span class="line" id="L547">		grd.gridStyle,</span>
<span class="line" id="L548">		dds.CADRE.line1,</span>
<span class="line" id="L549">	);</span>
<span class="line" id="L550">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Order);</span>
<span class="line" id="L551"></span>
<span class="line" id="L552">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L553">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L554">	grd.newCell(Origine, <span class="tok-str">&quot;text&quot;</span>, <span class="tok-number">40</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L555">	grd.setHeaders(Origine);</span>
<span class="line" id="L556"></span>
<span class="line" id="L557">	grd.newCell(Order, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L558">	grd.newCell(Order, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L559">	grd.newCell(Order, <span class="tok-str">&quot;text&quot;</span>, <span class="tok-number">40</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L560">	grd.setHeaders(Order);</span>
<span class="line" id="L561"></span>
<span class="line" id="L562">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L563">		grd.resetRows(Origine);</span>
<span class="line" id="L564">		<span class="tok-kw">for</span> (vpnl.label.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L565">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L566"></span>
<span class="line" id="L567">			<span class="tok-kw">if</span> (l.text.len &gt; <span class="tok-number">40</span>) grd.addRows(Origine, &amp;.{ ridx, l.name, l.text[<span class="tok-number">0</span>..<span class="tok-number">39</span>] })</span>
<span class="line" id="L568">			<span class="tok-kw">else</span> grd.addRows(Origine, &amp;.{ ridx, l.name, l.text });</span>
<span class="line" id="L569">		}</span>
<span class="line" id="L570"></span>
<span class="line" id="L571">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L572">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L573">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L574">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L575">			newlabel.append(vpnl.label.items[strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>])])</span>
<span class="line" id="L576">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L577">			</span>
<span class="line" id="L578">			<span class="tok-kw">var</span> ridy = usizeToStr(idy);</span>
<span class="line" id="L579"></span>
<span class="line" id="L580">			grd.addRows(Order, &amp;.{ ridy, Gkey.Buf.items[<span class="tok-number">1</span>], Gkey.Buf.items[<span class="tok-number">2</span>] });</span>
<span class="line" id="L581">			idy += <span class="tok-number">1</span>;</span>
<span class="line" id="L582">			grd.printGridHeader(Order);</span>
<span class="line" id="L583">			grd.printGridRows(Order);</span>
<span class="line" id="L584">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L585"></span>
<span class="line" id="L586">			_ = vpnl.label.orderedRemove(ligne);</span>
<span class="line" id="L587">		}</span>
<span class="line" id="L588">	}</span>
<span class="line" id="L589"></span>
<span class="line" id="L590">	vpnl.label.clearAndFree();</span>
<span class="line" id="L591">	vpnl.label = std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L592">	vpnl.label.clearRetainingCapacity();</span>
<span class="line" id="L593">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L594">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L595">		<span class="tok-kw">for</span> (savlabel.items) |p| {</span>
<span class="line" id="L596">			vpnl.label.append(p)</span>
<span class="line" id="L597">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L598">		}</span>
<span class="line" id="L599">	}</span>
<span class="line" id="L600">	<span class="tok-comment">// new Order and exit CTRL-V</span>
</span>
<span class="line" id="L601">	<span class="tok-kw">else</span> {</span>
<span class="line" id="L602">		<span class="tok-kw">for</span> (newlabel.items) |p| {</span>
<span class="line" id="L603">			vpnl.label.append(p)   </span>
<span class="line" id="L604">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L605">				 }</span>
<span class="line" id="L606">	}</span>
<span class="line" id="L607"></span>
<span class="line" id="L608">	grd.freeGrid(Origine);</span>
<span class="line" id="L609">	grd.freeGrid(Order);</span>
<span class="line" id="L610"></span>
<span class="line" id="L611">	newlabel.clearAndFree();</span>
<span class="line" id="L612">	newlabel.deinit();</span>
<span class="line" id="L613"></span>
<span class="line" id="L614">	savlabel.clearAndFree();</span>
<span class="line" id="L615">	savlabel.deinit();</span>
<span class="line" id="L616"></span>
<span class="line" id="L617">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L618">}</span>
<span class="line" id="L619"></span>
<span class="line" id="L620"><span class="tok-comment">// remove Label</span>
</span>
<span class="line" id="L621"><span class="tok-kw">fn</span> <span class="tok-fn">removeLabel</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L622">	<span class="tok-kw">const</span> allocatorRemove = std.heap.page_allocator;</span>
<span class="line" id="L623">	<span class="tok-kw">var</span> savlabel: std.ArrayList(lbl.LABEL) = std.ArrayList(lbl.LABEL).init(allocatorRemove);</span>
<span class="line" id="L624"></span>
<span class="line" id="L625">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L626">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L627"></span>
<span class="line" id="L628">	<span class="tok-kw">for</span> (vpnl.label.items) |p| {</span>
<span class="line" id="L629">		savlabel.append(p)  </span>
<span class="line" id="L630">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L631">	}</span>
<span class="line" id="L632"></span>
<span class="line" id="L633">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L634">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L635">		<span class="tok-number">2</span>,</span>
<span class="line" id="L636">		<span class="tok-number">2</span>,</span>
<span class="line" id="L637">		<span class="tok-number">25</span>,</span>
<span class="line" id="L638">		grd.gridStyle,</span>
<span class="line" id="L639">		dds.CADRE.line1,</span>
<span class="line" id="L640">	);</span>
<span class="line" id="L641">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L642"></span>
<span class="line" id="L643">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L644">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L645">	grd.newCell(Origine, <span class="tok-str">&quot;text&quot;</span>, <span class="tok-number">40</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L646">	grd.setHeaders(Origine);</span>
<span class="line" id="L647"></span>
<span class="line" id="L648">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L649">		grd.resetRows(Origine);</span>
<span class="line" id="L650">		<span class="tok-kw">for</span> (vpnl.label.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L651">			<span class="tok-kw">var</span> ridx =  usizeToStr(idx);</span>
<span class="line" id="L652"> </span>
<span class="line" id="L653">			<span class="tok-kw">if</span> (l.text.len &gt; <span class="tok-number">40</span>) grd.addRows(Origine, &amp;.{ ridx, l.name, l.text[<span class="tok-number">0</span>..<span class="tok-number">39</span>] })</span>
<span class="line" id="L654">			<span class="tok-kw">else</span> grd.addRows(Origine, &amp;.{ ridx, l.name, l.text });</span>
<span class="line" id="L655">		}</span>
<span class="line" id="L656"></span>
<span class="line" id="L657">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L658">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L659">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L660">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L661">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L662"></span>
<span class="line" id="L663">			_ = vpnl.label.orderedRemove(ligne);</span>
<span class="line" id="L664">		}</span>
<span class="line" id="L665">	}</span>
<span class="line" id="L666"></span>
<span class="line" id="L667">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L668">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L669">		vpnl.label.clearAndFree();</span>
<span class="line" id="L670">		vpnl.label = std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L671">		vpnl.label.clearRetainingCapacity();</span>
<span class="line" id="L672"></span>
<span class="line" id="L673">		<span class="tok-kw">for</span> (savlabel.items) |p| {</span>
<span class="line" id="L674">			vpnl.label.append(p) </span>
<span class="line" id="L675">			 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L676">		}</span>
<span class="line" id="L677">	}</span>
<span class="line" id="L678"></span>
<span class="line" id="L679">	grd.freeGrid(Origine);</span>
<span class="line" id="L680"></span>
<span class="line" id="L681">	savlabel.clearAndFree();</span>
<span class="line" id="L682">	savlabel.deinit();</span>
<span class="line" id="L683">}</span>
<span class="line" id="L684"></span>
<span class="line" id="L685"><span class="tok-comment">//==========================================</span>
</span>
<span class="line" id="L686"><span class="tok-comment">// FIELD Management</span>
</span>
<span class="line" id="L687"><span class="tok-comment">//==========================================</span>
</span>
<span class="line" id="L688"></span>
<span class="line" id="L689"><span class="tok-comment">// forms field</span>
</span>
<span class="line" id="L690"><span class="tok-kw">const</span> fp02 = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L691">	fname,</span>
<span class="line" id="L692">	fposx,</span>
<span class="line" id="L693">	fposy,</span>
<span class="line" id="L694">	ftype,</span>
<span class="line" id="L695">	fwidth,</span>
<span class="line" id="L696">	fscal,</span>
<span class="line" id="L697">	frequi,</span>
<span class="line" id="L698">	fprotect,</span>
<span class="line" id="L699">	fedtcar,</span>
<span class="line" id="L700">	ferrmsg,</span>
<span class="line" id="L701">	fhelp,</span>
<span class="line" id="L702">	ffunc,</span>
<span class="line" id="L703">	ftask,</span>
<span class="line" id="L704">};</span>
<span class="line" id="L705"></span>
<span class="line" id="L706"><span class="tok-comment">//  string return enum</span>
</span>
<span class="line" id="L707"><span class="tok-kw">fn</span> <span class="tok-fn">strToEnum</span>(<span class="tok-kw">comptime</span> EnumTag: <span class="tok-type">type</span>, vtext: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) EnumTag {</span>
<span class="line" id="L708">	<span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(EnumTag).Enum.fields) |f| {</span>
<span class="line" id="L709">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vtext)) <span class="tok-kw">return</span> <span class="tok-builtin">@field</span>(EnumTag, f.name);</span>
<span class="line" id="L710">	}</span>
<span class="line" id="L711"></span>
<span class="line" id="L712">	<span class="tok-kw">var</span> buffer: [<span class="tok-number">128</span>]<span class="tok-type">u8</span> = [_]<span class="tok-type">u8</span>{<span class="tok-number">0</span>} ** <span class="tok-number">128</span>;</span>
<span class="line" id="L713">	<span class="tok-kw">var</span> result = std.fmt.bufPrintZ(buffer[<span class="tok-number">0</span>..], <span class="tok-str">&quot;invalid Text {s} for strToEnum &quot;</span>, .{vtext}) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L714">	<span class="tok-builtin">@panic</span>(result);</span>
<span class="line" id="L715">}</span>
<span class="line" id="L716"></span>
<span class="line" id="L717"><span class="tok-comment">// panel for field</span>
</span>
<span class="line" id="L718"><span class="tok-kw">fn</span> <span class="tok-fn">Panel_Fmt02</span>(nposx: <span class="tok-type">usize</span>) *pnl.PANEL {</span>
<span class="line" id="L719">	<span class="tok-kw">var</span> Panel: *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;FRAM01&quot;</span>, nposx, <span class="tok-number">2</span>, <span class="tok-number">12</span>, <span class="tok-number">62</span>, dds.CADRE.line1, <span class="tok-str">&quot;Def.field&quot;</span>);</span>
<span class="line" id="L720"></span>
<span class="line" id="L721">	Panel.button.append(btn.newButton(</span>
<span class="line" id="L722">		kbd.F9, <span class="tok-comment">// function</span>
</span>
<span class="line" id="L723">		<span class="tok-null">true</span>, <span class="tok-comment">// show</span>
</span>
<span class="line" id="L724">		<span class="tok-null">true</span>, <span class="tok-comment">// check field</span>
</span>
<span class="line" id="L725">		<span class="tok-str">&quot;Enrg&quot;</span>, <span class="tok-comment">// title</span>
</span>
<span class="line" id="L726">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L727">	</span>
<span class="line" id="L728">	Panel.button.append(btn.newButton(</span>
<span class="line" id="L729">		kbd.F12, <span class="tok-comment">// function</span>
</span>
<span class="line" id="L730">		<span class="tok-null">true</span>, <span class="tok-comment">// show</span>
</span>
<span class="line" id="L731">		<span class="tok-null">false</span>, <span class="tok-comment">// check field</span>
</span>
<span class="line" id="L732">		<span class="tok-str">&quot;Return&quot;</span>, <span class="tok-comment">// title</span>
</span>
<span class="line" id="L733">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L734"></span>
<span class="line" id="L735">	</span>
<span class="line" id="L736">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fname), <span class="tok-number">2</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;name.....:&quot;</span>)) </span>
<span class="line" id="L737">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L738">	</span>
<span class="line" id="L739">	Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.fname), <span class="tok-number">2</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L740">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L741">		<span class="tok-number">15</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L742">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L743">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L744">		<span class="tok-str">&quot;required help ctrl-h&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L745">		<span class="tok-str">&quot;please enter text 1car Letter  other alphanumeric&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L746">		<span class="tok-str">&quot;(^[a-zA-Z]{1,1}[a-zA-Z0-9]{1,})$&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L747">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L748"></span>
<span class="line" id="L749">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fname), <span class="tok-str">&quot;TaskName&quot;</span>) </span>
<span class="line" id="L750">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L751"></span>
<span class="line" id="L752"></span>
<span class="line" id="L753">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fposx), <span class="tok-number">3</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;PosX.:&quot;</span>))</span>
<span class="line" id="L754">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L755"></span>
<span class="line" id="L756">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fposx), <span class="tok-number">3</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L757">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L758">		<span class="tok-number">2</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L759">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L760">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L761">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// Msg err default</span>
</span>
<span class="line" id="L762">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// help default</span>
</span>
<span class="line" id="L763">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex default</span>
</span>
<span class="line" id="L764">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L765"></span>
<span class="line" id="L766">	fld.setProtect(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fposx), <span class="tok-null">true</span>)</span>
<span class="line" id="L767">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L768"></span>
<span class="line" id="L769"></span>
<span class="line" id="L770">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fposy), <span class="tok-number">3</span>, <span class="tok-number">12</span>, <span class="tok-str">&quot;PosY.:&quot;</span>))</span>
<span class="line" id="L771">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };	 </span>
<span class="line" id="L772"></span>
<span class="line" id="L773">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fposy), <span class="tok-number">3</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L774">		<span class="tok-number">12</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L775">		<span class="tok-number">3</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L776">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L777">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L778">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// Msg err default</span>
</span>
<span class="line" id="L779">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// help default</span>
</span>
<span class="line" id="L780">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex default</span>
</span>
<span class="line" id="L781">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L782"></span>
<span class="line" id="L783">	fld.setProtect(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fposy), <span class="tok-null">true</span>) </span>
<span class="line" id="L784">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L785">		</span>
<span class="line" id="L786"></span>
<span class="line" id="L787">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ftype), <span class="tok-number">3</span>, <span class="tok-number">32</span>, <span class="tok-str">&quot;Type.:&quot;</span>))</span>
<span class="line" id="L788">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L789">		</span>
<span class="line" id="L790">	Panel.field.append(fld.newFieldFunc(</span>
<span class="line" id="L791">		<span class="tok-builtin">@tagName</span>(fp02.ftype),</span>
<span class="line" id="L792">		<span class="tok-number">3</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L793">		<span class="tok-number">32</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftype)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L794">		<span class="tok-number">19</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L795">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L796">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L797">		<span class="tok-str">&quot;funcType&quot;</span>, <span class="tok-comment">// function</span>
</span>
<span class="line" id="L798">		<span class="tok-str">&quot;Reference type required&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L799">		<span class="tok-str">&quot;Refence field&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L800">	)) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L801">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L802">	};</span>
<span class="line" id="L803">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.ftype), <span class="tok-str">&quot;TaskType&quot;</span>)</span>
<span class="line" id="L804">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L805"></span>
<span class="line" id="L806">		</span>
<span class="line" id="L807">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fwidth), <span class="tok-number">4</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Width.:&quot;</span>))</span>
<span class="line" id="L808">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L809">		</span>
<span class="line" id="L810">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fwidth), <span class="tok-number">4</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L811">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L812">		<span class="tok-number">3</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L813">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L814">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L815">		<span class="tok-str">&quot;Len field required or too long&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L816">		<span class="tok-str">&quot;len field&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L817">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L818">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L819"></span>
<span class="line" id="L820">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fwidth), <span class="tok-str">&quot;TaskWidth&quot;</span>) </span>
<span class="line" id="L821">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L822">		</span>
<span class="line" id="L823"></span>
<span class="line" id="L824">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fscal), <span class="tok-number">4</span>, <span class="tok-number">20</span>, <span class="tok-str">&quot;Scal.:&quot;</span>))</span>
<span class="line" id="L825">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L826">		</span>
<span class="line" id="L827">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fscal), <span class="tok-number">4</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L828">		<span class="tok-number">20</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L829">		<span class="tok-number">3</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L830">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L831">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L832">		<span class="tok-str">&quot;Len Scal field required or too long&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L833">		<span class="tok-str">&quot;len Scal field&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L834">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L835">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L836"></span>
<span class="line" id="L837">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fscal), <span class="tok-str">&quot;TaskScal&quot;</span>)</span>
<span class="line" id="L838">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L839">		</span>
<span class="line" id="L840">	</span>
<span class="line" id="L841">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.frequi), <span class="tok-number">4</span>, <span class="tok-number">32</span>, <span class="tok-str">&quot;Required.:&quot;</span>))</span>
<span class="line" id="L842">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L843">		</span>
<span class="line" id="L844">	Panel.field.append(fld.newFieldSwitch(<span class="tok-builtin">@tagName</span>(fp02.frequi), <span class="tok-number">4</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L845">		<span class="tok-number">32</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L846">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L847">		<span class="tok-str">&quot;field required True or False&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L848">		<span class="tok-str">&quot; field value required True or False&quot;</span> <span class="tok-comment">// Text</span>
</span>
<span class="line" id="L849">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L850"></span>
<span class="line" id="L851"></span>
<span class="line" id="L852">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fprotect), <span class="tok-number">5</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Protect.:&quot;</span>))</span>
<span class="line" id="L853">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L854"></span>
<span class="line" id="L855">	Panel.field.append(fld.newFieldSwitch(<span class="tok-builtin">@tagName</span>(fp02.fprotect), <span class="tok-number">5</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L856">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fprotect)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L857">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L858">		<span class="tok-str">&quot;field Protect required True or False&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L859">		<span class="tok-str">&quot; field Protect required True or False&quot;</span> <span class="tok-comment">// Text</span>
</span>
<span class="line" id="L860">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L861"></span>
<span class="line" id="L862">	</span>
<span class="line" id="L863">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fedtcar), <span class="tok-number">5</span>, <span class="tok-number">20</span>, <span class="tok-str">&quot;Edit Car.:&quot;</span>))</span>
<span class="line" id="L864">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L865">		</span>
<span class="line" id="L866">	Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.fedtcar), <span class="tok-number">5</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L867">		<span class="tok-number">20</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L868">		<span class="tok-number">1</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L869">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L870">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L871">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L872">		<span class="tok-str">&quot;please enter text ex:$  % &quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L873">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L874">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L875"> </span>
<span class="line" id="L876">		fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fscal), <span class="tok-str">&quot;TaskEdtcar&quot;</span>)</span>
<span class="line" id="L877">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L878"> </span>
<span class="line" id="L879">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ferrmsg), <span class="tok-number">6</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Err Msg.:&quot;</span>)) </span>
<span class="line" id="L880">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L881">		</span>
<span class="line" id="L882">	Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.ferrmsg), <span class="tok-number">6</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L883">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L884">		<span class="tok-number">50</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L885">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L886">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L887">		<span class="tok-str">&quot;required Help&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L888">		<span class="tok-str">&quot;please enter text  message error&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L889">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L890">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L891">		</span>
<span class="line" id="L892">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg), <span class="tok-str">&quot;TaskErrmsg&quot;</span>) </span>
<span class="line" id="L893">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L894"></span>
<span class="line" id="L895"></span>
<span class="line" id="L896">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fhelp), <span class="tok-number">7</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Help.:&quot;</span>)) </span>
<span class="line" id="L897">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L898"></span>
<span class="line" id="L899">	Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.fhelp), <span class="tok-number">7</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L900">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L901">		<span class="tok-number">50</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L902">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L903">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L904">		<span class="tok-str">&quot;required Help&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L905">		<span class="tok-str">&quot;please enter text  Help&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L906">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L907">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L908"></span>
<span class="line" id="L909">	</span>
<span class="line" id="L910">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ffunc), <span class="tok-number">8</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Function.:&quot;</span>))</span>
<span class="line" id="L911">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L912"></span>
<span class="line" id="L913">	Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.ffunc), <span class="tok-number">8</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L914">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L915">		<span class="tok-number">15</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L916">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L917">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L918">		<span class="tok-str">&quot;required Function&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L919">		<span class="tok-str">&quot;please enter Name Function  F.....&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L920">		<span class="tok-str">&quot;(^[F]{1,1}[a-zA-Z0-9]{1,})$&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L921">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L922"></span>
<span class="line" id="L923">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.ffunc), <span class="tok-str">&quot;TaskFunc&quot;</span>) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L924">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L925">	};</span>
<span class="line" id="L926"></span>
<span class="line" id="L927"></span>
<span class="line" id="L928">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ftask), <span class="tok-number">9</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Task.:&quot;</span>)) </span>
<span class="line" id="L929">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L930">		</span>
<span class="line" id="L931">	Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.ftask), <span class="tok-number">9</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L932">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftask)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L933">		<span class="tok-number">15</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L934">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L935">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L936">		<span class="tok-str">&quot;err Task&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L937">		<span class="tok-str">&quot;please enter Name Task T.....&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L938">		<span class="tok-str">&quot;(^[T]{1,1}[a-zA-Z0-9]{1,})$&quot;</span> <span class="tok-comment">// regex1</span>
</span>
<span class="line" id="L939">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L940"></span>
<span class="line" id="L941">	<span class="tok-kw">return</span> Panel;</span>
<span class="line" id="L942">}</span>
<span class="line" id="L943"></span>
<span class="line" id="L944"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L945"></span>
<span class="line" id="L946"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L947"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L948"><span class="tok-comment">// choix Cadre</span>
</span>
<span class="line" id="L949"><span class="tok-kw">fn</span> <span class="tok-fn">funcType</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L950">	<span class="tok-kw">var</span> pos: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L951"></span>
<span class="line" id="L952">	<span class="tok-kw">var</span> Xcombo: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L953">		<span class="tok-str">&quot;qryPanel&quot;</span>,</span>
<span class="line" id="L954">		vpnl.posx + <span class="tok-number">1</span>,</span>
<span class="line" id="L955">		vpnl.posy + <span class="tok-number">1</span>,</span>
<span class="line" id="L956">		<span class="tok-number">7</span>,</span>
<span class="line" id="L957">		grd.gridStyle,</span>
<span class="line" id="L958">		dds.CADRE.line1,</span>
<span class="line" id="L959">	);</span>
<span class="line" id="L960">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Xcombo);</span>
<span class="line" id="L961">	grd.newCell(Xcombo, <span class="tok-str">&quot;Ref.Type&quot;</span>, <span class="tok-number">19</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L962">	grd.setHeaders(Xcombo);</span>
<span class="line" id="L963">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TEXT_FREE&quot;</span>}); <span class="tok-comment">// Free</span>
</span>
<span class="line" id="L964">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TEXT_FULL&quot;</span>}); <span class="tok-comment">// Letter Digit Char-special</span>
</span>
<span class="line" id="L965">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA&quot;</span>}); <span class="tok-comment">// Letter</span>
</span>
<span class="line" id="L966">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_UPPER&quot;</span>}); <span class="tok-comment">// Letter</span>
</span>
<span class="line" id="L967">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_NUMERIC&quot;</span>}); <span class="tok-comment">// Letter Digit espace -</span>
</span>
<span class="line" id="L968">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_NUMERIC_UPPER&quot;</span>}); <span class="tok-comment">// Letter Digit espace -</span>
</span>
<span class="line" id="L969">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;PASSWORD&quot;</span>}); <span class="tok-comment">// Letter Digit and normaliz char-special</span>
</span>
<span class="line" id="L970">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;YES_NO&quot;</span>}); <span class="tok-comment">// 'y' or 'Y' / 'o' or 'O'</span>
</span>
<span class="line" id="L971">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;UDIGIT&quot;</span>}); <span class="tok-comment">// Digit unsigned</span>
</span>
<span class="line" id="L972">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DIGIT&quot;</span>}); <span class="tok-comment">// Digit signed</span>
</span>
<span class="line" id="L973">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;UDECIMAL&quot;</span>}); <span class="tok-comment">// Decimal unsigned</span>
</span>
<span class="line" id="L974">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DECIMAL&quot;</span>}); <span class="tok-comment">// Decimal signed</span>
</span>
<span class="line" id="L975">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_ISO&quot;</span>}); <span class="tok-comment">// YYYY/MM/DD</span>
</span>
<span class="line" id="L976">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_FR&quot;</span>}); <span class="tok-comment">// DD/MM/YYYY</span>
</span>
<span class="line" id="L977">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_US&quot;</span>}); <span class="tok-comment">// MM/DD/YYYY</span>
</span>
<span class="line" id="L978">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TELEPHONE&quot;</span>}); <span class="tok-comment">// (+123) 6 00 01 00 02</span>
</span>
<span class="line" id="L979">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;MAIL_ISO&quot;</span>}); <span class="tok-comment">// normalize regex</span>
</span>
<span class="line" id="L980">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;SWITCH&quot;</span>}); <span class="tok-comment">// CTRUE CFALSE</span>
</span>
<span class="line" id="L981">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;FUNC&quot;</span>}); <span class="tok-comment">// call Function</span>
</span>
<span class="line" id="L982"></span>
<span class="line" id="L983">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TEXT_FREE&quot;</span>)) pos = <span class="tok-number">0</span>;</span>
<span class="line" id="L984">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TEXT_FULL&quot;</span>)) pos = <span class="tok-number">1</span>;</span>
<span class="line" id="L985">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA&quot;</span>)) pos = <span class="tok-number">2</span>;</span>
<span class="line" id="L986">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_UPPER&quot;</span>)) pos = <span class="tok-number">3</span>;</span>
<span class="line" id="L987">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_NUMERIC&quot;</span>)) pos = <span class="tok-number">4</span>;</span>
<span class="line" id="L988">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_NUMERIC_UPPER&quot;</span>)) pos = <span class="tok-number">5</span>;</span>
<span class="line" id="L989">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;PASSWORD&quot;</span>)) pos = <span class="tok-number">6</span>;</span>
<span class="line" id="L990">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;YES_NO&quot;</span>)) pos = <span class="tok-number">7</span>;</span>
<span class="line" id="L991">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDIGIT&quot;</span>)) pos = <span class="tok-number">8</span>;</span>
<span class="line" id="L992">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDECIMAL&quot;</span>)) pos = <span class="tok-number">9</span>;</span>
<span class="line" id="L993">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) pos = <span class="tok-number">10</span>;</span>
<span class="line" id="L994">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_ISO&quot;</span>)) pos = <span class="tok-number">11</span>;</span>
<span class="line" id="L995">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_FR&quot;</span>)) pos = <span class="tok-number">12</span>;</span>
<span class="line" id="L996">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_US&quot;</span>)) pos = <span class="tok-number">13</span>;</span>
<span class="line" id="L997">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TELEPHONE&quot;</span>)) pos = <span class="tok-number">14</span>;</span>
<span class="line" id="L998">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;MAIL_ISO&quot;</span>)) pos = <span class="tok-number">15</span>;</span>
<span class="line" id="L999">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;SWITCH&quot;</span>)) pos = <span class="tok-number">16</span>;</span>
<span class="line" id="L1000">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;FUNC&quot;</span>)) pos = <span class="tok-number">17</span>;</span>
<span class="line" id="L1001"></span>
<span class="line" id="L1002">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1003">	<span class="tok-kw">defer</span> Gkey.Buf.deinit();</span>
<span class="line" id="L1004"></span>
<span class="line" id="L1005">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1006">		Gkey = grd.ioCombo(Xcombo, pos);</span>
<span class="line" id="L1007"></span>
<span class="line" id="L1008">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L1009">			grd.rstPanel(Xcombo, vpnl);</span>
<span class="line" id="L1010">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L1011">			fld.setText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.ftype), Gkey.Buf.items[<span class="tok-number">0</span>]) </span>
<span class="line" id="L1012">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L1013">			<span class="tok-kw">return</span>;</span>
<span class="line" id="L1014">		}</span>
<span class="line" id="L1015"></span>
<span class="line" id="L1016">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L1017">			grd.rstPanel(Xcombo, vpnl);</span>
<span class="line" id="L1018">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L1019">			<span class="tok-kw">return</span>;</span>
<span class="line" id="L1020">		}</span>
<span class="line" id="L1021">	}</span>
<span class="line" id="L1022">}</span>
<span class="line" id="L1023"></span>
<span class="line" id="L1024"><span class="tok-kw">var</span> callFunc: FuncEnum = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1025"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1026"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1027"><span class="tok-comment">/// run emun Function ex: combo</span></span>
<span class="line" id="L1028"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> FuncEnum = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L1029">	funcType,</span>
<span class="line" id="L1030">	none,</span>
<span class="line" id="L1031"></span>
<span class="line" id="L1032">	<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">run</span>(self: FuncEnum, vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1033">		<span class="tok-kw">switch</span> (self) {</span>
<span class="line" id="L1034">			.funcType =&gt; funcType(vpnl, vfld),</span>
<span class="line" id="L1035">			<span class="tok-kw">else</span> =&gt; dsperr.errorForms(vpnl, ErrMain.main_run_EnumFunc_invalide),</span>
<span class="line" id="L1036">		}</span>
<span class="line" id="L1037">	}</span>
<span class="line" id="L1038"></span>
<span class="line" id="L1039">	<span class="tok-kw">fn</span> <span class="tok-fn">searchFn</span>(vtext: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) FuncEnum {</span>
<span class="line" id="L1040">		<span class="tok-kw">var</span> max: <span class="tok-type">usize</span> = <span class="tok-builtin">@typeInfo</span>(FuncEnum).Enum.fields.len;</span>
<span class="line" id="L1041"></span>
<span class="line" id="L1042">		<span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(FuncEnum).Enum.fields) |f| {</span>
<span class="line" id="L1043">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vtext)) <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(FuncEnum, <span class="tok-builtin">@enumFromInt</span>(f.value));</span>
<span class="line" id="L1044">		}</span>
<span class="line" id="L1045">		<span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(FuncEnum, <span class="tok-builtin">@enumFromInt</span>(max));</span>
<span class="line" id="L1046">	}</span>
<span class="line" id="L1047">};</span>
<span class="line" id="L1048"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L1049"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1050"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1051"><span class="tok-comment">// test exist Name for add or change name</span>
</span>
<span class="line" id="L1052"></span>
<span class="line" id="L1053"><span class="tok-kw">fn</span> <span class="tok-fn">TaskName</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1054">	<span class="tok-kw">for</span> (vpnl.field.items) |f| {</span>
<span class="line" id="L1055">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vfld.text)) {</span>
<span class="line" id="L1056">			pnl.msgErr(vpnl, <span class="tok-str">&quot;Already existing invalide Name field&quot;</span>);</span>
<span class="line" id="L1057">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1058">			<span class="tok-kw">return</span>;</span>
<span class="line" id="L1059">		}</span>
<span class="line" id="L1060">	}</span>
<span class="line" id="L1061">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1062">}</span>
<span class="line" id="L1063"></span>
<span class="line" id="L1064"><span class="tok-kw">fn</span> <span class="tok-fn">TaskType</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1065">	<span class="tok-kw">var</span> vReftype = strToEnum(dds.REFTYP, vfld.text);</span>
<span class="line" id="L1066"></span>
<span class="line" id="L1067">	<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1068">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fscal))) {</span>
<span class="line" id="L1069">			vpnl.field.items[idx].text = <span class="tok-str">&quot;&quot;</span>;</span>
<span class="line" id="L1070">			vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1071">		}</span>
<span class="line" id="L1072"></span>
<span class="line" id="L1073">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fedtcar))) {</span>
<span class="line" id="L1074">			vpnl.field.items[idx].text = <span class="tok-str">&quot;&quot;</span>;</span>
<span class="line" id="L1075">			vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1076">		}</span>
<span class="line" id="L1077">	}</span>
<span class="line" id="L1078"></span>
<span class="line" id="L1079"></span>
<span class="line" id="L1080"></span>
<span class="line" id="L1081">	</span>
<span class="line" id="L1082">	<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1083">		</span>
<span class="line" id="L1084">		<span class="tok-kw">if</span> (vReftype == dds.REFTYP.DECIMAL <span class="tok-kw">or</span></span>
<span class="line" id="L1085">			vReftype == dds.REFTYP.UDECIMAL) {</span>
<span class="line" id="L1086">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fscal))) {</span>
<span class="line" id="L1087">				vpnl.field.items[idx].protect = <span class="tok-null">false</span>;</span>
<span class="line" id="L1088">			}</span>
<span class="line" id="L1089">		}</span>
<span class="line" id="L1090">		<span class="tok-kw">if</span> (vReftype == dds.REFTYP.DIGIT <span class="tok-kw">or</span></span>
<span class="line" id="L1091">			vReftype == dds.REFTYP.UDIGIT <span class="tok-kw">or</span></span>
<span class="line" id="L1092">			vReftype == dds.REFTYP.DECIMAL <span class="tok-kw">or</span></span>
<span class="line" id="L1093">			vReftype == dds.REFTYP.UDECIMAL)</span>
<span class="line" id="L1094">		{</span>
<span class="line" id="L1095">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fedtcar))) {</span>
<span class="line" id="L1096">				vpnl.field.items[idx].protect = <span class="tok-null">false</span>;</span>
<span class="line" id="L1097">			}</span>
<span class="line" id="L1098">		}</span>
<span class="line" id="L1099">	}</span>
<span class="line" id="L1100"></span>
<span class="line" id="L1101"></span>
<span class="line" id="L1102">	<span class="tok-kw">if</span> (vReftype == dds.REFTYP.DATE_ISO <span class="tok-kw">or</span></span>
<span class="line" id="L1103">		vReftype == dds.REFTYP.DATE_FR <span class="tok-kw">or</span></span>
<span class="line" id="L1104">		vReftype == dds.REFTYP.DATE_US)</span>
<span class="line" id="L1105">	{</span>
<span class="line" id="L1106">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1107">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fwidth))) {</span>
<span class="line" id="L1108">				vpnl.field.items[idx].text = <span class="tok-str">&quot;10&quot;</span>;</span>
<span class="line" id="L1109">				vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1110">			}</span>
<span class="line" id="L1111">		}</span>
<span class="line" id="L1112">	}</span>
<span class="line" id="L1113"></span>
<span class="line" id="L1114">	<span class="tok-kw">if</span> (vReftype == dds.REFTYP.YES_NO <span class="tok-kw">or</span> vReftype == dds.REFTYP.SWITCH) {</span>
<span class="line" id="L1115">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1116">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fwidth))) {</span>
<span class="line" id="L1117">				vpnl.field.items[idx].text = <span class="tok-str">&quot;1&quot;</span>;</span>
<span class="line" id="L1118">				vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1119">			}</span>
<span class="line" id="L1120">		}</span>
<span class="line" id="L1121">	}</span>
<span class="line" id="L1122">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1123">}</span>
<span class="line" id="L1124"></span>
<span class="line" id="L1125"><span class="tok-kw">fn</span> <span class="tok-fn">TaskWidth</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1126">	<span class="tok-kw">var</span> val = strToUsize(vfld.text);</span>
<span class="line" id="L1127"></span>
<span class="line" id="L1128">	<span class="tok-kw">if</span> (val + vfld.posx &gt;= vpnl.cols) {</span>
<span class="line" id="L1129">		<span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,</span>
<span class="line" id="L1130">			<span class="tok-str">&quot;{d} the length of the zone is excessive&quot;</span>, .{val})</span>
<span class="line" id="L1131">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };			</span>
<span class="line" id="L1132">		pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L1133"></span>
<span class="line" id="L1134">		vpnl.keyField = kbd.task;</span>
<span class="line" id="L1135">	}</span>
<span class="line" id="L1136">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1137">}</span>
<span class="line" id="L1138"></span>
<span class="line" id="L1139"><span class="tok-kw">fn</span> <span class="tok-fn">TaskScal</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1140">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDECIMAL&quot;</span>) <span class="tok-kw">or</span> std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) {</span>
<span class="line" id="L1141">		<span class="tok-kw">var</span> width = strToUsize(fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) ;</span>
<span class="line" id="L1142">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) width += <span class="tok-number">1</span>;</span>
<span class="line" id="L1143"></span>
<span class="line" id="L1144">		<span class="tok-kw">var</span> vscal = strToUsize(vfld.text);</span>
<span class="line" id="L1145"></span>
<span class="line" id="L1146">	</span>
<span class="line" id="L1147">		<span class="tok-kw">if</span> (vscal + width + vfld.posx &gt;= vpnl.cols) {</span>
<span class="line" id="L1148">			<span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,</span>
<span class="line" id="L1149">				<span class="tok-str">&quot;{d} the Scal of the zone is excessive&quot;</span>, .{vscal}) </span>
<span class="line" id="L1150">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L1151">				</span>
<span class="line" id="L1152">			pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L1153">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1154">		}</span>
<span class="line" id="L1155">	} <span class="tok-kw">else</span> vfld.text = <span class="tok-str">&quot;&quot;</span>;</span>
<span class="line" id="L1156">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1157">}</span>
<span class="line" id="L1158"></span>
<span class="line" id="L1159"></span>
<span class="line" id="L1160"><span class="tok-kw">fn</span> <span class="tok-fn">TaskEdtcar</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1161">	<span class="tok-kw">if</span> ( ! std.mem.eql(<span class="tok-type">u8</span>, vfld.text,<span class="tok-str">&quot;&quot;</span>)) {</span>
<span class="line" id="L1162">		</span>
<span class="line" id="L1163">		<span class="tok-kw">var</span> width = strToUsize(fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.fwidth))  <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) ;</span>
<span class="line" id="L1164">		<span class="tok-kw">var</span> vtype = fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.ftype))  <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L1165">	</span>
<span class="line" id="L1166">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vtype, <span class="tok-str">&quot;DIGIT&quot;</span>) <span class="tok-kw">or</span> std.mem.eql(<span class="tok-type">u8</span>, vtype, <span class="tok-str">&quot;DECIMAL&quot;</span>))  width += <span class="tok-number">1</span>;</span>
<span class="line" id="L1167"></span>
<span class="line" id="L1168">		<span class="tok-kw">var</span> scal = strToUsize(fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.fscal))  <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>);</span>
<span class="line" id="L1169"></span>
<span class="line" id="L1170">		<span class="tok-kw">if</span> (width + scal + vfld.posx &gt;= vpnl.cols) {</span>
<span class="line" id="L1171">			<span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,</span>
<span class="line" id="L1172">				<span class="tok-str">&quot;the length of the zone is excessive&quot;</span>, .{})</span>
<span class="line" id="L1173">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };			</span>
<span class="line" id="L1174">			pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L1175"></span>
<span class="line" id="L1176">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1177">		}</span>
<span class="line" id="L1178">	}</span>
<span class="line" id="L1179">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1180">}</span>
<span class="line" id="L1181"></span>
<span class="line" id="L1182"><span class="tok-kw">fn</span> <span class="tok-fn">TaskErrmsg</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1183">	<span class="tok-kw">if</span> (!vfld.zwitch <span class="tok-kw">and</span> std.mem.eql(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, vfld.text)) {</span>
<span class="line" id="L1184">		pnl.msgErr(vpnl, <span class="tok-str">&quot;the error message text is invalid&quot;</span>);</span>
<span class="line" id="L1185">		vpnl.keyField = kbd.task;</span>
<span class="line" id="L1186">	}</span>
<span class="line" id="L1187"></span>
<span class="line" id="L1188">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1189">}</span>
<span class="line" id="L1190"></span>
<span class="line" id="L1191"><span class="tok-kw">fn</span> <span class="tok-fn">TaskFunc</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1192">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;FUNC&quot;</span>)) {</span>
<span class="line" id="L1193">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, vfld.procfunc)) {</span>
<span class="line" id="L1194">			pnl.msgErr(vpnl, <span class="tok-str">&quot;the function name is invalid&quot;</span>);</span>
<span class="line" id="L1195">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1196">		}</span>
<span class="line" id="L1197">	}</span>
<span class="line" id="L1198"></span>
<span class="line" id="L1199">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1200">}</span>
<span class="line" id="L1201"><span class="tok-kw">var</span> callTask: TaskEnum = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1202"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1203"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1204"><span class="tok-comment">/// run emun Function ex: combo</span></span>
<span class="line" id="L1205"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> TaskEnum = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L1206">	TaskName,</span>
<span class="line" id="L1207">	TaskType,</span>
<span class="line" id="L1208">	TaskWidth,</span>
<span class="line" id="L1209">	TaskScal,</span>
<span class="line" id="L1210">	TaskEdtcar,</span>
<span class="line" id="L1211">	TaskErrmsg,</span>
<span class="line" id="L1212">	TaskFunc,</span>
<span class="line" id="L1213">	none,</span>
<span class="line" id="L1214"></span>
<span class="line" id="L1215">	<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">run</span>(self: TaskEnum, vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1216">		<span class="tok-kw">switch</span> (self) {</span>
<span class="line" id="L1217">			.TaskName	=&gt; TaskName(vpnl, vfld),</span>
<span class="line" id="L1218">			.TaskType	=&gt; TaskType(vpnl, vfld),</span>
<span class="line" id="L1219">			.TaskWidth	=&gt; TaskWidth(vpnl, vfld),</span>
<span class="line" id="L1220">			.TaskScal	=&gt; TaskScal(vpnl, vfld),</span>
<span class="line" id="L1221">			.TaskEdtcar	=&gt; TaskEdtcar(vpnl, vfld),</span>
<span class="line" id="L1222">			.TaskErrmsg =&gt; TaskErrmsg(vpnl, vfld),</span>
<span class="line" id="L1223">			.TaskFunc 	=&gt; TaskFunc(vpnl, vfld),</span>
<span class="line" id="L1224"></span>
<span class="line" id="L1225">			<span class="tok-kw">else</span> =&gt; dsperr.errorForms(vpnl, ErrMain.main_run_EnumTask_invalide),</span>
<span class="line" id="L1226">		}</span>
<span class="line" id="L1227">	}</span>
<span class="line" id="L1228">	<span class="tok-kw">fn</span> <span class="tok-fn">searchFn</span>(vtext: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) TaskEnum {</span>
<span class="line" id="L1229">		<span class="tok-kw">var</span> max: <span class="tok-type">usize</span> = <span class="tok-builtin">@typeInfo</span>(TaskEnum).Enum.fields.len;</span>
<span class="line" id="L1230"></span>
<span class="line" id="L1231">		<span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(TaskEnum).Enum.fields) |f| {</span>
<span class="line" id="L1232">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vtext)) <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(TaskEnum, <span class="tok-builtin">@enumFromInt</span>(f.value));</span>
<span class="line" id="L1233">		}</span>
<span class="line" id="L1234">		<span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(TaskEnum, <span class="tok-builtin">@enumFromInt</span>(max));</span>
<span class="line" id="L1235">	}</span>
<span class="line" id="L1236">};</span>
<span class="line" id="L1237"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L1238"></span>
<span class="line" id="L1239"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">writefield</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L1240">	term.getCursor();</span>
<span class="line" id="L1241">	<span class="tok-kw">var</span> v_posx: <span class="tok-type">usize</span> = term.posCurs.x;</span>
<span class="line" id="L1242">	<span class="tok-kw">var</span> v_posy: <span class="tok-type">usize</span> = term.posCurs.y;</span>
<span class="line" id="L1243"></span>
<span class="line" id="L1244">	<span class="tok-kw">if</span> (v_posx &lt; <span class="tok-number">15</span>) v_posx = <span class="tok-number">15</span> <span class="tok-kw">else</span> v_posx = <span class="tok-number">2</span>;</span>
<span class="line" id="L1245"></span>
<span class="line" id="L1246">	<span class="tok-comment">// Init format panel</span>
</span>
<span class="line" id="L1247">	<span class="tok-kw">var</span> pFmt02 = Panel_Fmt02(v_posx);</span>
<span class="line" id="L1248"></span>
<span class="line" id="L1249">	v_posx = term.posCurs.x;</span>
<span class="line" id="L1250">	<span class="tok-comment">// init zone field</span>
</span>
<span class="line" id="L1251">	fld.setText(pFmt02, <span class="tok-builtin">@intFromEnum</span>(fp02.fposx), std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>, .{v_posx})</span>
<span class="line" id="L1252">		<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1253">	fld.setText(pFmt02, <span class="tok-builtin">@intFromEnum</span>(fp02.fposy), std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>, .{v_posy})</span>
<span class="line" id="L1254">		<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1255"></span>
<span class="line" id="L1256">	<span class="tok-comment">// init struct key</span>
</span>
<span class="line" id="L1257">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>; <span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L1258">	<span class="tok-kw">var</span> idx: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1259">	<span class="tok-kw">var</span> vReftyp: dds.REFTYP = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1260">	<span class="tok-kw">var</span> vText: []<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1261">	<span class="tok-kw">var</span> vlen: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1262">	<span class="tok-kw">var</span> vText2: []<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1263">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1264">		<span class="tok-comment">//Tkey = kbd.getKEY();</span>
</span>
<span class="line" id="L1265"></span>
<span class="line" id="L1266">		forms.dspCursor(vpnl, v_posx, v_posy,<span class="tok-str">&quot;Field&quot;</span>);</span>
<span class="line" id="L1267">		Tkey.Key = pnl.ioPanel(pFmt02);</span>
<span class="line" id="L1268">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L1269">			<span class="tok-comment">// call function combo</span>
</span>
<span class="line" id="L1270">			.func =&gt; {</span>
<span class="line" id="L1271">				callFunc = FuncEnum.searchFn(pFmt02.field.items[pFmt02.idxfld].procfunc);</span>
<span class="line" id="L1272">				callFunc.run(pFmt02, &amp;pFmt02.field.items[pFmt02.idxfld]);</span>
<span class="line" id="L1273">			},</span>
<span class="line" id="L1274">			<span class="tok-comment">// call proc control chek value</span>
</span>
<span class="line" id="L1275">			.task =&gt; {</span>
<span class="line" id="L1276">				callTask = TaskEnum.searchFn(pFmt02.field.items[pFmt02.idxfld].proctask);</span>
<span class="line" id="L1277">				callTask.run(pFmt02, &amp;pFmt02.field.items[pFmt02.idxfld]);</span>
<span class="line" id="L1278">			},</span>
<span class="line" id="L1279">			<span class="tok-comment">// write field to panel</span>
</span>
<span class="line" id="L1280">			.F9 =&gt; {</span>
<span class="line" id="L1281">				vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1282">				vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1283">				</span>
<span class="line" id="L1284">				vReftyp = strToEnum(dds.REFTYP, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftype)].text);</span>
<span class="line" id="L1285">				<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'#'</span>);</span>
<span class="line" id="L1286"></span>
<span class="line" id="L1287">				<span class="tok-kw">switch</span> (vReftyp) {</span>
<span class="line" id="L1288">					dds.REFTYP.TEXT_FREE =&gt; {</span>
<span class="line" id="L1289">						vpnl.field.append(fld.newFieldTextFree(</span>
<span class="line" id="L1290">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1291">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1292">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1293">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1294">							 <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1295">							 pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1296">							 pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1297">							 pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1298">						)</span>
<span class="line" id="L1299">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1300"></span>
<span class="line" id="L1301">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1302">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1303">						</span>
<span class="line" id="L1304">						fld.setText(</span>
<span class="line" id="L1305">							vpnl,</span>
<span class="line" id="L1306">							idx,</span>
<span class="line" id="L1307">							vText,</span>
<span class="line" id="L1308">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1309">					},</span>
<span class="line" id="L1310"></span>
<span class="line" id="L1311">					dds.REFTYP.TEXT_FULL =&gt; {</span>
<span class="line" id="L1312">						vpnl.field.append(fld.newFieldTextFull(</span>
<span class="line" id="L1313">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1314">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1315">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1316">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1317">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1318">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1319">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1320">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1321">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1322"></span>
<span class="line" id="L1323">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1324">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1325"></span>
<span class="line" id="L1326">						fld.setText(</span>
<span class="line" id="L1327">							vpnl,</span>
<span class="line" id="L1328">							idx,</span>
<span class="line" id="L1329">							vText,</span>
<span class="line" id="L1330">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1331">					},</span>
<span class="line" id="L1332"></span>
<span class="line" id="L1333">					dds.REFTYP.ALPHA =&gt; {</span>
<span class="line" id="L1334">						vpnl.field.append(fld.newFieldAlpha(</span>
<span class="line" id="L1335">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1336">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1337">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1338">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1339">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1340">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1341">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1342">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1343">							<span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1344">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1345"></span>
<span class="line" id="L1346">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1347">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1348"></span>
<span class="line" id="L1349">						fld.setText(</span>
<span class="line" id="L1350">							vpnl,</span>
<span class="line" id="L1351">							idx,</span>
<span class="line" id="L1352">							vText,</span>
<span class="line" id="L1353">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1354">					},</span>
<span class="line" id="L1355"></span>
<span class="line" id="L1356">					dds.REFTYP.ALPHA_UPPER =&gt; {</span>
<span class="line" id="L1357">						vpnl.field.append(fld.newFieldAlphaUpper(</span>
<span class="line" id="L1358">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1359">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1360">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1361">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1362">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1363">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1364">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1365">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1366">							<span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1367">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1368"></span>
<span class="line" id="L1369">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1370">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1371"></span>
<span class="line" id="L1372">						fld.setText(</span>
<span class="line" id="L1373">							vpnl,</span>
<span class="line" id="L1374">							idx,</span>
<span class="line" id="L1375">							vText,</span>
<span class="line" id="L1376">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1377">					},</span>
<span class="line" id="L1378"></span>
<span class="line" id="L1379">					dds.REFTYP.ALPHA_NUMERIC =&gt; {</span>
<span class="line" id="L1380">						vpnl.field.append(fld.newFieldAlphaNumeric(</span>
<span class="line" id="L1381">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1382">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1383">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1384">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1385">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1386">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1387">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1388">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1389"></span>
<span class="line" id="L1390">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1391">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1392"></span>
<span class="line" id="L1393">						fld.setText(</span>
<span class="line" id="L1394">							vpnl,  </span>
<span class="line" id="L1395">							idx,</span>
<span class="line" id="L1396">							vText,</span>
<span class="line" id="L1397">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1398">					},</span>
<span class="line" id="L1399"></span>
<span class="line" id="L1400">					dds.REFTYP.ALPHA_NUMERIC_UPPER =&gt; {</span>
<span class="line" id="L1401">						vpnl.field.append(fld.newFieldAlphaNumericUpper(</span>
<span class="line" id="L1402">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1403">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1404">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1405">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1406">							<span class="tok-str">&quot;&quot;</span>, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1407">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1408">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1409">							<span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L1410">							<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L1411">						};</span>
<span class="line" id="L1412"></span>
<span class="line" id="L1413">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1414">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1415"></span>
<span class="line" id="L1416">						fld.setText(</span>
<span class="line" id="L1417">							vpnl,  </span>
<span class="line" id="L1418">							idx,</span>
<span class="line" id="L1419">							vText,</span>
<span class="line" id="L1420">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1421">					},</span>
<span class="line" id="L1422"></span>
<span class="line" id="L1423">					dds.REFTYP.PASSWORD =&gt; {</span>
<span class="line" id="L1424">						vpnl.field.append(fld.newFieldPassword(</span>
<span class="line" id="L1425">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1426">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1427">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1428">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1429">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1430">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1431">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1432">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1433">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1434"></span>
<span class="line" id="L1435">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1436">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1437"></span>
<span class="line" id="L1438">						fld.setText(</span>
<span class="line" id="L1439">							vpnl,</span>
<span class="line" id="L1440">							idx,</span>
<span class="line" id="L1441">							vText,</span>
<span class="line" id="L1442">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1443">					},</span>
<span class="line" id="L1444"></span>
<span class="line" id="L1445">					dds.REFTYP.YES_NO =&gt; {</span>
<span class="line" id="L1446">						vpnl.field.append(fld.newFieldYesNo(</span>
<span class="line" id="L1447">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1448">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1449">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1450">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1451">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1452">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1453">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1454">						)) </span>
<span class="line" id="L1455">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1456"></span>
<span class="line" id="L1457">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1458">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1459"></span>
<span class="line" id="L1460">						fld.setText(</span>
<span class="line" id="L1461">							vpnl,</span>
<span class="line" id="L1462">							idx,</span>
<span class="line" id="L1463">							vText,</span>
<span class="line" id="L1464">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1465">					},</span>
<span class="line" id="L1466"></span>
<span class="line" id="L1467">					dds.REFTYP.UDIGIT =&gt; {</span>
<span class="line" id="L1468">						vpnl.field.append(fld.newFieldUDigit(</span>
<span class="line" id="L1469">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1470">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1471">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1472">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1473">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1474">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1475">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1476">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1477">							<span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1478">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1479"></span>
<span class="line" id="L1480">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1481">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1482">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1483"></span>
<span class="line" id="L1484">						<span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1485">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1486">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1487">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text })</span>
<span class="line" id="L1488">								 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1489">						}</span>
<span class="line" id="L1490">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1491">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1492">						</span>
<span class="line" id="L1493">						fld.setText(</span>
<span class="line" id="L1494">							vpnl,</span>
<span class="line" id="L1495">							idx,</span>
<span class="line" id="L1496">							vText,</span>
<span class="line" id="L1497">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1498">					},</span>
<span class="line" id="L1499"></span>
<span class="line" id="L1500">					dds.REFTYP.DIGIT =&gt; {</span>
<span class="line" id="L1501">						vpnl.field.append(fld.newFieldDigit(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1502">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1503">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1504">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1505">							<span class="tok-str">&quot;&quot;</span>, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1506">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1507">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1508">							<span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1509">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1510"></span>
<span class="line" id="L1511">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1512">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1513">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1514"></span>
<span class="line" id="L1515">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s}&quot;</span>, .{vText})</span>
<span class="line" id="L1516">								<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1517">						<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L1518">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1519">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1520">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text }</span>
<span class="line" id="L1521">							) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1522">						}</span>
<span class="line" id="L1523"></span>
<span class="line" id="L1524">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1525">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1526"></span>
<span class="line" id="L1527">						fld.setText(</span>
<span class="line" id="L1528">							vpnl,</span>
<span class="line" id="L1529">							idx,</span>
<span class="line" id="L1530">							vText,</span>
<span class="line" id="L1531">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1532">					},</span>
<span class="line" id="L1533"></span>
<span class="line" id="L1534">					dds.REFTYP.UDECIMAL =&gt; {</span>
<span class="line" id="L1535">						vpnl.field.append(fld.newFieldUDecimal(</span>
<span class="line" id="L1536">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1537">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1538">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1539">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1540">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text),</span>
<span class="line" id="L1541">							<span class="tok-str">&quot;&quot;</span>, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1542">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1543">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1544">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1545"></span>
<span class="line" id="L1546">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1547">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1548">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1549">						</span>
<span class="line" id="L1550">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text);</span>
<span class="line" id="L1551">						vText2 = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1552">						<span class="tok-builtin">@memset</span>(vText2[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1553">						</span>
<span class="line" id="L1554">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s},{s}&quot;</span>, .{ vText, vText2 })</span>
<span class="line" id="L1555">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1556"></span>
<span class="line" id="L1557">						<span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1558"></span>
<span class="line" id="L1559">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1560">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1561">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text })</span>
<span class="line" id="L1562">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1563">						}</span>
<span class="line" id="L1564"></span>
<span class="line" id="L1565">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1566">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1567"></span>
<span class="line" id="L1568">						fld.setText(</span>
<span class="line" id="L1569">							vpnl,</span>
<span class="line" id="L1570">							idx,</span>
<span class="line" id="L1571">							vText,</span>
<span class="line" id="L1572">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1573">					},</span>
<span class="line" id="L1574"></span>
<span class="line" id="L1575">					dds.REFTYP.DECIMAL =&gt; {</span>
<span class="line" id="L1576">						vpnl.field.append(fld.newFieldDecimal(</span>
<span class="line" id="L1577">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1578">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1579">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1580">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1581">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text),</span>
<span class="line" id="L1582">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1583">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1584">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1585">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1586">							<span class="tok-str">&quot;&quot;</span>)) </span>
<span class="line" id="L1587">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1588"></span>
<span class="line" id="L1589">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1590">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1591">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1592">						</span>
<span class="line" id="L1593">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text);</span>
<span class="line" id="L1594">						vText2 = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1595">						<span class="tok-builtin">@memset</span>(vText2[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1596">						</span>
<span class="line" id="L1597">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s},{s}&quot;</span>, .{ vText, vText2 })</span>
<span class="line" id="L1598">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1599"></span>
<span class="line" id="L1600">						<span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1601">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1602">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1603">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text })</span>
<span class="line" id="L1604">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1605">						}</span>
<span class="line" id="L1606"></span>
<span class="line" id="L1607">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1608">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1609"></span>
<span class="line" id="L1610">						fld.setText(</span>
<span class="line" id="L1611">							vpnl,</span>
<span class="line" id="L1612">							idx,</span>
<span class="line" id="L1613">							vText,</span>
<span class="line" id="L1614">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1615">					},</span>
<span class="line" id="L1616"></span>
<span class="line" id="L1617">					dds.REFTYP.DATE_ISO =&gt; {</span>
<span class="line" id="L1618">						vpnl.field.append(fld.newFieldDateISO(</span>
<span class="line" id="L1619">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1620">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1621">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1622">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1623">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1624">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1625">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1626">						))</span>
<span class="line" id="L1627">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1628"></span>
<span class="line" id="L1629">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1630">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1631"></span>
<span class="line" id="L1632">						fld.setText(</span>
<span class="line" id="L1633">							vpnl,</span>
<span class="line" id="L1634">							idx,</span>
<span class="line" id="L1635">							<span class="tok-str">&quot;YYYY/MM/DD&quot;</span>,</span>
<span class="line" id="L1636">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1637">					},</span>
<span class="line" id="L1638">					dds.REFTYP.DATE_FR =&gt; {</span>
<span class="line" id="L1639">						vpnl.field.append(fld.newFieldDateFR(</span>
<span class="line" id="L1640">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1641">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1642">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1643">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1644">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1645">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1646">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1647">						)) </span>
<span class="line" id="L1648">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1649">							</span>
<span class="line" id="L1650">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1651">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1652"></span>
<span class="line" id="L1653">						fld.setText(</span>
<span class="line" id="L1654">							vpnl,</span>
<span class="line" id="L1655">							idx,</span>
<span class="line" id="L1656">							<span class="tok-str">&quot;DD/MM/YYYY&quot;</span>,</span>
<span class="line" id="L1657">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1658">					},</span>
<span class="line" id="L1659"></span>
<span class="line" id="L1660">					dds.REFTYP.DATE_US =&gt; {</span>
<span class="line" id="L1661">						vpnl.field.append(fld.newFieldDateUS(</span>
<span class="line" id="L1662">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1663">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1664">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1665">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1666">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1667">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1668">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1669">						)) </span>
<span class="line" id="L1670">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1671">							</span>
<span class="line" id="L1672">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1673">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1674"></span>
<span class="line" id="L1675">						fld.setText(</span>
<span class="line" id="L1676">							vpnl,</span>
<span class="line" id="L1677">							idx,</span>
<span class="line" id="L1678">							<span class="tok-str">&quot;MM/DD/YYYY&quot;</span>,</span>
<span class="line" id="L1679">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1680">					},</span>
<span class="line" id="L1681"></span>
<span class="line" id="L1682">					dds.REFTYP.TELEPHONE =&gt; {</span>
<span class="line" id="L1683">						vpnl.field.append(fld.newFieldTelephone(</span>
<span class="line" id="L1684">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1685">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1686">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1687">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1688">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1689">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1690">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1691">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1692">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1693"></span>
<span class="line" id="L1694">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1695">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1696">						</span>
<span class="line" id="L1697">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1698">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1699">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'*'</span>);</span>
<span class="line" id="L1700">						</span>
<span class="line" id="L1701">						fld.setText(</span>
<span class="line" id="L1702">							vpnl,</span>
<span class="line" id="L1703">							idx,</span>
<span class="line" id="L1704">							vText,</span>
<span class="line" id="L1705">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1706">					},</span>
<span class="line" id="L1707"></span>
<span class="line" id="L1708">					dds.REFTYP.MAIL_ISO =&gt; {</span>
<span class="line" id="L1709">						vpnl.field.append(fld.newFieldMail(</span>
<span class="line" id="L1710">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1711">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1712">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1713">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1714">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1715">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1716">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1717">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1718">						)) </span>
<span class="line" id="L1719">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1720"></span>
<span class="line" id="L1721">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1722">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1723"></span>
<span class="line" id="L1724">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1725">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1726">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'@'</span>);</span>
<span class="line" id="L1727">						</span>
<span class="line" id="L1728">						fld.setText(</span>
<span class="line" id="L1729">							vpnl,</span>
<span class="line" id="L1730">							idx,</span>
<span class="line" id="L1731">							vText,</span>
<span class="line" id="L1732">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1733">					},</span>
<span class="line" id="L1734"></span>
<span class="line" id="L1735">					dds.REFTYP.SWITCH =&gt; {</span>
<span class="line" id="L1736">						vpnl.field.append(fld.newFieldSwitch(</span>
<span class="line" id="L1737">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1738">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1739">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1740">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1741">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1742">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text))</span>
<span class="line" id="L1743">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1744"></span>
<span class="line" id="L1745">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1746">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1747"></span>
<span class="line" id="L1748">						</span>
<span class="line" id="L1749">						fld.setText(</span>
<span class="line" id="L1750">							vpnl,</span>
<span class="line" id="L1751">							idx,</span>
<span class="line" id="L1752">							dds.CTRUE,</span>
<span class="line" id="L1753">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1754">					},</span>
<span class="line" id="L1755"></span>
<span class="line" id="L1756">					dds.REFTYP.FUNC =&gt; {</span>
<span class="line" id="L1757">						vpnl.field.append(fld.newFieldFunc(</span>
<span class="line" id="L1758">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1759">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1760">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1761">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1762">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1763">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1764">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc)].text,</span>
<span class="line" id="L1765">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1766">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text))</span>
<span class="line" id="L1767">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1768"></span>
<span class="line" id="L1769">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1770">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1771">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'F'</span>);</span>
<span class="line" id="L1772">						fld.setText(</span>
<span class="line" id="L1773">							vpnl,</span>
<span class="line" id="L1774">							idx,</span>
<span class="line" id="L1775">							vText,</span>
<span class="line" id="L1776">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1777">					}</span>
<span class="line" id="L1778">				}</span>
<span class="line" id="L1779">				idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1780">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1781">					</span>
<span class="line" id="L1782">				fld.setEdtcar(vpnl, idx, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text)</span>
<span class="line" id="L1783">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1784">					</span>
<span class="line" id="L1785">				fld.setTask(vpnl, idx, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftask)].text)</span>
<span class="line" id="L1786">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1787">					</span>
<span class="line" id="L1788">				fld.setProtect(vpnl, idx, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fprotect)].zwitch)</span>
<span class="line" id="L1789">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1790">					</span>
<span class="line" id="L1791">				pnl.freePanel(pFmt02);</span>
<span class="line" id="L1792">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt02);</span>
<span class="line" id="L1793">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L1794">			},</span>
<span class="line" id="L1795"></span>
<span class="line" id="L1796">			<span class="tok-comment">// exit panel field</span>
</span>
<span class="line" id="L1797">			.F12 =&gt; {</span>
<span class="line" id="L1798">				pnl.freePanel(pFmt02);</span>
<span class="line" id="L1799">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt02);</span>
<span class="line" id="L1800">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L1801">			},</span>
<span class="line" id="L1802">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L1803">		}</span>
<span class="line" id="L1804">	}</span>
<span class="line" id="L1805">}</span>
<span class="line" id="L1806"></span>
<span class="line" id="L1807"><span class="tok-comment">// Order field</span>
</span>
<span class="line" id="L1808"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">orderField</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L1809">	<span class="tok-kw">var</span> idxligne: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1810">	<span class="tok-kw">const</span> allocatorOrder = std.heap.page_allocator;</span>
<span class="line" id="L1811">	<span class="tok-kw">var</span> newfield = std.ArrayList(fld.FIELD).init(allocatorOrder);</span>
<span class="line" id="L1812">	<span class="tok-kw">var</span> savfield = std.ArrayList(fld.FIELD).init(allocatorOrder);</span>
<span class="line" id="L1813"></span>
<span class="line" id="L1814">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1815">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L1816"></span>
<span class="line" id="L1817">	<span class="tok-kw">for</span> (vpnl.field.items) |p| {</span>
<span class="line" id="L1818">		savfield.append(p) </span>
<span class="line" id="L1819">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1820">	}</span>
<span class="line" id="L1821"></span>
<span class="line" id="L1822">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L1823">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L1824">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1825">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1826">		<span class="tok-number">32</span>,</span>
<span class="line" id="L1827">		grd.gridStyle,</span>
<span class="line" id="L1828">		dds.CADRE.line1,</span>
<span class="line" id="L1829">	);</span>
<span class="line" id="L1830">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L1831"></span>
<span class="line" id="L1832">	<span class="tok-kw">var</span> Order: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L1833">		<span class="tok-str">&quot;Order&quot;</span>,</span>
<span class="line" id="L1834">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1835">		<span class="tok-number">70</span>,</span>
<span class="line" id="L1836">		<span class="tok-number">32</span>,</span>
<span class="line" id="L1837">		grd.gridStyle,</span>
<span class="line" id="L1838">		dds.CADRE.line1,</span>
<span class="line" id="L1839">	);</span>
<span class="line" id="L1840">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Order);</span>
<span class="line" id="L1841"></span>
<span class="line" id="L1842">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1843">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L1844">	grd.newCell(Origine, <span class="tok-str">&quot;reftype&quot;</span>, <span class="tok-number">20</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1845">	grd.newCell(Origine, <span class="tok-str">&quot;X&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1846">	grd.newCell(Origine, <span class="tok-str">&quot;Y&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1847">	grd.newCell(Origine, <span class="tok-str">&quot;width&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1848">	grd.newCell(Origine, <span class="tok-str">&quot;scal&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1849">	grd.setHeaders(Origine);</span>
<span class="line" id="L1850"></span>
<span class="line" id="L1851">	grd.newCell(Order, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1852">	grd.newCell(Order, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L1853">	grd.newCell(Order, <span class="tok-str">&quot;reftype&quot;</span>, <span class="tok-number">20</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1854">	grd.newCell(Order, <span class="tok-str">&quot;X&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgCyan);</span>
<span class="line" id="L1855">	grd.newCell(Order, <span class="tok-str">&quot;Y&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgCyan);</span>
<span class="line" id="L1856">	grd.newCell(Order, <span class="tok-str">&quot;width&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1857">	grd.newCell(Order, <span class="tok-str">&quot;scal&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1858">	grd.setHeaders(Order);</span>
<span class="line" id="L1859"></span>
<span class="line" id="L1860">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1861">		grd.resetRows(Origine);</span>
<span class="line" id="L1862">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1863">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L1864">			</span>
<span class="line" id="L1865">			<span class="tok-kw">var</span> posx = usizeToStr(f.posx) ;</span>
<span class="line" id="L1866">			<span class="tok-kw">var</span> posy = usizeToStr(f.posy) ;</span>
<span class="line" id="L1867">			<span class="tok-kw">var</span> width= usizeToStr(f.width) ;</span>
<span class="line" id="L1868">			<span class="tok-kw">var</span> scal = usizeToStr(f.scal) ;</span>
<span class="line" id="L1869"></span>
<span class="line" id="L1870">			grd.addRows(Origine, &amp;.{ ridx, f.name, <span class="tok-builtin">@tagName</span>(f.reftyp), posx , posy, width,scal });</span>
<span class="line" id="L1871">		}</span>
<span class="line" id="L1872"></span>
<span class="line" id="L1873">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L1874">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L1875">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L1876">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L1877">			newfield.append(vpnl.field.items[ strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>])])</span>
<span class="line" id="L1878">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1879"></span>
<span class="line" id="L1880">			<span class="tok-kw">var</span> ridn =usizeToStr(idxligne);</span>
<span class="line" id="L1881"> </span>
<span class="line" id="L1882">			grd.addRows(Order, &amp;.{ ridn, Gkey.Buf.items[<span class="tok-number">1</span>], Gkey.Buf.items[<span class="tok-number">2</span>],</span>
<span class="line" id="L1883">				Gkey.Buf.items[<span class="tok-number">3</span>], Gkey.Buf.items[<span class="tok-number">4</span>], Gkey.Buf.items[<span class="tok-number">5</span>], Gkey.Buf.items[<span class="tok-number">6</span>] });</span>
<span class="line" id="L1884">			idxligne += <span class="tok-number">1</span>;</span>
<span class="line" id="L1885">			grd.printGridHeader(Order);</span>
<span class="line" id="L1886">			grd.printGridRows(Order);</span>
<span class="line" id="L1887">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L1888"></span>
<span class="line" id="L1889">			_ = vpnl.field.orderedRemove(ligne);</span>
<span class="line" id="L1890">		}</span>
<span class="line" id="L1891">	}</span>
<span class="line" id="L1892"></span>
<span class="line" id="L1893">	vpnl.field.clearAndFree();</span>
<span class="line" id="L1894">	vpnl.field = std.ArrayList(fld.FIELD).init(dds.allocatorPnl);</span>
<span class="line" id="L1895">	vpnl.field.clearRetainingCapacity();</span>
<span class="line" id="L1896">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L1897">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L1898">		<span class="tok-kw">for</span> (savfield.items) |p| {</span>
<span class="line" id="L1899">			vpnl.field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1900">		}</span>
<span class="line" id="L1901">	}</span>
<span class="line" id="L1902">	<span class="tok-comment">// new Order and exit</span>
</span>
<span class="line" id="L1903">	<span class="tok-kw">else</span> {</span>
<span class="line" id="L1904">		<span class="tok-kw">for</span> (newfield.items) |p| {</span>
<span class="line" id="L1905">			vpnl.field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1906">		}</span>
<span class="line" id="L1907">	}</span>
<span class="line" id="L1908"></span>
<span class="line" id="L1909">	grd.freeGrid(Origine);</span>
<span class="line" id="L1910">	grd.freeGrid(Order);</span>
<span class="line" id="L1911"></span>
<span class="line" id="L1912">	newfield.clearAndFree();</span>
<span class="line" id="L1913">	newfield.deinit();</span>
<span class="line" id="L1914"></span>
<span class="line" id="L1915">	savfield.clearAndFree();</span>
<span class="line" id="L1916">	savfield.deinit();</span>
<span class="line" id="L1917"></span>
<span class="line" id="L1918">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1919">}</span>
<span class="line" id="L1920"><span class="tok-comment">// remove Field</span>
</span>
<span class="line" id="L1921"><span class="tok-kw">fn</span> <span class="tok-fn">removeField</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L1922">	<span class="tok-kw">const</span> allocatorRemove = std.heap.page_allocator;</span>
<span class="line" id="L1923">	<span class="tok-kw">var</span> savfield: std.ArrayList(fld.FIELD) = std.ArrayList(fld.FIELD).init(allocatorRemove);</span>
<span class="line" id="L1924"></span>
<span class="line" id="L1925">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1926">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L1927"></span>
<span class="line" id="L1928">	<span class="tok-kw">for</span> (vpnl.field.items) |p| {</span>
<span class="line" id="L1929">		savfield.append(p)  </span>
<span class="line" id="L1930">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1931">	}</span>
<span class="line" id="L1932"></span>
<span class="line" id="L1933">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L1934">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L1935">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1936">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1937">		<span class="tok-number">32</span>,</span>
<span class="line" id="L1938">		grd.gridStyle,</span>
<span class="line" id="L1939">		dds.CADRE.line1,</span>
<span class="line" id="L1940">	);</span>
<span class="line" id="L1941">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L1942"></span>
<span class="line" id="L1943">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1944">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L1945">	grd.newCell(Origine, <span class="tok-str">&quot;reftype&quot;</span>, <span class="tok-number">20</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1946">	grd.newCell(Origine, <span class="tok-str">&quot;X&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1947">	grd.newCell(Origine, <span class="tok-str">&quot;Y&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1948">	grd.newCell(Origine, <span class="tok-str">&quot;width&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1949">	grd.newCell(Origine, <span class="tok-str">&quot;scal&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1950">	grd.setHeaders(Origine);</span>
<span class="line" id="L1951"></span>
<span class="line" id="L1952">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1953">		grd.resetRows(Origine);</span>
<span class="line" id="L1954">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1955">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L1956">			</span>
<span class="line" id="L1957">			<span class="tok-kw">var</span> posx = usizeToStr(f.posx) ;</span>
<span class="line" id="L1958">			<span class="tok-kw">var</span> posy = usizeToStr(f.posy) ;</span>
<span class="line" id="L1959">			<span class="tok-kw">var</span> width= usizeToStr(f.width) ;</span>
<span class="line" id="L1960">			<span class="tok-kw">var</span> scal = usizeToStr(f.scal) ;</span>
<span class="line" id="L1961">			grd.addRows(Origine, &amp;.{ ridx, f.name, <span class="tok-builtin">@tagName</span>(f.reftyp), posx , posy, width, scal });</span>
<span class="line" id="L1962">		}</span>
<span class="line" id="L1963"></span>
<span class="line" id="L1964">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L1965">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L1966">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L1967">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L1968">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L1969"></span>
<span class="line" id="L1970">			_ = vpnl.field.orderedRemove(ligne);</span>
<span class="line" id="L1971">		}</span>
<span class="line" id="L1972">	}</span>
<span class="line" id="L1973"></span>
<span class="line" id="L1974">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L1975">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L1976">		vpnl.field.clearAndFree();</span>
<span class="line" id="L1977">		vpnl.field = std.ArrayList(fld.FIELD).init(dds.allocatorPnl);</span>
<span class="line" id="L1978">		vpnl.field.clearRetainingCapacity();</span>
<span class="line" id="L1979"></span>
<span class="line" id="L1980">		<span class="tok-kw">for</span> (savfield.items) |p| {</span>
<span class="line" id="L1981">			vpnl.field.append(p) </span>
<span class="line" id="L1982">			 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1983">		}</span>
<span class="line" id="L1984">	}</span>
<span class="line" id="L1985"></span>
<span class="line" id="L1986">	grd.freeGrid(Origine);</span>
<span class="line" id="L1987"></span>
<span class="line" id="L1988">	savfield.clearAndFree();</span>
<span class="line" id="L1989">	savfield.deinit();</span>
<span class="line" id="L1990">}</span>
<span class="line" id="L1991"> </span>
<span class="line" id="L1992"></span>
</code></pre></body>
</html>