<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>mdlForms.zig - source view</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPNJREFUeNpi/P//PwMlgOXHUjly9E0G4hwgZmQiQZMqEK8H4v9QzUEgQSaoADK+zhH9iAGL+C0gDoAaNg9mGLoLfgA1awK9hS9gzgJxA9RQBmQDrgMxJzRMGKE4HYj/Ial5A8QmQLwCJoBsgBYW2+TR1ChDaWt4LOBxKsi/VUh8XiD+gq4IVyzwQAMJBoKwacZlAB8Qf0bi96IZhtOAe1D6LpqaEiz6rmEzQAeIzwGxCJpieFqApo/vQKyJboAaEBsAsSEupwI1MwKjGBTVHOhegMX5UajYRqiBjMgYmj400cVh0XgTiKdC0zhJgJHS7AwQYABm9EAdCKrEfAAAAABJRU5ErkJggg=="/>
    <style>
      body{
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        margin: 0;
        line-height: 1.5;
      }

      pre > code {
        display: block;
        overflow: auto;
        line-height: normal;
        margin: 0em;
      }
      .tok-kw {
          color: #333;
          font-weight: bold;
      }
      .tok-str {
          color: #d14;
      }
      .tok-builtin {
          color: #005C7A;
      }
      .tok-comment {
          color: #545454;
          font-style: italic;
      }
      .tok-fn {
          color: #900;
          font-weight: bold;
      }
      .tok-null {
          color: #005C5C;
      }
      .tok-number {
          color: #005C5C;
      }
      .tok-type {
          color: #458;
          font-weight: bold;
      }
      pre {
        counter-reset: line;
      }
      pre .line:before {
        counter-increment: line;
        content: counter(line);
        display: inline-block;
        padding-right: 1em;
        width: 2em;
        text-align: right;
        color: #999;
      }
      
      .line {
        width: 100%;
        display: inline-block;
      }
      .line:target {
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
        background: #fafafa;
      }

      @media (prefers-color-scheme: dark) {
        body{
            background:#222;
            color: #ccc;
        }
        pre > code {
            color: #ccc;
            background: #222;
            border: unset;
        }
        .line:target {
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            background: #333;
        }
        .tok-kw {
            color: #eee;
        }
        .tok-str {
            color: #2e5;
        }
        .tok-builtin {
            color: #ff894c;
        }
        .tok-comment {
            color: #aa7;
        }
        .tok-fn {
            color: #B1A0F8;
        }
        .tok-null {
            color: #ff8080;
        }
        .tok-number {
            color: #ff8080;
        }
        .tok-type {
            color: #68f;
        }
      }
    </style>
</head>
<body>
<pre><code><span class="line" id="L1"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line" id="L2"><span class="tok-kw">const</span> dds = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;dds&quot;</span>);</span>
<span class="line" id="L3"></span>
<span class="line" id="L4"><span class="tok-comment">/// terminal Fonction</span></span>
<span class="line" id="L5"><span class="tok-kw">const</span> term = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;cursed&quot;</span>);</span>
<span class="line" id="L6"><span class="tok-comment">// keyboard</span>
</span>
<span class="line" id="L7"><span class="tok-kw">const</span> kbd = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;cursed&quot;</span>).kbd;</span>
<span class="line" id="L8"></span>
<span class="line" id="L9"><span class="tok-comment">// error</span>
</span>
<span class="line" id="L10"><span class="tok-kw">const</span> msgerr = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).ErrForms;</span>
<span class="line" id="L11"><span class="tok-kw">const</span> dsperr = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).dsperr;</span>
<span class="line" id="L12"></span>
<span class="line" id="L13"><span class="tok-comment">// full delete for produc</span>
</span>
<span class="line" id="L14"><span class="tok-kw">const</span> forms = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>);</span>
<span class="line" id="L15"></span>
<span class="line" id="L16"><span class="tok-comment">// frame</span>
</span>
<span class="line" id="L17"><span class="tok-kw">const</span> frm = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).frm;</span>
<span class="line" id="L18"><span class="tok-comment">// panel</span>
</span>
<span class="line" id="L19"><span class="tok-kw">const</span> pnl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).pnl;</span>
<span class="line" id="L20"><span class="tok-comment">// button</span>
</span>
<span class="line" id="L21"><span class="tok-kw">const</span> btn = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).btn;</span>
<span class="line" id="L22"><span class="tok-comment">// label</span>
</span>
<span class="line" id="L23"><span class="tok-kw">const</span> lbl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lbl;</span>
<span class="line" id="L24"><span class="tok-comment">// flied</span>
</span>
<span class="line" id="L25"><span class="tok-kw">const</span> fld = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).fld;</span>
<span class="line" id="L26"><span class="tok-comment">// line horizontal</span>
</span>
<span class="line" id="L27"><span class="tok-kw">const</span> lnh = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lnh;</span>
<span class="line" id="L28"><span class="tok-comment">// line vertival</span>
</span>
<span class="line" id="L29"><span class="tok-kw">const</span> lnv = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lnv;</span>
<span class="line" id="L30"></span>
<span class="line" id="L31"><span class="tok-comment">// grid</span>
</span>
<span class="line" id="L32"><span class="tok-kw">const</span> grd = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;grid&quot;</span>).grd;</span>
<span class="line" id="L33"><span class="tok-comment">// menu</span>
</span>
<span class="line" id="L34"><span class="tok-kw">const</span> mnu = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;menu&quot;</span>).mnu;</span>
<span class="line" id="L35"></span>
<span class="line" id="L36"><span class="tok-comment">// tools utility</span>
</span>
<span class="line" id="L37"><span class="tok-kw">const</span> utl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;utils&quot;</span>);</span>
<span class="line" id="L38"></span>
<span class="line" id="L39"><span class="tok-comment">// tools regex</span>
</span>
<span class="line" id="L40"><span class="tok-kw">const</span> reg = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;match&quot;</span>);</span>
<span class="line" id="L41"></span>
<span class="line" id="L42"><span class="tok-kw">var</span> numPanel: <span class="tok-type">usize</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L43"></span>
<span class="line" id="L44"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ErrMain = <span class="tok-kw">error</span>{</span>
<span class="line" id="L45">	main_append_XPANEL_invalide,</span>
<span class="line" id="L46">	main_run_EnumFunc_invalide,</span>
<span class="line" id="L47">	main_run_EnumTask_invalide,</span>
<span class="line" id="L48">	main_loadPanel_allocPrint_invalide,</span>
<span class="line" id="L49">	main_updatePanel_allocPrint_invalide,</span>
<span class="line" id="L50">	main_XPANEL_invalide,</span>
<span class="line" id="L51">};</span>
<span class="line" id="L52"></span>
<span class="line" id="L53"><span class="tok-kw">fn</span> <span class="tok-fn">strToUsize</span>(v: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">usize</span> {</span>
<span class="line" id="L54">	<span class="tok-kw">if</span> (v.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-number">0</span>;</span>
<span class="line" id="L55">	<span class="tok-kw">return</span> std.fmt.parseUnsigned(<span class="tok-type">u64</span>, v, <span class="tok-number">10</span>) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L56">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L57">	};</span>
<span class="line" id="L58">}</span>
<span class="line" id="L59"></span>
<span class="line" id="L60"><span class="tok-kw">fn</span> <span class="tok-fn">usizeToStr</span>(v: <span class="tok-type">usize</span>) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line" id="L61">	<span class="tok-kw">return</span> std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>, .{v}) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L62">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L63">	};</span>
<span class="line" id="L64">}</span>
<span class="line" id="L65"></span>
<span class="line" id="L66"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L67"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L68"><span class="tok-comment">// choix work panel</span>
</span>
<span class="line" id="L69"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">qryPanel</span>(vpnl: *std.ArrayList(pnl.PANEL)) <span class="tok-type">usize</span> {</span>
<span class="line" id="L70">	<span class="tok-kw">var</span> cellPos: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L71"></span>
<span class="line" id="L72">	<span class="tok-kw">var</span> Xcombo: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L73">		<span class="tok-str">&quot;qryPanel&quot;</span>,</span>
<span class="line" id="L74">		<span class="tok-number">1</span>,</span>
<span class="line" id="L75">		<span class="tok-number">1</span>,</span>
<span class="line" id="L76">		<span class="tok-number">20</span>,</span>
<span class="line" id="L77">		grd.gridStyle,</span>
<span class="line" id="L78">		dds.CADRE.line1,</span>
<span class="line" id="L79">	);</span>
<span class="line" id="L80">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Xcombo);</span>
<span class="line" id="L81"></span>
<span class="line" id="L82">	grd.newCell(Xcombo, <span class="tok-str">&quot;ID&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L83">	grd.newCell(Xcombo, <span class="tok-str">&quot;Name&quot;</span>, <span class="tok-number">10</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L84">	grd.newCell(Xcombo, <span class="tok-str">&quot;Title&quot;</span>, <span class="tok-number">15</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L85">	grd.setHeaders(Xcombo);</span>
<span class="line" id="L86"></span>
<span class="line" id="L87">	<span class="tok-kw">for</span> (vpnl.items, <span class="tok-number">0</span>..) |p, idx| {</span>
<span class="line" id="L88">		grd.addRows(Xcombo, &amp;.{ usizeToStr(idx), p.name, p.frame.title });</span>
<span class="line" id="L89">	}</span>
<span class="line" id="L90"></span>
<span class="line" id="L91">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L92">	<span class="tok-kw">defer</span> Gkey.Buf.deinit();</span>
<span class="line" id="L93"></span>
<span class="line" id="L94">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L95">		Gkey = grd.ioCombo(Xcombo, cellPos);</span>
<span class="line" id="L96"></span>
<span class="line" id="L97">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L98">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L99"></span>
<span class="line" id="L100">			<span class="tok-kw">return</span> strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L101">		}</span>
<span class="line" id="L102"></span>
<span class="line" id="L103">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L104">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L105"></span>
<span class="line" id="L106">			<span class="tok-kw">return</span> <span class="tok-number">999</span>;</span>
<span class="line" id="L107">		}</span>
<span class="line" id="L108">	}</span>
<span class="line" id="L109">}</span>
<span class="line" id="L110"></span>
<span class="line" id="L111"></span>
<span class="line" id="L112"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">Panel_HELP</span>() *pnl.PANEL {</span>
<span class="line" id="L113">	<span class="tok-kw">var</span> Panel : *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;HELP&quot;</span>,</span>
<span class="line" id="L114">										<span class="tok-number">1</span>, <span class="tok-number">1</span>,</span>
<span class="line" id="L115">										<span class="tok-number">5</span>,</span>
<span class="line" id="L116">										<span class="tok-number">100</span> ,</span>
<span class="line" id="L117">										dds.CADRE.line1,</span>
<span class="line" id="L118">										<span class="tok-str">&quot;&quot;</span></span>
<span class="line" id="L119">										);</span>
<span class="line" id="L120"></span>
<span class="line" id="L121">	Panel.button.append(btn.newButton(</span>
<span class="line" id="L122">									kbd.F12,		<span class="tok-comment">// function</span>
</span>
<span class="line" id="L123">									<span class="tok-null">true</span>,			<span class="tok-comment">// show</span>
</span>
<span class="line" id="L124">									<span class="tok-null">false</span>,			<span class="tok-comment">// check field</span>
</span>
<span class="line" id="L125">									<span class="tok-str">&quot;Abord&quot;</span>,		<span class="tok-comment">// title </span>
</span>
<span class="line" id="L126">									)</span>
<span class="line" id="L127">								) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L128">	</span>
<span class="line" id="L129"></span>
<span class="line" id="L130">	Panel.field.append(fld.newFieldTextFull(<span class="tok-str">&quot;HELP1&quot;</span>,<span class="tok-number">2</span>,<span class="tok-number">5</span>,<span class="tok-number">90</span>,<span class="tok-str">&quot;&quot;</span>,<span class="tok-null">false</span>,</span>
<span class="line" id="L131">								<span class="tok-str">&quot;&quot;</span>,<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L132">								<span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L133">	fld.setProtect(Panel,<span class="tok-number">0</span>,<span class="tok-null">true</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L134"></span>
<span class="line" id="L135">	Panel.field.append(fld.newFieldTextFull(<span class="tok-str">&quot;HELP2&quot;</span>,<span class="tok-number">3</span>,<span class="tok-number">5</span>,<span class="tok-number">90</span>,<span class="tok-str">&quot;&quot;</span>,<span class="tok-null">false</span>,</span>
<span class="line" id="L136">								<span class="tok-str">&quot;&quot;</span>,<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L137">								<span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L138">	fld.setProtect(Panel,<span class="tok-number">0</span>,<span class="tok-null">true</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L139">	<span class="tok-kw">return</span> Panel;</span>
<span class="line" id="L140">	}</span>
<span class="line" id="L141"></span>
<span class="line" id="L142"><span class="tok-comment">// end desription Function</span>
</span>
<span class="line" id="L143"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L144"></span>
<span class="line" id="L145"><span class="tok-kw">var</span> maxY: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L146"><span class="tok-kw">var</span> maxX: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L147"><span class="tok-kw">var</span> minY: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L148"><span class="tok-kw">var</span> minX: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L149"><span class="tok-kw">var</span> X: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L150"><span class="tok-kw">var</span> Y: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L151"></span>
<span class="line" id="L152"></span>
<span class="line" id="L153"><span class="tok-comment">//pub fn main() !void {</span>
</span>
<span class="line" id="L154"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fnPanel</span>(XPANEL: *std.ArrayList(pnl.PANEL)) <span class="tok-type">void</span> {</span>
<span class="line" id="L155">	term.cls();</span>
<span class="line" id="L156"></span>
<span class="line" id="L157">	numPanel = qryPanel(XPANEL);</span>
<span class="line" id="L158"></span>
<span class="line" id="L159">	<span class="tok-kw">if</span> (numPanel == <span class="tok-number">999</span>) <span class="tok-kw">return</span>;</span>
<span class="line" id="L160"></span>
<span class="line" id="L161">	term.cls();</span>
<span class="line" id="L162">	<span class="tok-kw">var</span> pFmt01: *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;FRAM01&quot;</span>,</span>
<span class="line" id="L163">		XPANEL.items[numPanel].posx, XPANEL.items[numPanel].posy,</span>
<span class="line" id="L164">		XPANEL.items[numPanel].lines, XPANEL.items[numPanel].cols,</span>
<span class="line" id="L165">		XPANEL.items[numPanel].frame.cadre,</span>
<span class="line" id="L166">		XPANEL.items[numPanel].frame.title);</span>
<span class="line" id="L167"></span>
<span class="line" id="L168">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].button.items) |p| {</span>
<span class="line" id="L169">		pFmt01.button.append(p)</span>
<span class="line" id="L170">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L171">	}</span>
<span class="line" id="L172">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].label.items) |p| {</span>
<span class="line" id="L173">		pFmt01.label.append(p)</span>
<span class="line" id="L174">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L175">	}</span>
<span class="line" id="L176">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].field.items, <span class="tok-number">0</span>..) |p, idx| {</span>
<span class="line" id="L177">		pFmt01.field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L178">		<span class="tok-kw">var</span> vText: [] <span class="tok-type">u8</span> = <span class="tok-null">undefined</span> ;</span>
<span class="line" id="L179">		</span>
<span class="line" id="L180"> </span>
<span class="line" id="L181">			<span class="tok-kw">switch</span>(p.reftyp) {</span>
<span class="line" id="L182">				dds.REFTYP.TEXT_FREE, dds.REFTYP.TEXT_FULL ,	dds.REFTYP.ALPHA ,</span>
<span class="line" id="L183">				dds.REFTYP.ALPHA_UPPER,	dds.REFTYP.ALPHA_NUMERIC, dds.REFTYP.ALPHA_NUMERIC_UPPER,</span>
<span class="line" id="L184">				dds.REFTYP.PASSWORD, dds.REFTYP.YES_NO  =&gt;{</span>
<span class="line" id="L185">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L186">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'#'</span>);</span>
<span class="line" id="L187">				} ,</span>
<span class="line" id="L188"></span>
<span class="line" id="L189">				dds.REFTYP.UDIGIT =&gt;{</span>
<span class="line" id="L190">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L191">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L192">					<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L193">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L194">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L195">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L196">					}</span>
<span class="line" id="L197">				} ,</span>
<span class="line" id="L198">			</span>
<span class="line" id="L199">				dds.REFTYP.DIGIT =&gt;{</span>
<span class="line" id="L200">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width + <span class="tok-number">1</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L201">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L202">					vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s}&quot;</span>, .{vText[<span class="tok-number">0</span>..p.width]})</span>
<span class="line" id="L203">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L204">					<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L205">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L206">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L207">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L208">					}</span>
<span class="line" id="L209">				} ,</span>
<span class="line" id="L210">			</span>
<span class="line" id="L211">				dds.REFTYP.UDECIMAL =&gt;{</span>
<span class="line" id="L212">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width + <span class="tok-number">1</span> + p.scal) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L213">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..(p.width + p.scal)] , <span class="tok-str">'0'</span>);</span>
<span class="line" id="L214">					vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}.{s}&quot;</span>, .{vText[<span class="tok-number">0</span>..p.width],vText[<span class="tok-number">0</span>..p.scal]})</span>
<span class="line" id="L215">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L216">					<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L217">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L218">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L219">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L220">					}</span>
<span class="line" id="L221">				} ,</span>
<span class="line" id="L222">			</span>
<span class="line" id="L223">				dds.REFTYP.DECIMAL =&gt;{</span>
<span class="line" id="L224">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width + <span class="tok-number">2</span> + p.scal) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L225">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..(p.width + p.scal)], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L226">					vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s}.{s}&quot;</span>, .{vText[<span class="tok-number">0</span>..p.width],vText[<span class="tok-number">0</span>..p.scal]})</span>
<span class="line" id="L227">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L228">				<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L229">					<span class="tok-kw">if</span> (p.edtcar.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L230">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{vText, p.edtcar }</span>
<span class="line" id="L231">						) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L232">					}</span>
<span class="line" id="L233">				} ,</span>
<span class="line" id="L234">			</span>
<span class="line" id="L235">				dds.REFTYP.DATE_ISO =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;YYYY-MM-DD&quot;</span>, .{})</span>
<span class="line" id="L236">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L237">				dds.REFTYP.DATE_FR  =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;DD/MM/YYYY&quot;</span>, .{})</span>
<span class="line" id="L238">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L239"></span>
<span class="line" id="L240">				dds.REFTYP.DATE_US  =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;MM/DD/YYYY&quot;</span>, .{})</span>
<span class="line" id="L241">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L242"></span>
<span class="line" id="L243">				dds.REFTYP.TELEPHONE =&gt;{</span>
<span class="line" id="L244">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L245">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'*'</span>);</span>
<span class="line" id="L246">				} ,</span>
<span class="line" id="L247"></span>
<span class="line" id="L248">				dds.REFTYP.MAIL_ISO  =&gt;{</span>
<span class="line" id="L249">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L250">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'@'</span>);</span>
<span class="line" id="L251">				} ,</span>
<span class="line" id="L252">				dds.REFTYP.SWITCH   =&gt;	vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}&quot;</span>, .{dds.CTRUE})</span>
<span class="line" id="L253">												<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>,</span>
<span class="line" id="L254"></span>
<span class="line" id="L255">				dds.REFTYP.FUNC  =&gt;{</span>
<span class="line" id="L256">					vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, p.width) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L257">					<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..p.width], <span class="tok-str">'F'</span>);</span>
<span class="line" id="L258">				} ,</span>
<span class="line" id="L259"></span>
<span class="line" id="L260">			}</span>
<span class="line" id="L261">			fld.setText(pFmt01,	idx, vText) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L262"></span>
<span class="line" id="L263">	}</span>
<span class="line" id="L264"></span>
<span class="line" id="L265">	</span>
<span class="line" id="L266">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].linev.items) |p| {</span>
<span class="line" id="L267">		pFmt01.linev.append(p)</span>
<span class="line" id="L268">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L269">	}</span>
<span class="line" id="L270">	<span class="tok-kw">for</span> (XPANEL.items[numPanel].lineh.items) |p| {</span>
<span class="line" id="L271">		pFmt01.lineh.append(p)</span>
<span class="line" id="L272">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L273">	}</span>
<span class="line" id="L274"></span>
<span class="line" id="L275"></span>
<span class="line" id="L276">	<span class="tok-kw">var</span> mChoix = mnu.newMenu(<span class="tok-str">&quot;Choix&quot;</span>, <span class="tok-comment">// name</span>
</span>
<span class="line" id="L277">			<span class="tok-number">1</span>, <span class="tok-number">1</span>, <span class="tok-comment">// posx, posy</span>
</span>
<span class="line" id="L278">			dds.CADRE.line1, <span class="tok-comment">// type line fram</span>
</span>
<span class="line" id="L279">			dds.MNUVH.vertical, <span class="tok-comment">// type menu vertical / horizontal</span>
</span>
<span class="line" id="L280">			&amp;.{ <span class="tok-comment">// item</span>
</span>
<span class="line" id="L281">			<span class="tok-str">&quot;Label-Order&quot;</span>,</span>
<span class="line" id="L282">			<span class="tok-str">&quot;Label-Remove&quot;</span>,</span>
<span class="line" id="L283">			<span class="tok-str">&quot;field-Order&quot;</span>,</span>
<span class="line" id="L284">			<span class="tok-str">&quot;field-Remove&quot;</span>,</span>
<span class="line" id="L285">			<span class="tok-str">&quot;Horizontal-Order&quot;</span>,</span>
<span class="line" id="L286">			<span class="tok-str">&quot;Horizontal-Remove&quot;</span>,</span>
<span class="line" id="L287">			<span class="tok-str">&quot;Vertical-Order&quot;</span>,</span>
<span class="line" id="L288">			<span class="tok-str">&quot;Vertical-Remove&quot;</span></span>
<span class="line" id="L289">			}</span>
<span class="line" id="L290">		);</span>
<span class="line" id="L291"> </span>
<span class="line" id="L292"> </span>
<span class="line" id="L293">	pnl.printPanel(pFmt01);</span>
<span class="line" id="L294"></span>
<span class="line" id="L295">	maxY = pFmt01.cols + pFmt01.posy;</span>
<span class="line" id="L296">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) maxY -= <span class="tok-number">0</span>;</span>
<span class="line" id="L297">	</span>
<span class="line" id="L298">	minY = pFmt01.posy;</span>
<span class="line" id="L299">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) minY += <span class="tok-number">1</span>;</span>
<span class="line" id="L300"></span>
<span class="line" id="L301">	maxX = pFmt01.lines + pFmt01.posx;</span>
<span class="line" id="L302">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) maxX -= <span class="tok-number">2</span>;</span>
<span class="line" id="L303">	</span>
<span class="line" id="L304">	minX = pFmt01.posx;</span>
<span class="line" id="L305">	<span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) minX += <span class="tok-number">1</span>;</span>
<span class="line" id="L306"></span>
<span class="line" id="L307">	term.onMouse();</span>
<span class="line" id="L308">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>; <span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L309">	<span class="tok-kw">var</span> pFmtH01 = Panel_HELP();</span>
<span class="line" id="L310">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L311">		term.cursShow();</span>
<span class="line" id="L312">		Tkey = kbd.getKEY();</span>
<span class="line" id="L313"></span>
<span class="line" id="L314">		<span class="tok-kw">if</span> (Tkey.Key == kbd.mouse) {</span>
<span class="line" id="L315">			forms.dspMouse(pFmt01);</span>
<span class="line" id="L316">			<span class="tok-kw">continue</span>;</span>
<span class="line" id="L317">		} <span class="tok-comment">// active display Cursor x/y mouse</span>
</span>
<span class="line" id="L318"></span>
<span class="line" id="L319">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L320">			.F1	 =&gt; {</span>
<span class="line" id="L321">				fld.setText(pFmtH01,<span class="tok-number">0</span>,<span class="tok-str">&quot;F11 ENRG  F12 Abort  Alt-T Title Alt-L label Alt-F Field&quot;</span>)</span>
<span class="line" id="L322">					<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L323">				fld.setText(pFmtH01,<span class="tok-number">1</span>,<span class="tok-str">&quot;Line AltH/V Horizontal Vertical AltW Outils&quot;</span>)</span>
<span class="line" id="L324">					<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L325"></span>
<span class="line" id="L326">				_= pnl.ioPanel(pFmtH01);</span>
<span class="line" id="L327">				pnl.rstPanel(pFmtH01,pFmt01);</span>
<span class="line" id="L328">				term.gotoXY(<span class="tok-number">1</span>,<span class="tok-number">1</span>);</span>
<span class="line" id="L329">				<span class="tok-kw">continue</span>;</span>
<span class="line" id="L330">			},</span>
<span class="line" id="L331">			.F11 =&gt; {</span>
<span class="line" id="L332">				XPANEL.items[numPanel].label.clearAndFree();</span>
<span class="line" id="L333">				XPANEL.items[numPanel].label = std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L334">				XPANEL.items[numPanel].label.clearRetainingCapacity();</span>
<span class="line" id="L335">				<span class="tok-kw">for</span> (pFmt01.label.items) |p| {</span>
<span class="line" id="L336">					XPANEL.items[numPanel].label.append(p)</span>
<span class="line" id="L337">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L338">				}</span>
<span class="line" id="L339"></span>
<span class="line" id="L340">				XPANEL.items[numPanel].field.clearAndFree();</span>
<span class="line" id="L341">				XPANEL.items[numPanel].field = std.ArrayList(fld.FIELD).init(dds.allocatorPnl);</span>
<span class="line" id="L342">				XPANEL.items[numPanel].field.clearRetainingCapacity();</span>
<span class="line" id="L343">				<span class="tok-kw">for</span> (pFmt01.field.items) |p| {</span>
<span class="line" id="L344">					XPANEL.items[numPanel].field.append(p) </span>
<span class="line" id="L345">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L346">				}</span>
<span class="line" id="L347"></span>
<span class="line" id="L348">				XPANEL.items[numPanel].lineh.clearAndFree();</span>
<span class="line" id="L349">				XPANEL.items[numPanel].lineh = std.ArrayList(lnh.LINE).init(dds.allocatorPnl);</span>
<span class="line" id="L350">				XPANEL.items[numPanel].lineh.clearRetainingCapacity();</span>
<span class="line" id="L351">				<span class="tok-kw">for</span> (pFmt01.lineh.items) |p| {</span>
<span class="line" id="L352">					XPANEL.items[numPanel].lineh.append(p) </span>
<span class="line" id="L353">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L354">				}</span>
<span class="line" id="L355"></span>
<span class="line" id="L356">				XPANEL.items[numPanel].linev.clearAndFree();</span>
<span class="line" id="L357">				XPANEL.items[numPanel].linev = std.ArrayList(lnv.LINE).init(dds.allocatorPnl);</span>
<span class="line" id="L358">				XPANEL.items[numPanel].linev.clearRetainingCapacity();</span>
<span class="line" id="L359">				<span class="tok-kw">for</span> (pFmt01.linev.items) |p| {</span>
<span class="line" id="L360">					XPANEL.items[numPanel].linev.append(p) </span>
<span class="line" id="L361">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L362">				}</span>
<span class="line" id="L363">				pnl.freePanel(pFmt01);</span>
<span class="line" id="L364">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt01);</span>
<span class="line" id="L365">				dds.deinitUtils();</span>
<span class="line" id="L366">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L367">			},</span>
<span class="line" id="L368">			.F12 =&gt; {</span>
<span class="line" id="L369">				pnl.freePanel(pFmt01);</span>
<span class="line" id="L370">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt01);</span>
<span class="line" id="L371">				dds.deinitUtils();</span>
<span class="line" id="L372">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L373">			},</span>
<span class="line" id="L374"></span>
<span class="line" id="L375">			<span class="tok-comment">// Def Title</span>
</span>
<span class="line" id="L376">			.altT =&gt; {</span>
<span class="line" id="L377">				term.getCursor();</span>
<span class="line" id="L378">				</span>
<span class="line" id="L379">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L380">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L381">				</span>
<span class="line" id="L382">				term.offMouse();</span>
<span class="line" id="L383">				writeLabel(pFmt01, <span class="tok-null">true</span>);</span>
<span class="line" id="L384">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L385">				term.onMouse();</span>
<span class="line" id="L386">			},</span>
<span class="line" id="L387"></span>
<span class="line" id="L388">			<span class="tok-comment">// def label</span>
</span>
<span class="line" id="L389">			.altL =&gt; {</span>
<span class="line" id="L390">				term.getCursor();</span>
<span class="line" id="L391">				</span>
<span class="line" id="L392">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L393">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L394">				</span>
<span class="line" id="L395">				term.offMouse();</span>
<span class="line" id="L396">				writeLabel(pFmt01, <span class="tok-null">false</span>);</span>
<span class="line" id="L397">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L398">				term.onMouse();</span>
<span class="line" id="L399">			},</span>
<span class="line" id="L400"></span>
<span class="line" id="L401">			<span class="tok-comment">// def field</span>
</span>
<span class="line" id="L402">			.altF =&gt; {</span>
<span class="line" id="L403">				term.getCursor();</span>
<span class="line" id="L404">				</span>
<span class="line" id="L405">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L406">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L407"></span>
<span class="line" id="L408">				term.writeStyled(<span class="tok-str">&quot;?&quot;</span>, pFmt01.attribut);</span>
<span class="line" id="L409">				term.gotoXY(term.posCurs.x , term.posCurs.y );</span>
<span class="line" id="L410">				term.getCursor();</span>
<span class="line" id="L411">				term.offMouse();</span>
<span class="line" id="L412">				writefield(pFmt01);</span>
<span class="line" id="L413">				term.cls();</span>
<span class="line" id="L414">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L415">				term.onMouse();</span>
<span class="line" id="L416">			},</span>
<span class="line" id="L417"></span>
<span class="line" id="L418">			<span class="tok-comment">// def line Horizontal</span>
</span>
<span class="line" id="L419">			.altH =&gt; {</span>
<span class="line" id="L420">				term.getCursor();</span>
<span class="line" id="L421">				</span>
<span class="line" id="L422">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L423">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L424"></span>
<span class="line" id="L425">				term.writeStyled(<span class="tok-str">&quot;?&quot;</span>, pFmt01.attribut);</span>
<span class="line" id="L426">				term.gotoXY(term.posCurs.x, term.posCurs.y );</span>
<span class="line" id="L427">				term.getCursor();</span>
<span class="line" id="L428">				term.offMouse();</span>
<span class="line" id="L429">				writeHorizontal(pFmt01);</span>
<span class="line" id="L430">				term.cls();</span>
<span class="line" id="L431">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L432">				term.onMouse();</span>
<span class="line" id="L433">			},</span>
<span class="line" id="L434"></span>
<span class="line" id="L435">			<span class="tok-comment">// def line Vertical</span>
</span>
<span class="line" id="L436">			.altV =&gt; {</span>
<span class="line" id="L437">				term.getCursor();</span>
<span class="line" id="L438">				</span>
<span class="line" id="L439">				<span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L440">					term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L441"></span>
<span class="line" id="L442">				term.writeStyled(<span class="tok-str">&quot;?&quot;</span>, pFmt01.attribut);</span>
<span class="line" id="L443">				term.gotoXY(term.posCurs.x, term.posCurs.y );</span>
<span class="line" id="L444">				term.getCursor();</span>
<span class="line" id="L445">				term.offMouse();</span>
<span class="line" id="L446">				writeVertical(pFmt01);</span>
<span class="line" id="L447">				term.cls();</span>
<span class="line" id="L448">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L449">				term.onMouse();</span>
<span class="line" id="L450">			},</span>
<span class="line" id="L451">			<span class="tok-comment">// Order / Remove</span>
</span>
<span class="line" id="L452">			.altW =&gt; {</span>
<span class="line" id="L453">				<span class="tok-kw">var</span> nitem: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L454">				nitem = mnu.ioMenu(pFmt01, mChoix, nitem);</span>
<span class="line" id="L455">				term.offMouse();</span>
<span class="line" id="L456">				mnu.rstPanel(mChoix,pFmt01);</span>
<span class="line" id="L457">				term.onMouse();</span>
<span class="line" id="L458"></span>
<span class="line" id="L459">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">0</span>) orderLabel(pFmt01);	<span class="tok-comment">// Order  Label</span>
</span>
<span class="line" id="L460"></span>
<span class="line" id="L461">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">1</span>) removeLabel(pFmt01);   <span class="tok-comment">// Remove Labely</span>
</span>
<span class="line" id="L462"></span>
<span class="line" id="L463">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">2</span>) orderField(pFmt01);	<span class="tok-comment">// order field</span>
</span>
<span class="line" id="L464"></span>
<span class="line" id="L465">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">3</span>) removeField(pFmt01);   <span class="tok-comment">// Remove field</span>
</span>
<span class="line" id="L466"></span>
<span class="line" id="L467">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">4</span>) orderHorizontal(pFmt01);	<span class="tok-comment">// order Line Horizontal</span>
</span>
<span class="line" id="L468"></span>
<span class="line" id="L469">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">5</span>) removeHorizontal(pFmt01);   <span class="tok-comment">// Remove Line vertical</span>
</span>
<span class="line" id="L470"></span>
<span class="line" id="L471">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">6</span>) orderVertical(pFmt01);	<span class="tok-comment">// order Line Horizontal</span>
</span>
<span class="line" id="L472"></span>
<span class="line" id="L473">				<span class="tok-kw">if</span> (nitem == <span class="tok-number">7</span>) removeVertical(pFmt01);   <span class="tok-comment">// Remove Line vertical</span>
</span>
<span class="line" id="L474">					</span>
<span class="line" id="L475">				term.cls();</span>
<span class="line" id="L476">				pnl.printPanel(pFmt01);</span>
<span class="line" id="L477">				term.onMouse();</span>
<span class="line" id="L478">			},</span>
<span class="line" id="L479">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L480">		}</span>
<span class="line" id="L481">	}</span>
<span class="line" id="L482">}</span>
<span class="line" id="L483"></span>
<span class="line" id="L484"><span class="tok-comment">//------------------------------------------------------------------</span>
</span>
<span class="line" id="L485"><span class="tok-comment">// definition label</span>
</span>
<span class="line" id="L486"></span>
<span class="line" id="L487"><span class="tok-kw">fn</span> <span class="tok-fn">writeLabel</span>(vpnl: *pnl.PANEL, vtitle: <span class="tok-type">bool</span>) <span class="tok-type">void</span> {</span>
<span class="line" id="L488">	<span class="tok-comment">//term.getCursor();</span>
</span>
<span class="line" id="L489">	<span class="tok-kw">var</span> e_count: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L490">	<span class="tok-kw">var</span> tampon: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L491">	<span class="tok-kw">var</span> text: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L492">	<span class="tok-kw">var</span> e_LABEL = std.ArrayList([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>).init(dds.allocatorUtils);</span>
<span class="line" id="L493">	<span class="tok-kw">defer</span> e_LABEL.deinit();</span>
<span class="line" id="L494">	<span class="tok-kw">defer</span> dds.allocatorUtils.destroy(&amp;e_LABEL);</span>
<span class="line" id="L495"></span>
<span class="line" id="L496">	<span class="tok-kw">var</span> e_posx: <span class="tok-type">usize</span> = term.posCurs.x;</span>
<span class="line" id="L497">	<span class="tok-kw">var</span> e_posy: <span class="tok-type">usize</span> = term.posCurs.y;</span>
<span class="line" id="L498">	<span class="tok-kw">var</span> e_curs: <span class="tok-type">usize</span> = e_posy;</span>
<span class="line" id="L499"></span>
<span class="line" id="L500">	<span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L501">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L502">	<span class="tok-kw">var</span> pFmtH01 = Panel_HELP();</span>
<span class="line" id="L503"></span>
<span class="line" id="L504">	<span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L505">	<span class="tok-kw">while</span> (i &lt; vpnl.cols) : (i += <span class="tok-number">1</span>) {</span>
<span class="line" id="L506">		e_LABEL.append(<span class="tok-str">&quot; &quot;</span>) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L507">			<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L508">		};</span>
<span class="line" id="L509">	}</span>
<span class="line" id="L510">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L511">		forms.dspCursor(vpnl, e_posx, e_curs,<span class="tok-str">&quot;Label/Title&quot;</span>);</span>
<span class="line" id="L512"></span>
<span class="line" id="L513">		Tkey = kbd.getKEY();</span>
<span class="line" id="L514"></span>
<span class="line" id="L515">		<span class="tok-comment">//dspMouse(vpnl);  // active display Cursor x/y mouse</span>
</span>
<span class="line" id="L516">		<span class="tok-comment">//std.debug.print(&quot;Key: {d}  - {d}\n\r&quot;,.{term.posCurs.x, term.posCurs.y});</span>
</span>
<span class="line" id="L517">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L518">			.F1	 =&gt; {</span>
<span class="line" id="L519">				fld.setText(pFmtH01,<span class="tok-number">0</span>,<span class="tok-str">&quot;F12 Abort  ctrl-V&quot;</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L520">				_= pnl.ioPanel(pFmtH01);</span>
<span class="line" id="L521">				pnl.rstPanel(pFmtH01,vpnl);</span>
<span class="line" id="L522">				term.gotoXY(<span class="tok-number">1</span>,<span class="tok-number">1</span>);</span>
<span class="line" id="L523">				<span class="tok-kw">continue</span>;</span>
<span class="line" id="L524">			},</span>
<span class="line" id="L525">			</span>
<span class="line" id="L526">			.F12 =&gt; <span class="tok-kw">return</span>,</span>
<span class="line" id="L527"></span>
<span class="line" id="L528">			.ctrlV =&gt; {</span>
<span class="line" id="L529">				tampon = std.fmt.allocPrint(dds.allocatorStr, <span class="tok-str">&quot;L{d}{d}&quot;</span>, .{ e_posx, e_posy })</span>
<span class="line" id="L530">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L531">				</span>
<span class="line" id="L532">				text = utl.trimStr(utl.listToStr(e_LABEL));</span>
<span class="line" id="L533">				<span class="tok-kw">if</span> (vtitle == <span class="tok-null">true</span> ) {</span>
<span class="line" id="L534">					vpnl.label.append(lbl.newTitle(tampon, e_posx, e_posy, fld.ToStr(text)))</span>
<span class="line" id="L535">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L536">				} <span class="tok-kw">else</span> {</span>
<span class="line" id="L537">					vpnl.label.append(lbl.newLabel(tampon, e_posx, e_posy, fld.ToStr(text))) </span>
<span class="line" id="L538">					   <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L539">				}</span>
<span class="line" id="L540">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L541">			},</span>
<span class="line" id="L542">			.home =&gt; {</span>
<span class="line" id="L543">				e_count = <span class="tok-number">0</span>;</span>
<span class="line" id="L544">				e_curs = e_posy;</span>
<span class="line" id="L545">			},</span>
<span class="line" id="L546">			.end =&gt; {</span>
<span class="line" id="L547">				tampon = utl.listToStr(e_LABEL);</span>
<span class="line" id="L548">				e_count = utl.trimStr(tampon).len - <span class="tok-number">1</span>;</span>
<span class="line" id="L549">				e_curs = e_posy + utl.trimStr(tampon).len - <span class="tok-number">1</span>;</span>
<span class="line" id="L550">			},</span>
<span class="line" id="L551">			.right, .tab =&gt; {</span>
<span class="line" id="L552">				<span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posy) - <span class="tok-number">1</span>) {</span>
<span class="line" id="L553">					e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L554">					e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L555">				}</span>
<span class="line" id="L556">			},</span>
<span class="line" id="L557">			.left, .stab =&gt; {</span>
<span class="line" id="L558">				<span class="tok-kw">if</span> (e_curs &gt; e_posy) {</span>
<span class="line" id="L559">					e_count -= <span class="tok-number">1</span>;</span>
<span class="line" id="L560">					e_curs -= <span class="tok-number">1</span>;</span>
<span class="line" id="L561">				}</span>
<span class="line" id="L562">			},</span>
<span class="line" id="L563">			.char =&gt; {</span>
<span class="line" id="L564">				<span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posy) - <span class="tok-number">1</span>) {</span>
<span class="line" id="L565">					<span class="tok-kw">if</span> (vtitle) {</span>
<span class="line" id="L566">						term.writeStyled(Tkey.Char, lbl.AtrTitle);</span>
<span class="line" id="L567">						e_LABEL.items[e_count] = Tkey.Char;</span>
<span class="line" id="L568">					} <span class="tok-kw">else</span> {</span>
<span class="line" id="L569">						term.writeStyled(Tkey.Char, lbl.AtrLabel);</span>
<span class="line" id="L570">						e_LABEL.items[e_count] = Tkey.Char;</span>
<span class="line" id="L571">					}</span>
<span class="line" id="L572">					<span class="tok-kw">if</span> (e_count &lt; vpnl.cols) {</span>
<span class="line" id="L573">						e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L574">						e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L575">					}</span>
<span class="line" id="L576">				}</span>
<span class="line" id="L577">			},</span>
<span class="line" id="L578">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L579">		}</span>
<span class="line" id="L580">	}</span>
<span class="line" id="L581">}</span>
<span class="line" id="L582"></span>
<span class="line" id="L583"><span class="tok-comment">// Order label</span>
</span>
<span class="line" id="L584"><span class="tok-kw">fn</span> <span class="tok-fn">orderLabel</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L585">	<span class="tok-kw">var</span> idy: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L586">	<span class="tok-kw">const</span> allocatorOrder = std.heap.page_allocator;</span>
<span class="line" id="L587">	<span class="tok-kw">var</span> newlabel = std.ArrayList(lbl.LABEL).init(allocatorOrder);</span>
<span class="line" id="L588">	<span class="tok-kw">var</span> savlabel = std.ArrayList(lbl.LABEL).init(allocatorOrder);</span>
<span class="line" id="L589"></span>
<span class="line" id="L590">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L591">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L592"></span>
<span class="line" id="L593">	<span class="tok-kw">for</span> (vpnl.label.items) |p| {</span>
<span class="line" id="L594">		savlabel.append(p)</span>
<span class="line" id="L595">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };		</span>
<span class="line" id="L596">	}</span>
<span class="line" id="L597"></span>
<span class="line" id="L598">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L599">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L600">		<span class="tok-number">2</span>,</span>
<span class="line" id="L601">		<span class="tok-number">2</span>,</span>
<span class="line" id="L602">		<span class="tok-number">25</span>,</span>
<span class="line" id="L603">		grd.gridStyle,</span>
<span class="line" id="L604">		dds.CADRE.line1,</span>
<span class="line" id="L605">	);</span>
<span class="line" id="L606">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L607"></span>
<span class="line" id="L608">	<span class="tok-kw">var</span> Order: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L609">		<span class="tok-str">&quot;Order&quot;</span>,</span>
<span class="line" id="L610">		<span class="tok-number">2</span>,</span>
<span class="line" id="L611">		<span class="tok-number">70</span>,</span>
<span class="line" id="L612">		<span class="tok-number">25</span>,</span>
<span class="line" id="L613">		grd.gridStyle,</span>
<span class="line" id="L614">		dds.CADRE.line1,</span>
<span class="line" id="L615">	);</span>
<span class="line" id="L616">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Order);</span>
<span class="line" id="L617"></span>
<span class="line" id="L618">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L619">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L620">	grd.newCell(Origine, <span class="tok-str">&quot;text&quot;</span>, <span class="tok-number">40</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L621">	grd.setHeaders(Origine);</span>
<span class="line" id="L622"></span>
<span class="line" id="L623">	grd.newCell(Order, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L624">	grd.newCell(Order, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L625">	grd.newCell(Order, <span class="tok-str">&quot;text&quot;</span>, <span class="tok-number">40</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L626">	grd.setHeaders(Order);</span>
<span class="line" id="L627"></span>
<span class="line" id="L628">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L629">		grd.resetRows(Origine);</span>
<span class="line" id="L630">		<span class="tok-kw">for</span> (vpnl.label.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L631">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L632"></span>
<span class="line" id="L633">			<span class="tok-kw">if</span> (l.text.len &gt; <span class="tok-number">40</span>) grd.addRows(Origine, &amp;.{ ridx, l.name, l.text[<span class="tok-number">0</span>..<span class="tok-number">39</span>] })</span>
<span class="line" id="L634">			<span class="tok-kw">else</span> grd.addRows(Origine, &amp;.{ ridx, l.name, l.text });</span>
<span class="line" id="L635">		}</span>
<span class="line" id="L636"></span>
<span class="line" id="L637">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L638">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L639">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L640">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L641">			newlabel.append(vpnl.label.items[strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>])])</span>
<span class="line" id="L642">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L643">			</span>
<span class="line" id="L644">			<span class="tok-kw">var</span> ridy = usizeToStr(idy);</span>
<span class="line" id="L645"></span>
<span class="line" id="L646">			grd.addRows(Order, &amp;.{ ridy, Gkey.Buf.items[<span class="tok-number">1</span>], Gkey.Buf.items[<span class="tok-number">2</span>] });</span>
<span class="line" id="L647">			idy += <span class="tok-number">1</span>;</span>
<span class="line" id="L648">			grd.printGridHeader(Order);</span>
<span class="line" id="L649">			grd.printGridRows(Order);</span>
<span class="line" id="L650">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L651"></span>
<span class="line" id="L652">			_ = vpnl.label.orderedRemove(ligne);</span>
<span class="line" id="L653">		}</span>
<span class="line" id="L654">	}</span>
<span class="line" id="L655"></span>
<span class="line" id="L656">	vpnl.label.clearAndFree();</span>
<span class="line" id="L657">	vpnl.label = std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L658">	vpnl.label.clearRetainingCapacity();</span>
<span class="line" id="L659">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L660">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L661">		<span class="tok-kw">for</span> (savlabel.items) |p| {</span>
<span class="line" id="L662">			vpnl.label.append(p)</span>
<span class="line" id="L663">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L664">		}</span>
<span class="line" id="L665">	}</span>
<span class="line" id="L666">	<span class="tok-comment">// new Order and exit CTRL-V</span>
</span>
<span class="line" id="L667">	<span class="tok-kw">else</span> {</span>
<span class="line" id="L668">		<span class="tok-kw">for</span> (newlabel.items) |p| {</span>
<span class="line" id="L669">			vpnl.label.append(p)   </span>
<span class="line" id="L670">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L671">				 }</span>
<span class="line" id="L672">	}</span>
<span class="line" id="L673"></span>
<span class="line" id="L674">	grd.freeGrid(Origine);</span>
<span class="line" id="L675">	grd.freeGrid(Order);</span>
<span class="line" id="L676"></span>
<span class="line" id="L677">	newlabel.clearAndFree();</span>
<span class="line" id="L678">	newlabel.deinit();</span>
<span class="line" id="L679"></span>
<span class="line" id="L680">	savlabel.clearAndFree();</span>
<span class="line" id="L681">	savlabel.deinit();</span>
<span class="line" id="L682"></span>
<span class="line" id="L683">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L684">}</span>
<span class="line" id="L685"></span>
<span class="line" id="L686"><span class="tok-comment">// remove Label</span>
</span>
<span class="line" id="L687"><span class="tok-kw">fn</span> <span class="tok-fn">removeLabel</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L688">	<span class="tok-kw">const</span> allocatorRemove = std.heap.page_allocator;</span>
<span class="line" id="L689">	<span class="tok-kw">var</span> savlabel: std.ArrayList(lbl.LABEL) = std.ArrayList(lbl.LABEL).init(allocatorRemove);</span>
<span class="line" id="L690"></span>
<span class="line" id="L691">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L692">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L693"></span>
<span class="line" id="L694">	<span class="tok-kw">for</span> (vpnl.label.items) |p| {</span>
<span class="line" id="L695">		savlabel.append(p)  </span>
<span class="line" id="L696">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L697">	}</span>
<span class="line" id="L698"></span>
<span class="line" id="L699">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L700">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L701">		<span class="tok-number">2</span>,</span>
<span class="line" id="L702">		<span class="tok-number">2</span>,</span>
<span class="line" id="L703">		<span class="tok-number">25</span>,</span>
<span class="line" id="L704">		grd.gridStyle,</span>
<span class="line" id="L705">		dds.CADRE.line1,</span>
<span class="line" id="L706">	);</span>
<span class="line" id="L707">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L708"></span>
<span class="line" id="L709">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L710">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L711">	grd.newCell(Origine, <span class="tok-str">&quot;text&quot;</span>, <span class="tok-number">40</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L712">	grd.setHeaders(Origine);</span>
<span class="line" id="L713"></span>
<span class="line" id="L714">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L715">		grd.resetRows(Origine);</span>
<span class="line" id="L716">		<span class="tok-kw">for</span> (vpnl.label.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L717">			<span class="tok-kw">var</span> ridx =  usizeToStr(idx);</span>
<span class="line" id="L718"> </span>
<span class="line" id="L719">			<span class="tok-kw">if</span> (l.text.len &gt; <span class="tok-number">40</span>) grd.addRows(Origine, &amp;.{ ridx, l.name, l.text[<span class="tok-number">0</span>..<span class="tok-number">39</span>] })</span>
<span class="line" id="L720">			<span class="tok-kw">else</span> grd.addRows(Origine, &amp;.{ ridx, l.name, l.text });</span>
<span class="line" id="L721">		}</span>
<span class="line" id="L722"></span>
<span class="line" id="L723">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L724">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L725">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L726">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L727">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L728"></span>
<span class="line" id="L729">			_ = vpnl.label.orderedRemove(ligne);</span>
<span class="line" id="L730">		}</span>
<span class="line" id="L731">	}</span>
<span class="line" id="L732"></span>
<span class="line" id="L733">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L734">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L735">		vpnl.label.clearAndFree();</span>
<span class="line" id="L736">		vpnl.label = std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L737">		vpnl.label.clearRetainingCapacity();</span>
<span class="line" id="L738"></span>
<span class="line" id="L739">		<span class="tok-kw">for</span> (savlabel.items) |p| {</span>
<span class="line" id="L740">			vpnl.label.append(p) </span>
<span class="line" id="L741">			 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L742">		}</span>
<span class="line" id="L743">	}</span>
<span class="line" id="L744"></span>
<span class="line" id="L745">	grd.freeGrid(Origine);</span>
<span class="line" id="L746"></span>
<span class="line" id="L747">	savlabel.clearAndFree();</span>
<span class="line" id="L748">	savlabel.deinit();</span>
<span class="line" id="L749">}</span>
<span class="line" id="L750"></span>
<span class="line" id="L751"><span class="tok-comment">//==========================================</span>
</span>
<span class="line" id="L752"><span class="tok-comment">// FIELD Management</span>
</span>
<span class="line" id="L753"><span class="tok-comment">//==========================================</span>
</span>
<span class="line" id="L754"></span>
<span class="line" id="L755"><span class="tok-comment">// forms field</span>
</span>
<span class="line" id="L756"><span class="tok-kw">const</span> fp02 = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L757">	fname,</span>
<span class="line" id="L758">	fposx,</span>
<span class="line" id="L759">	fposy,</span>
<span class="line" id="L760">	ftype,</span>
<span class="line" id="L761">	fwidth,</span>
<span class="line" id="L762">	fscal,</span>
<span class="line" id="L763">	frequi,</span>
<span class="line" id="L764">	fprotect,</span>
<span class="line" id="L765">	fedtcar,</span>
<span class="line" id="L766">	ferrmsg,</span>
<span class="line" id="L767">	fhelp,</span>
<span class="line" id="L768">	ffunc,</span>
<span class="line" id="L769">	ftask,</span>
<span class="line" id="L770">};</span>
<span class="line" id="L771"></span>
<span class="line" id="L772"><span class="tok-comment">//  string return enum</span>
</span>
<span class="line" id="L773"><span class="tok-kw">fn</span> <span class="tok-fn">strToEnum</span>(<span class="tok-kw">comptime</span> EnumTag: <span class="tok-type">type</span>, vtext: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) EnumTag {</span>
<span class="line" id="L774">	<span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(EnumTag).Enum.fields) |f| {</span>
<span class="line" id="L775">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vtext)) <span class="tok-kw">return</span> <span class="tok-builtin">@field</span>(EnumTag, f.name);</span>
<span class="line" id="L776">	}</span>
<span class="line" id="L777"></span>
<span class="line" id="L778">	<span class="tok-kw">var</span> buffer: [<span class="tok-number">128</span>]<span class="tok-type">u8</span> = [_]<span class="tok-type">u8</span>{<span class="tok-number">0</span>} ** <span class="tok-number">128</span>;</span>
<span class="line" id="L779">	<span class="tok-kw">var</span> result = std.fmt.bufPrintZ(buffer[<span class="tok-number">0</span>..], <span class="tok-str">&quot;invalid Text {s} for strToEnum &quot;</span>, .{vtext}) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L780">	<span class="tok-builtin">@panic</span>(result);</span>
<span class="line" id="L781">}</span>
<span class="line" id="L782"></span>
<span class="line" id="L783"><span class="tok-comment">// panel for field</span>
</span>
<span class="line" id="L784"><span class="tok-kw">fn</span> <span class="tok-fn">Panel_Fmt02</span>(nposx: <span class="tok-type">usize</span>) *pnl.PANEL {</span>
<span class="line" id="L785">	<span class="tok-kw">var</span> Panel: *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;FRAM01&quot;</span>, nposx, <span class="tok-number">2</span>, <span class="tok-number">12</span>, <span class="tok-number">62</span>, dds.CADRE.line1, <span class="tok-str">&quot;Def.field&quot;</span>);</span>
<span class="line" id="L786"></span>
<span class="line" id="L787">	Panel.button.append(btn.newButton(</span>
<span class="line" id="L788">		kbd.F9, <span class="tok-comment">// function</span>
</span>
<span class="line" id="L789">		<span class="tok-null">true</span>, <span class="tok-comment">// show</span>
</span>
<span class="line" id="L790">		<span class="tok-null">true</span>, <span class="tok-comment">// check field</span>
</span>
<span class="line" id="L791">		<span class="tok-str">&quot;Enrg&quot;</span>, <span class="tok-comment">// title</span>
</span>
<span class="line" id="L792">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L793">	</span>
<span class="line" id="L794">	Panel.button.append(btn.newButton(</span>
<span class="line" id="L795">		kbd.F12, <span class="tok-comment">// function</span>
</span>
<span class="line" id="L796">		<span class="tok-null">true</span>, <span class="tok-comment">// show</span>
</span>
<span class="line" id="L797">		<span class="tok-null">false</span>, <span class="tok-comment">// check field</span>
</span>
<span class="line" id="L798">		<span class="tok-str">&quot;Return&quot;</span>, <span class="tok-comment">// title</span>
</span>
<span class="line" id="L799">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L800"></span>
<span class="line" id="L801">	</span>
<span class="line" id="L802">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fname), <span class="tok-number">2</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;name.....:&quot;</span>)) </span>
<span class="line" id="L803">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L804">	</span>
<span class="line" id="L805">	Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.fname), <span class="tok-number">2</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L806">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L807">		<span class="tok-number">15</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L808">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L809">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L810">		<span class="tok-str">&quot;required help ctrl-h&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L811">		<span class="tok-str">&quot;please enter text 1car Letter  other alphanumeric&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L812">		<span class="tok-str">&quot;(^[a-zA-Z]{1,1}[a-zA-Z0-9]{1,})$&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L813">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L814"></span>
<span class="line" id="L815">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fname), <span class="tok-str">&quot;TaskName&quot;</span>) </span>
<span class="line" id="L816">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L817"></span>
<span class="line" id="L818"></span>
<span class="line" id="L819">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fposx), <span class="tok-number">3</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;PosX.:&quot;</span>))</span>
<span class="line" id="L820">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L821"></span>
<span class="line" id="L822">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fposx), <span class="tok-number">3</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L823">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L824">		<span class="tok-number">2</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L825">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L826">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L827">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// Msg err default</span>
</span>
<span class="line" id="L828">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// help default</span>
</span>
<span class="line" id="L829">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex default</span>
</span>
<span class="line" id="L830">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L831"></span>
<span class="line" id="L832">	fld.setProtect(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fposx), <span class="tok-null">true</span>)</span>
<span class="line" id="L833">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L834"></span>
<span class="line" id="L835"></span>
<span class="line" id="L836">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fposy), <span class="tok-number">3</span>, <span class="tok-number">12</span>, <span class="tok-str">&quot;PosY.:&quot;</span>))</span>
<span class="line" id="L837">	<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };	 </span>
<span class="line" id="L838"></span>
<span class="line" id="L839">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fposy), <span class="tok-number">3</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L840">		<span class="tok-number">12</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L841">		<span class="tok-number">3</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L842">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L843">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L844">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// Msg err default</span>
</span>
<span class="line" id="L845">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// help default</span>
</span>
<span class="line" id="L846">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex default</span>
</span>
<span class="line" id="L847">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L848"></span>
<span class="line" id="L849">	fld.setProtect(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fposy), <span class="tok-null">true</span>) </span>
<span class="line" id="L850">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L851">		</span>
<span class="line" id="L852"></span>
<span class="line" id="L853">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ftype), <span class="tok-number">3</span>, <span class="tok-number">32</span>, <span class="tok-str">&quot;Type.:&quot;</span>))</span>
<span class="line" id="L854">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L855">		</span>
<span class="line" id="L856">	Panel.field.append(fld.newFieldFunc(</span>
<span class="line" id="L857">		<span class="tok-builtin">@tagName</span>(fp02.ftype),</span>
<span class="line" id="L858">		<span class="tok-number">3</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L859">		<span class="tok-number">32</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftype)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L860">		<span class="tok-number">19</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L861">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L862">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L863">		<span class="tok-str">&quot;funcType&quot;</span>, <span class="tok-comment">// function</span>
</span>
<span class="line" id="L864">		<span class="tok-str">&quot;Reference type required&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L865">		<span class="tok-str">&quot;Refence field&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L866">	)) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L867">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L868">	};</span>
<span class="line" id="L869">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.ftype), <span class="tok-str">&quot;TaskType&quot;</span>)</span>
<span class="line" id="L870">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L871"></span>
<span class="line" id="L872">		</span>
<span class="line" id="L873">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fwidth), <span class="tok-number">4</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Width.:&quot;</span>))</span>
<span class="line" id="L874">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L875">		</span>
<span class="line" id="L876">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fwidth), <span class="tok-number">4</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L877">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L878">		<span class="tok-number">3</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L879">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L880">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L881">		<span class="tok-str">&quot;Len field required or too long&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L882">		<span class="tok-str">&quot;len field&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L883">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L884">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L885"></span>
<span class="line" id="L886">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fwidth), <span class="tok-str">&quot;TaskWidth&quot;</span>) </span>
<span class="line" id="L887">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L888">		</span>
<span class="line" id="L889"></span>
<span class="line" id="L890">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fscal), <span class="tok-number">4</span>, <span class="tok-number">20</span>, <span class="tok-str">&quot;Scal.:&quot;</span>))</span>
<span class="line" id="L891">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L892">		</span>
<span class="line" id="L893">	Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fscal), <span class="tok-number">4</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L894">		<span class="tok-number">20</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L895">		<span class="tok-number">3</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L896">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L897">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L898">		<span class="tok-str">&quot;Len Scal field required or too long&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L899">		<span class="tok-str">&quot;len Scal field&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L900">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L901">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L902"></span>
<span class="line" id="L903">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fscal), <span class="tok-str">&quot;TaskScal&quot;</span>)</span>
<span class="line" id="L904">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L905">		</span>
<span class="line" id="L906">	</span>
<span class="line" id="L907">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.frequi), <span class="tok-number">4</span>, <span class="tok-number">32</span>, <span class="tok-str">&quot;Required.:&quot;</span>))</span>
<span class="line" id="L908">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L909">		</span>
<span class="line" id="L910">	Panel.field.append(fld.newFieldSwitch(<span class="tok-builtin">@tagName</span>(fp02.frequi), <span class="tok-number">4</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L911">		<span class="tok-number">32</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L912">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L913">		<span class="tok-str">&quot;field required True or False&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L914">		<span class="tok-str">&quot; field value required True or False&quot;</span> <span class="tok-comment">// Text</span>
</span>
<span class="line" id="L915">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L916"></span>
<span class="line" id="L917"></span>
<span class="line" id="L918">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fprotect), <span class="tok-number">5</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Protect.:&quot;</span>))</span>
<span class="line" id="L919">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L920"></span>
<span class="line" id="L921">	Panel.field.append(fld.newFieldSwitch(<span class="tok-builtin">@tagName</span>(fp02.fprotect), <span class="tok-number">5</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L922">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fprotect)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L923">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L924">		<span class="tok-str">&quot;field Protect required True or False&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L925">		<span class="tok-str">&quot; field Protect required True or False&quot;</span> <span class="tok-comment">// Text</span>
</span>
<span class="line" id="L926">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L927"></span>
<span class="line" id="L928">	</span>
<span class="line" id="L929">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fedtcar), <span class="tok-number">5</span>, <span class="tok-number">20</span>, <span class="tok-str">&quot;Edit Car.:&quot;</span>))</span>
<span class="line" id="L930">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L931">		</span>
<span class="line" id="L932">	Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.fedtcar), <span class="tok-number">5</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L933">		<span class="tok-number">20</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L934">		<span class="tok-number">1</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L935">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L936">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L937">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L938">		<span class="tok-str">&quot;please enter text ex:$ € % £&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L939">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L940">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L941"> </span>
<span class="line" id="L942">		fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.fscal), <span class="tok-str">&quot;TaskEdtcar&quot;</span>)</span>
<span class="line" id="L943">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L944"> </span>
<span class="line" id="L945">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ferrmsg), <span class="tok-number">6</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Err Msg.:&quot;</span>)) </span>
<span class="line" id="L946">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L947">		</span>
<span class="line" id="L948">	Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.ferrmsg), <span class="tok-number">6</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L949">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L950">		<span class="tok-number">50</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L951">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L952">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L953">		<span class="tok-str">&quot;required Help&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L954">		<span class="tok-str">&quot;please enter text  message error&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L955">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L956">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L957">		</span>
<span class="line" id="L958">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg), <span class="tok-str">&quot;TaskErrmsg&quot;</span>) </span>
<span class="line" id="L959">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L960"></span>
<span class="line" id="L961"></span>
<span class="line" id="L962">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fhelp), <span class="tok-number">7</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Help.:&quot;</span>)) </span>
<span class="line" id="L963">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L964"></span>
<span class="line" id="L965">	Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.fhelp), <span class="tok-number">7</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L966">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L967">		<span class="tok-number">50</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L968">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L969">		<span class="tok-null">true</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L970">		<span class="tok-str">&quot;required Help&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L971">		<span class="tok-str">&quot;please enter text  Help&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L972">		<span class="tok-str">&quot;&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L973">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L974"></span>
<span class="line" id="L975">	</span>
<span class="line" id="L976">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ffunc), <span class="tok-number">8</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Function.:&quot;</span>))</span>
<span class="line" id="L977">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L978"></span>
<span class="line" id="L979">	Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.ffunc), <span class="tok-number">8</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L980">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L981">		<span class="tok-number">15</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L982">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L983">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L984">		<span class="tok-str">&quot;required Function&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L985">		<span class="tok-str">&quot;please enter Name Function  F.....&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L986">		<span class="tok-str">&quot;(^[F]{1,1}[a-zA-Z0-9]{1,})$&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L987">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L988"></span>
<span class="line" id="L989">	fld.setTask(Panel, <span class="tok-builtin">@intFromEnum</span>(fp02.ffunc), <span class="tok-str">&quot;TaskFunc&quot;</span>) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L990">		<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L991">	};</span>
<span class="line" id="L992"></span>
<span class="line" id="L993"></span>
<span class="line" id="L994">	Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ftask), <span class="tok-number">9</span>, <span class="tok-number">2</span>, <span class="tok-str">&quot;Task.:&quot;</span>)) </span>
<span class="line" id="L995">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L996">		</span>
<span class="line" id="L997">	Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.ftask), <span class="tok-number">9</span>, <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L998">		<span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftask)].text.len, <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L999">		<span class="tok-number">15</span>, <span class="tok-comment">// len</span>
</span>
<span class="line" id="L1000">		<span class="tok-str">&quot;&quot;</span>, <span class="tok-comment">// text</span>
</span>
<span class="line" id="L1001">		<span class="tok-null">false</span>, <span class="tok-comment">// required</span>
</span>
<span class="line" id="L1002">		<span class="tok-str">&quot;err Task&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L1003">		<span class="tok-str">&quot;please enter Name Task T.....&quot;</span>, <span class="tok-comment">// help</span>
</span>
<span class="line" id="L1004">		<span class="tok-str">&quot;(^[T]{1,1}[a-zA-Z0-9]{1,})$&quot;</span> <span class="tok-comment">// regex1</span>
</span>
<span class="line" id="L1005">	)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L1006"></span>
<span class="line" id="L1007">	<span class="tok-kw">return</span> Panel;</span>
<span class="line" id="L1008">}</span>
<span class="line" id="L1009"></span>
<span class="line" id="L1010"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L1011"></span>
<span class="line" id="L1012"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1013"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1014"><span class="tok-comment">// choix Cadre</span>
</span>
<span class="line" id="L1015"><span class="tok-kw">fn</span> <span class="tok-fn">funcType</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1016">	<span class="tok-kw">var</span> pos: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1017"></span>
<span class="line" id="L1018">	<span class="tok-kw">var</span> Xcombo: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L1019">		<span class="tok-str">&quot;qryPanel&quot;</span>,</span>
<span class="line" id="L1020">		vpnl.posx + <span class="tok-number">1</span>,</span>
<span class="line" id="L1021">		vpnl.posy + <span class="tok-number">1</span>,</span>
<span class="line" id="L1022">		<span class="tok-number">7</span>,</span>
<span class="line" id="L1023">		grd.gridStyle,</span>
<span class="line" id="L1024">		dds.CADRE.line1,</span>
<span class="line" id="L1025">	);</span>
<span class="line" id="L1026">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Xcombo);</span>
<span class="line" id="L1027">	grd.newCell(Xcombo, <span class="tok-str">&quot;Ref.Type&quot;</span>, <span class="tok-number">19</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1028">	grd.setHeaders(Xcombo);</span>
<span class="line" id="L1029">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TEXT_FREE&quot;</span>}); <span class="tok-comment">// Free</span>
</span>
<span class="line" id="L1030">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TEXT_FULL&quot;</span>}); <span class="tok-comment">// Letter Digit Char-special</span>
</span>
<span class="line" id="L1031">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA&quot;</span>}); <span class="tok-comment">// Letter</span>
</span>
<span class="line" id="L1032">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_UPPER&quot;</span>}); <span class="tok-comment">// Letter</span>
</span>
<span class="line" id="L1033">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_NUMERIC&quot;</span>}); <span class="tok-comment">// Letter Digit espace -</span>
</span>
<span class="line" id="L1034">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_NUMERIC_UPPER&quot;</span>}); <span class="tok-comment">// Letter Digit espace -</span>
</span>
<span class="line" id="L1035">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;PASSWORD&quot;</span>}); <span class="tok-comment">// Letter Digit and normaliz char-special</span>
</span>
<span class="line" id="L1036">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;YES_NO&quot;</span>}); <span class="tok-comment">// 'y' or 'Y' / 'o' or 'O'</span>
</span>
<span class="line" id="L1037">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;UDIGIT&quot;</span>}); <span class="tok-comment">// Digit unsigned</span>
</span>
<span class="line" id="L1038">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DIGIT&quot;</span>}); <span class="tok-comment">// Digit signed</span>
</span>
<span class="line" id="L1039">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;UDECIMAL&quot;</span>}); <span class="tok-comment">// Decimal unsigned</span>
</span>
<span class="line" id="L1040">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DECIMAL&quot;</span>}); <span class="tok-comment">// Decimal signed</span>
</span>
<span class="line" id="L1041">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_ISO&quot;</span>}); <span class="tok-comment">// YYYY/MM/DD</span>
</span>
<span class="line" id="L1042">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_FR&quot;</span>}); <span class="tok-comment">// DD/MM/YYYY</span>
</span>
<span class="line" id="L1043">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_US&quot;</span>}); <span class="tok-comment">// MM/DD/YYYY</span>
</span>
<span class="line" id="L1044">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TELEPHONE&quot;</span>}); <span class="tok-comment">// (+123) 6 00 01 00 02</span>
</span>
<span class="line" id="L1045">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;MAIL_ISO&quot;</span>}); <span class="tok-comment">// normalize regex</span>
</span>
<span class="line" id="L1046">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;SWITCH&quot;</span>}); <span class="tok-comment">// CTRUE CFALSE</span>
</span>
<span class="line" id="L1047">	grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;FUNC&quot;</span>}); <span class="tok-comment">// call Function</span>
</span>
<span class="line" id="L1048"></span>
<span class="line" id="L1049">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TEXT_FREE&quot;</span>)) pos = <span class="tok-number">0</span>;</span>
<span class="line" id="L1050">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TEXT_FULL&quot;</span>)) pos = <span class="tok-number">1</span>;</span>
<span class="line" id="L1051">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA&quot;</span>)) pos = <span class="tok-number">2</span>;</span>
<span class="line" id="L1052">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_UPPER&quot;</span>)) pos = <span class="tok-number">3</span>;</span>
<span class="line" id="L1053">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_NUMERIC&quot;</span>)) pos = <span class="tok-number">4</span>;</span>
<span class="line" id="L1054">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_NUMERIC_UPPER&quot;</span>)) pos = <span class="tok-number">5</span>;</span>
<span class="line" id="L1055">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;PASSWORD&quot;</span>)) pos = <span class="tok-number">6</span>;</span>
<span class="line" id="L1056">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;YES_NO&quot;</span>)) pos = <span class="tok-number">7</span>;</span>
<span class="line" id="L1057">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDIGIT&quot;</span>)) pos = <span class="tok-number">8</span>;</span>
<span class="line" id="L1058">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDECIMAL&quot;</span>)) pos = <span class="tok-number">9</span>;</span>
<span class="line" id="L1059">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) pos = <span class="tok-number">10</span>;</span>
<span class="line" id="L1060">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_ISO&quot;</span>)) pos = <span class="tok-number">11</span>;</span>
<span class="line" id="L1061">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_FR&quot;</span>)) pos = <span class="tok-number">12</span>;</span>
<span class="line" id="L1062">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_US&quot;</span>)) pos = <span class="tok-number">13</span>;</span>
<span class="line" id="L1063">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TELEPHONE&quot;</span>)) pos = <span class="tok-number">14</span>;</span>
<span class="line" id="L1064">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;MAIL_ISO&quot;</span>)) pos = <span class="tok-number">15</span>;</span>
<span class="line" id="L1065">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;SWITCH&quot;</span>)) pos = <span class="tok-number">16</span>;</span>
<span class="line" id="L1066">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;FUNC&quot;</span>)) pos = <span class="tok-number">17</span>;</span>
<span class="line" id="L1067"></span>
<span class="line" id="L1068">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1069">	<span class="tok-kw">defer</span> Gkey.Buf.deinit();</span>
<span class="line" id="L1070"></span>
<span class="line" id="L1071">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1072">		Gkey = grd.ioCombo(Xcombo, pos);</span>
<span class="line" id="L1073"></span>
<span class="line" id="L1074">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L1075">			grd.rstPanel(Xcombo, vpnl);</span>
<span class="line" id="L1076">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L1077">			fld.setText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.ftype), Gkey.Buf.items[<span class="tok-number">0</span>]) </span>
<span class="line" id="L1078">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L1079">			<span class="tok-kw">return</span>;</span>
<span class="line" id="L1080">		}</span>
<span class="line" id="L1081"></span>
<span class="line" id="L1082">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L1083">			grd.rstPanel(Xcombo, vpnl);</span>
<span class="line" id="L1084">			grd.freeGrid(Xcombo);</span>
<span class="line" id="L1085">			<span class="tok-kw">return</span>;</span>
<span class="line" id="L1086">		}</span>
<span class="line" id="L1087">	}</span>
<span class="line" id="L1088">}</span>
<span class="line" id="L1089"></span>
<span class="line" id="L1090"><span class="tok-kw">var</span> callFunc: FuncEnum = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1091"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1092"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1093"><span class="tok-comment">/// run emun Function ex: combo</span></span>
<span class="line" id="L1094"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> FuncEnum = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L1095">	funcType,</span>
<span class="line" id="L1096">	none,</span>
<span class="line" id="L1097"></span>
<span class="line" id="L1098">	<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">run</span>(self: FuncEnum, vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1099">		<span class="tok-kw">switch</span> (self) {</span>
<span class="line" id="L1100">			.funcType =&gt; funcType(vpnl, vfld),</span>
<span class="line" id="L1101">			<span class="tok-kw">else</span> =&gt; dsperr.errorForms(vpnl, ErrMain.main_run_EnumFunc_invalide),</span>
<span class="line" id="L1102">		}</span>
<span class="line" id="L1103">	}</span>
<span class="line" id="L1104"></span>
<span class="line" id="L1105">	<span class="tok-kw">fn</span> <span class="tok-fn">searchFn</span>(vtext: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) FuncEnum {</span>
<span class="line" id="L1106">		<span class="tok-kw">var</span> max: <span class="tok-type">usize</span> = <span class="tok-builtin">@typeInfo</span>(FuncEnum).Enum.fields.len;</span>
<span class="line" id="L1107"></span>
<span class="line" id="L1108">		<span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(FuncEnum).Enum.fields) |f| {</span>
<span class="line" id="L1109">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vtext)) <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(FuncEnum, <span class="tok-builtin">@enumFromInt</span>(f.value));</span>
<span class="line" id="L1110">		}</span>
<span class="line" id="L1111">		<span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(FuncEnum, <span class="tok-builtin">@enumFromInt</span>(max));</span>
<span class="line" id="L1112">	}</span>
<span class="line" id="L1113">};</span>
<span class="line" id="L1114"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L1115"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1116"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1117"><span class="tok-comment">// test exist Name for add or change name</span>
</span>
<span class="line" id="L1118"></span>
<span class="line" id="L1119"><span class="tok-kw">fn</span> <span class="tok-fn">TaskName</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1120">	<span class="tok-kw">for</span> (vpnl.field.items) |f| {</span>
<span class="line" id="L1121">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vfld.text)) {</span>
<span class="line" id="L1122">			pnl.msgErr(vpnl, <span class="tok-str">&quot;Already existing invalide Name field&quot;</span>);</span>
<span class="line" id="L1123">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1124">			<span class="tok-kw">return</span>;</span>
<span class="line" id="L1125">		}</span>
<span class="line" id="L1126">	}</span>
<span class="line" id="L1127">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1128">}</span>
<span class="line" id="L1129"></span>
<span class="line" id="L1130"><span class="tok-kw">fn</span> <span class="tok-fn">TaskType</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1131">	<span class="tok-kw">var</span> vReftype = strToEnum(dds.REFTYP, vfld.text);</span>
<span class="line" id="L1132"></span>
<span class="line" id="L1133">	<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1134">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fscal))) {</span>
<span class="line" id="L1135">			vpnl.field.items[idx].text = <span class="tok-str">&quot;&quot;</span>;</span>
<span class="line" id="L1136">			vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1137">		}</span>
<span class="line" id="L1138"></span>
<span class="line" id="L1139">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fedtcar))) {</span>
<span class="line" id="L1140">			vpnl.field.items[idx].text = <span class="tok-str">&quot;&quot;</span>;</span>
<span class="line" id="L1141">			vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1142">		}</span>
<span class="line" id="L1143">	}</span>
<span class="line" id="L1144"></span>
<span class="line" id="L1145"></span>
<span class="line" id="L1146"></span>
<span class="line" id="L1147">	</span>
<span class="line" id="L1148">	<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1149">		</span>
<span class="line" id="L1150">		<span class="tok-kw">if</span> (vReftype == dds.REFTYP.DECIMAL <span class="tok-kw">or</span></span>
<span class="line" id="L1151">			vReftype == dds.REFTYP.UDECIMAL) {</span>
<span class="line" id="L1152">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fscal))) {</span>
<span class="line" id="L1153">				vpnl.field.items[idx].protect = <span class="tok-null">false</span>;</span>
<span class="line" id="L1154">			}</span>
<span class="line" id="L1155">		}</span>
<span class="line" id="L1156">		<span class="tok-kw">if</span> (vReftype == dds.REFTYP.DIGIT <span class="tok-kw">or</span></span>
<span class="line" id="L1157">			vReftype == dds.REFTYP.UDIGIT <span class="tok-kw">or</span></span>
<span class="line" id="L1158">			vReftype == dds.REFTYP.DECIMAL <span class="tok-kw">or</span></span>
<span class="line" id="L1159">			vReftype == dds.REFTYP.UDECIMAL)</span>
<span class="line" id="L1160">		{</span>
<span class="line" id="L1161">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fedtcar))) {</span>
<span class="line" id="L1162">				vpnl.field.items[idx].protect = <span class="tok-null">false</span>;</span>
<span class="line" id="L1163">			}</span>
<span class="line" id="L1164">		}</span>
<span class="line" id="L1165">	}</span>
<span class="line" id="L1166"></span>
<span class="line" id="L1167"></span>
<span class="line" id="L1168">	<span class="tok-kw">if</span> (vReftype == dds.REFTYP.DATE_ISO <span class="tok-kw">or</span></span>
<span class="line" id="L1169">		vReftype == dds.REFTYP.DATE_FR <span class="tok-kw">or</span></span>
<span class="line" id="L1170">		vReftype == dds.REFTYP.DATE_US)</span>
<span class="line" id="L1171">	{</span>
<span class="line" id="L1172">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1173">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fwidth))) {</span>
<span class="line" id="L1174">				vpnl.field.items[idx].text = <span class="tok-str">&quot;10&quot;</span>;</span>
<span class="line" id="L1175">				vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1176">			}</span>
<span class="line" id="L1177">		}</span>
<span class="line" id="L1178">	}</span>
<span class="line" id="L1179"></span>
<span class="line" id="L1180">	<span class="tok-kw">if</span> (vReftype == dds.REFTYP.YES_NO <span class="tok-kw">or</span> vReftype == dds.REFTYP.SWITCH) {</span>
<span class="line" id="L1181">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1182">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, <span class="tok-builtin">@tagName</span>(fp02.fwidth))) {</span>
<span class="line" id="L1183">				vpnl.field.items[idx].text = <span class="tok-str">&quot;1&quot;</span>;</span>
<span class="line" id="L1184">				vpnl.field.items[idx].protect = <span class="tok-null">true</span>;</span>
<span class="line" id="L1185">			}</span>
<span class="line" id="L1186">		}</span>
<span class="line" id="L1187">	}</span>
<span class="line" id="L1188">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1189">}</span>
<span class="line" id="L1190"></span>
<span class="line" id="L1191"><span class="tok-kw">fn</span> <span class="tok-fn">TaskWidth</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1192">	<span class="tok-kw">var</span> val = strToUsize(vfld.text);</span>
<span class="line" id="L1193"></span>
<span class="line" id="L1194">	<span class="tok-kw">if</span> (val + vfld.posx &gt;= vpnl.cols) {</span>
<span class="line" id="L1195">		<span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,</span>
<span class="line" id="L1196">			<span class="tok-str">&quot;{d} the length of the zone is excessive&quot;</span>, .{val})</span>
<span class="line" id="L1197">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };			</span>
<span class="line" id="L1198">		pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L1199"></span>
<span class="line" id="L1200">		vpnl.keyField = kbd.task;</span>
<span class="line" id="L1201">	}</span>
<span class="line" id="L1202">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1203">}</span>
<span class="line" id="L1204"></span>
<span class="line" id="L1205"><span class="tok-kw">fn</span> <span class="tok-fn">TaskScal</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1206">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDECIMAL&quot;</span>) <span class="tok-kw">or</span> std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) {</span>
<span class="line" id="L1207">		<span class="tok-kw">var</span> width = strToUsize(fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) ;</span>
<span class="line" id="L1208">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) width += <span class="tok-number">1</span>;</span>
<span class="line" id="L1209"></span>
<span class="line" id="L1210">		<span class="tok-kw">var</span> vscal = strToUsize(vfld.text);</span>
<span class="line" id="L1211"></span>
<span class="line" id="L1212">	</span>
<span class="line" id="L1213">		<span class="tok-kw">if</span> (vscal + width + vfld.posx &gt;= vpnl.cols) {</span>
<span class="line" id="L1214">			<span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,</span>
<span class="line" id="L1215">				<span class="tok-str">&quot;{d} the Scal of the zone is excessive&quot;</span>, .{vscal}) </span>
<span class="line" id="L1216">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); }; </span>
<span class="line" id="L1217">				</span>
<span class="line" id="L1218">			pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L1219">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1220">		}</span>
<span class="line" id="L1221">	} <span class="tok-kw">else</span> vfld.text = <span class="tok-str">&quot;&quot;</span>;</span>
<span class="line" id="L1222">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1223">}</span>
<span class="line" id="L1224"></span>
<span class="line" id="L1225"></span>
<span class="line" id="L1226"><span class="tok-kw">fn</span> <span class="tok-fn">TaskEdtcar</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1227">	<span class="tok-kw">if</span> ( ! std.mem.eql(<span class="tok-type">u8</span>, vfld.text,<span class="tok-str">&quot;&quot;</span>)) {</span>
<span class="line" id="L1228">		</span>
<span class="line" id="L1229">		<span class="tok-kw">var</span> width = strToUsize(fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.fwidth))  <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) ;</span>
<span class="line" id="L1230">		<span class="tok-kw">var</span> vtype = fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.ftype))  <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L1231">	</span>
<span class="line" id="L1232">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vtype, <span class="tok-str">&quot;DIGIT&quot;</span>) <span class="tok-kw">or</span> std.mem.eql(<span class="tok-type">u8</span>, vtype, <span class="tok-str">&quot;DECIMAL&quot;</span>))  width += <span class="tok-number">1</span>;</span>
<span class="line" id="L1233"></span>
<span class="line" id="L1234">		<span class="tok-kw">var</span> scal = strToUsize(fld.getText(vpnl, <span class="tok-builtin">@intFromEnum</span>(fp02.fscal))  <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>);</span>
<span class="line" id="L1235"></span>
<span class="line" id="L1236">		<span class="tok-kw">if</span> (width + scal + vfld.posx &gt;= vpnl.cols) {</span>
<span class="line" id="L1237">			<span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,</span>
<span class="line" id="L1238">				<span class="tok-str">&quot;the length of the zone is excessive&quot;</span>, .{})</span>
<span class="line" id="L1239">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };			</span>
<span class="line" id="L1240">			pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L1241"></span>
<span class="line" id="L1242">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1243">		}</span>
<span class="line" id="L1244">	}</span>
<span class="line" id="L1245">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1246">}</span>
<span class="line" id="L1247"></span>
<span class="line" id="L1248"><span class="tok-kw">fn</span> <span class="tok-fn">TaskErrmsg</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1249">	<span class="tok-kw">if</span> (!vfld.zwitch <span class="tok-kw">and</span> std.mem.eql(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, vfld.text)) {</span>
<span class="line" id="L1250">		pnl.msgErr(vpnl, <span class="tok-str">&quot;the error message text is invalid&quot;</span>);</span>
<span class="line" id="L1251">		vpnl.keyField = kbd.task;</span>
<span class="line" id="L1252">	}</span>
<span class="line" id="L1253"></span>
<span class="line" id="L1254">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1255">}</span>
<span class="line" id="L1256"></span>
<span class="line" id="L1257"><span class="tok-kw">fn</span> <span class="tok-fn">TaskFunc</span>(vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1258">	<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;FUNC&quot;</span>)) {</span>
<span class="line" id="L1259">		<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, vfld.procfunc)) {</span>
<span class="line" id="L1260">			pnl.msgErr(vpnl, <span class="tok-str">&quot;the function name is invalid&quot;</span>);</span>
<span class="line" id="L1261">			vpnl.keyField = kbd.task;</span>
<span class="line" id="L1262">		}</span>
<span class="line" id="L1263">	}</span>
<span class="line" id="L1264"></span>
<span class="line" id="L1265">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1266">}</span>
<span class="line" id="L1267"><span class="tok-kw">var</span> callTask: TaskEnum = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1268"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1269"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1270"><span class="tok-comment">/// run emun Function ex: combo</span></span>
<span class="line" id="L1271"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> TaskEnum = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L1272">	TaskName,</span>
<span class="line" id="L1273">	TaskType,</span>
<span class="line" id="L1274">	TaskWidth,</span>
<span class="line" id="L1275">	TaskScal,</span>
<span class="line" id="L1276">	TaskEdtcar,</span>
<span class="line" id="L1277">	TaskErrmsg,</span>
<span class="line" id="L1278">	TaskFunc,</span>
<span class="line" id="L1279">	none,</span>
<span class="line" id="L1280"></span>
<span class="line" id="L1281">	<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">run</span>(self: TaskEnum, vpnl: *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1282">		<span class="tok-kw">switch</span> (self) {</span>
<span class="line" id="L1283">			.TaskName	=&gt; TaskName(vpnl, vfld),</span>
<span class="line" id="L1284">			.TaskType	=&gt; TaskType(vpnl, vfld),</span>
<span class="line" id="L1285">			.TaskWidth	=&gt; TaskWidth(vpnl, vfld),</span>
<span class="line" id="L1286">			.TaskScal	=&gt; TaskScal(vpnl, vfld),</span>
<span class="line" id="L1287">			.TaskEdtcar	=&gt; TaskEdtcar(vpnl, vfld),</span>
<span class="line" id="L1288">			.TaskErrmsg =&gt; TaskErrmsg(vpnl, vfld),</span>
<span class="line" id="L1289">			.TaskFunc 	=&gt; TaskFunc(vpnl, vfld),</span>
<span class="line" id="L1290"></span>
<span class="line" id="L1291">			<span class="tok-kw">else</span> =&gt; dsperr.errorForms(vpnl, ErrMain.main_run_EnumTask_invalide),</span>
<span class="line" id="L1292">		}</span>
<span class="line" id="L1293">	}</span>
<span class="line" id="L1294">	<span class="tok-kw">fn</span> <span class="tok-fn">searchFn</span>(vtext: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) TaskEnum {</span>
<span class="line" id="L1295">		<span class="tok-kw">var</span> max: <span class="tok-type">usize</span> = <span class="tok-builtin">@typeInfo</span>(TaskEnum).Enum.fields.len;</span>
<span class="line" id="L1296"></span>
<span class="line" id="L1297">		<span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(TaskEnum).Enum.fields) |f| {</span>
<span class="line" id="L1298">			<span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vtext)) <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(TaskEnum, <span class="tok-builtin">@enumFromInt</span>(f.value));</span>
<span class="line" id="L1299">		}</span>
<span class="line" id="L1300">		<span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(TaskEnum, <span class="tok-builtin">@enumFromInt</span>(max));</span>
<span class="line" id="L1301">	}</span>
<span class="line" id="L1302">};</span>
<span class="line" id="L1303"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L1304"></span>
<span class="line" id="L1305"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">writefield</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L1306">	term.getCursor();</span>
<span class="line" id="L1307">	<span class="tok-kw">var</span> v_posx: <span class="tok-type">usize</span> = term.posCurs.x;</span>
<span class="line" id="L1308">	<span class="tok-kw">var</span> v_posy: <span class="tok-type">usize</span> = term.posCurs.y;</span>
<span class="line" id="L1309"></span>
<span class="line" id="L1310">	<span class="tok-kw">if</span> (v_posx &lt; <span class="tok-number">15</span>) v_posx = <span class="tok-number">15</span> <span class="tok-kw">else</span> v_posx = <span class="tok-number">2</span>;</span>
<span class="line" id="L1311"></span>
<span class="line" id="L1312">	<span class="tok-comment">// Init format panel</span>
</span>
<span class="line" id="L1313">	<span class="tok-kw">var</span> pFmt02 = Panel_Fmt02(v_posx);</span>
<span class="line" id="L1314"></span>
<span class="line" id="L1315">	v_posx = term.posCurs.x;</span>
<span class="line" id="L1316">	<span class="tok-comment">// init zone field</span>
</span>
<span class="line" id="L1317">	fld.setText(pFmt02, <span class="tok-builtin">@intFromEnum</span>(fp02.fposx), std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>, .{v_posx})</span>
<span class="line" id="L1318">		<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1319">	fld.setText(pFmt02, <span class="tok-builtin">@intFromEnum</span>(fp02.fposy), std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>, .{v_posy})</span>
<span class="line" id="L1320">		<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1321"></span>
<span class="line" id="L1322">	<span class="tok-comment">// init struct key</span>
</span>
<span class="line" id="L1323">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>; <span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L1324">	<span class="tok-kw">var</span> idx: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1325">	<span class="tok-kw">var</span> vReftyp: dds.REFTYP = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1326">	<span class="tok-kw">var</span> vText: []<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1327">	<span class="tok-kw">var</span> vlen: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1328">	<span class="tok-kw">var</span> vText2: []<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1329">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1330">		<span class="tok-comment">//Tkey = kbd.getKEY();</span>
</span>
<span class="line" id="L1331"></span>
<span class="line" id="L1332">		forms.dspCursor(vpnl, v_posx, v_posy,<span class="tok-str">&quot;Field&quot;</span>);</span>
<span class="line" id="L1333">		Tkey.Key = pnl.ioPanel(pFmt02);</span>
<span class="line" id="L1334">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L1335">			<span class="tok-comment">// call function combo</span>
</span>
<span class="line" id="L1336">			.func =&gt; {</span>
<span class="line" id="L1337">				callFunc = FuncEnum.searchFn(pFmt02.field.items[pFmt02.idxfld].procfunc);</span>
<span class="line" id="L1338">				callFunc.run(pFmt02, &amp;pFmt02.field.items[pFmt02.idxfld]);</span>
<span class="line" id="L1339">			},</span>
<span class="line" id="L1340">			<span class="tok-comment">// call proc control chek value</span>
</span>
<span class="line" id="L1341">			.task =&gt; {</span>
<span class="line" id="L1342">				callTask = TaskEnum.searchFn(pFmt02.field.items[pFmt02.idxfld].proctask);</span>
<span class="line" id="L1343">				callTask.run(pFmt02, &amp;pFmt02.field.items[pFmt02.idxfld]);</span>
<span class="line" id="L1344">			},</span>
<span class="line" id="L1345">			<span class="tok-comment">// write field to panel</span>
</span>
<span class="line" id="L1346">			.F9 =&gt; {</span>
<span class="line" id="L1347">				vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1348">				vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1349">				</span>
<span class="line" id="L1350">				vReftyp = strToEnum(dds.REFTYP, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftype)].text);</span>
<span class="line" id="L1351">				<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'#'</span>);</span>
<span class="line" id="L1352"></span>
<span class="line" id="L1353">				<span class="tok-kw">switch</span> (vReftyp) {</span>
<span class="line" id="L1354">					dds.REFTYP.TEXT_FREE =&gt; {</span>
<span class="line" id="L1355">						vpnl.field.append(fld.newFieldTextFree(</span>
<span class="line" id="L1356">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1357">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1358">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1359">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1360">							 <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1361">							 pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1362">							 pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1363">							 pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1364">						)</span>
<span class="line" id="L1365">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1366"></span>
<span class="line" id="L1367">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1368">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1369">						</span>
<span class="line" id="L1370">						fld.setText(</span>
<span class="line" id="L1371">							vpnl,</span>
<span class="line" id="L1372">							idx,</span>
<span class="line" id="L1373">							vText,</span>
<span class="line" id="L1374">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1375">					},</span>
<span class="line" id="L1376"></span>
<span class="line" id="L1377">					dds.REFTYP.TEXT_FULL =&gt; {</span>
<span class="line" id="L1378">						vpnl.field.append(fld.newFieldTextFull(</span>
<span class="line" id="L1379">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1380">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1381">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1382">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1383">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1384">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1385">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1386">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1387">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1388"></span>
<span class="line" id="L1389">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1390">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1391"></span>
<span class="line" id="L1392">						fld.setText(</span>
<span class="line" id="L1393">							vpnl,</span>
<span class="line" id="L1394">							idx,</span>
<span class="line" id="L1395">							vText,</span>
<span class="line" id="L1396">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1397">					},</span>
<span class="line" id="L1398"></span>
<span class="line" id="L1399">					dds.REFTYP.ALPHA =&gt; {</span>
<span class="line" id="L1400">						vpnl.field.append(fld.newFieldAlpha(</span>
<span class="line" id="L1401">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1402">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1403">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1404">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1405">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1406">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1407">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1408">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1409">							<span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1410">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1411"></span>
<span class="line" id="L1412">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1413">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1414"></span>
<span class="line" id="L1415">						fld.setText(</span>
<span class="line" id="L1416">							vpnl,</span>
<span class="line" id="L1417">							idx,</span>
<span class="line" id="L1418">							vText,</span>
<span class="line" id="L1419">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1420">					},</span>
<span class="line" id="L1421"></span>
<span class="line" id="L1422">					dds.REFTYP.ALPHA_UPPER =&gt; {</span>
<span class="line" id="L1423">						vpnl.field.append(fld.newFieldAlphaUpper(</span>
<span class="line" id="L1424">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1425">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1426">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1427">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1428">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1429">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1430">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1431">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1432">							<span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1433">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1434"></span>
<span class="line" id="L1435">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1436">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1437"></span>
<span class="line" id="L1438">						fld.setText(</span>
<span class="line" id="L1439">							vpnl,</span>
<span class="line" id="L1440">							idx,</span>
<span class="line" id="L1441">							vText,</span>
<span class="line" id="L1442">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1443">					},</span>
<span class="line" id="L1444"></span>
<span class="line" id="L1445">					dds.REFTYP.ALPHA_NUMERIC =&gt; {</span>
<span class="line" id="L1446">						vpnl.field.append(fld.newFieldAlphaNumeric(</span>
<span class="line" id="L1447">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1448">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1449">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1450">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1451">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1452">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1453">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1454">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1455"></span>
<span class="line" id="L1456">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1457">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1458"></span>
<span class="line" id="L1459">						fld.setText(</span>
<span class="line" id="L1460">							vpnl,  </span>
<span class="line" id="L1461">							idx,</span>
<span class="line" id="L1462">							vText,</span>
<span class="line" id="L1463">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1464">					},</span>
<span class="line" id="L1465"></span>
<span class="line" id="L1466">					dds.REFTYP.ALPHA_NUMERIC_UPPER =&gt; {</span>
<span class="line" id="L1467">						vpnl.field.append(fld.newFieldAlphaNumericUpper(</span>
<span class="line" id="L1468">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1469">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1470">							 strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1471">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1472">							<span class="tok-str">&quot;&quot;</span>, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1473">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1474">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1475">							<span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| {</span>
<span class="line" id="L1476">							<span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));</span>
<span class="line" id="L1477">						};</span>
<span class="line" id="L1478"></span>
<span class="line" id="L1479">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1480">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1481"></span>
<span class="line" id="L1482">						fld.setText(</span>
<span class="line" id="L1483">							vpnl,  </span>
<span class="line" id="L1484">							idx,</span>
<span class="line" id="L1485">							vText,</span>
<span class="line" id="L1486">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1487">					},</span>
<span class="line" id="L1488"></span>
<span class="line" id="L1489">					dds.REFTYP.PASSWORD =&gt; {</span>
<span class="line" id="L1490">						vpnl.field.append(fld.newFieldPassword(</span>
<span class="line" id="L1491">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1492">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1493">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1494">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1495">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1496">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1497">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1498">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1499">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1500"></span>
<span class="line" id="L1501">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1502">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1503"></span>
<span class="line" id="L1504">						fld.setText(</span>
<span class="line" id="L1505">							vpnl,</span>
<span class="line" id="L1506">							idx,</span>
<span class="line" id="L1507">							vText,</span>
<span class="line" id="L1508">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1509">					},</span>
<span class="line" id="L1510"></span>
<span class="line" id="L1511">					dds.REFTYP.YES_NO =&gt; {</span>
<span class="line" id="L1512">						vpnl.field.append(fld.newFieldYesNo(</span>
<span class="line" id="L1513">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1514">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1515">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1516">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1517">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1518">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1519">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1520">						)) </span>
<span class="line" id="L1521">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1522"></span>
<span class="line" id="L1523">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1524">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1525"></span>
<span class="line" id="L1526">						fld.setText(</span>
<span class="line" id="L1527">							vpnl,</span>
<span class="line" id="L1528">							idx,</span>
<span class="line" id="L1529">							vText,</span>
<span class="line" id="L1530">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1531">					},</span>
<span class="line" id="L1532"></span>
<span class="line" id="L1533">					dds.REFTYP.UDIGIT =&gt; {</span>
<span class="line" id="L1534">						vpnl.field.append(fld.newFieldUDigit(</span>
<span class="line" id="L1535">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1536">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1537">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1538">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1539">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1540">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1541">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1542">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1543">							<span class="tok-str">&quot;&quot;</span>)</span>
<span class="line" id="L1544">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1545"></span>
<span class="line" id="L1546">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1547">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1548">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1549"></span>
<span class="line" id="L1550">						<span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1551">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1552">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1553">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text })</span>
<span class="line" id="L1554">								 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1555">						}</span>
<span class="line" id="L1556">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1557">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1558">						</span>
<span class="line" id="L1559">						fld.setText(</span>
<span class="line" id="L1560">							vpnl,</span>
<span class="line" id="L1561">							idx,</span>
<span class="line" id="L1562">							vText,</span>
<span class="line" id="L1563">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1564">					},</span>
<span class="line" id="L1565"></span>
<span class="line" id="L1566">					dds.REFTYP.DIGIT =&gt; {</span>
<span class="line" id="L1567">						vpnl.field.append(fld.newFieldDigit(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1568">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1569">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1570">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1571">							<span class="tok-str">&quot;&quot;</span>, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1572">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1573">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1574">							<span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1575">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1576"></span>
<span class="line" id="L1577">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1578">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1579">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1580"></span>
<span class="line" id="L1581">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s}&quot;</span>, .{vText})</span>
<span class="line" id="L1582">								<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1583">						<span class="tok-comment">//editcar</span>
</span>
<span class="line" id="L1584">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1585">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1586">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text }</span>
<span class="line" id="L1587">							) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1588">						}</span>
<span class="line" id="L1589"></span>
<span class="line" id="L1590">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1591">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1592"></span>
<span class="line" id="L1593">						fld.setText(</span>
<span class="line" id="L1594">							vpnl,</span>
<span class="line" id="L1595">							idx,</span>
<span class="line" id="L1596">							vText,</span>
<span class="line" id="L1597">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1598">					},</span>
<span class="line" id="L1599"></span>
<span class="line" id="L1600">					dds.REFTYP.UDECIMAL =&gt; {</span>
<span class="line" id="L1601">						vpnl.field.append(fld.newFieldUDecimal(</span>
<span class="line" id="L1602">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1603">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1604">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1605">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1606">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text),</span>
<span class="line" id="L1607">							<span class="tok-str">&quot;&quot;</span>, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1608">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1609">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1610">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1611"></span>
<span class="line" id="L1612">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1613">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1614">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1615">						</span>
<span class="line" id="L1616">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text);</span>
<span class="line" id="L1617">						vText2 = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1618">						<span class="tok-builtin">@memset</span>(vText2[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1619">						</span>
<span class="line" id="L1620">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s},{s}&quot;</span>, .{ vText, vText2 })</span>
<span class="line" id="L1621">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1622"></span>
<span class="line" id="L1623">						<span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1624"></span>
<span class="line" id="L1625">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1626">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1627">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text })</span>
<span class="line" id="L1628">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1629">						}</span>
<span class="line" id="L1630"></span>
<span class="line" id="L1631">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1632">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1633"></span>
<span class="line" id="L1634">						fld.setText(</span>
<span class="line" id="L1635">							vpnl,</span>
<span class="line" id="L1636">							idx,</span>
<span class="line" id="L1637">							vText,</span>
<span class="line" id="L1638">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1639">					},</span>
<span class="line" id="L1640"></span>
<span class="line" id="L1641">					dds.REFTYP.DECIMAL =&gt; {</span>
<span class="line" id="L1642">						vpnl.field.append(fld.newFieldDecimal(</span>
<span class="line" id="L1643">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1644">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1645">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1646">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1647">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text),</span>
<span class="line" id="L1648">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1649">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1650">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1651">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1652">							<span class="tok-str">&quot;&quot;</span>)) </span>
<span class="line" id="L1653">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1654"></span>
<span class="line" id="L1655">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1656">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1657">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1658">						</span>
<span class="line" id="L1659">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text);</span>
<span class="line" id="L1660">						vText2 = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1661">						<span class="tok-builtin">@memset</span>(vText2[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>);</span>
<span class="line" id="L1662">						</span>
<span class="line" id="L1663">						vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;+{s},{s}&quot;</span>, .{ vText, vText2 })</span>
<span class="line" id="L1664">							<span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1665"></span>
<span class="line" id="L1666">						<span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1667">						<span class="tok-kw">if</span> (pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1668">							vText = std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{s}{s}&quot;</span>, .{</span>
<span class="line" id="L1669">								vText, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text })</span>
<span class="line" id="L1670">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1671">						}</span>
<span class="line" id="L1672"></span>
<span class="line" id="L1673">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1674">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1675"></span>
<span class="line" id="L1676">						fld.setText(</span>
<span class="line" id="L1677">							vpnl,</span>
<span class="line" id="L1678">							idx,</span>
<span class="line" id="L1679">							vText,</span>
<span class="line" id="L1680">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1681">					},</span>
<span class="line" id="L1682"></span>
<span class="line" id="L1683">					dds.REFTYP.DATE_ISO =&gt; {</span>
<span class="line" id="L1684">						vpnl.field.append(fld.newFieldDateISO(</span>
<span class="line" id="L1685">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1686">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1687">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1688">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1689">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1690">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1691">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1692">						))</span>
<span class="line" id="L1693">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1694"></span>
<span class="line" id="L1695">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1696">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1697"></span>
<span class="line" id="L1698">						fld.setText(</span>
<span class="line" id="L1699">							vpnl,</span>
<span class="line" id="L1700">							idx,</span>
<span class="line" id="L1701">							<span class="tok-str">&quot;YYYY/MM/DD&quot;</span>,</span>
<span class="line" id="L1702">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1703">					},</span>
<span class="line" id="L1704">					dds.REFTYP.DATE_FR =&gt; {</span>
<span class="line" id="L1705">						vpnl.field.append(fld.newFieldDateFR(</span>
<span class="line" id="L1706">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1707">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1708">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1709">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1710">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1711">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1712">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1713">						)) </span>
<span class="line" id="L1714">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1715">							</span>
<span class="line" id="L1716">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1717">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1718"></span>
<span class="line" id="L1719">						fld.setText(</span>
<span class="line" id="L1720">							vpnl,</span>
<span class="line" id="L1721">							idx,</span>
<span class="line" id="L1722">							<span class="tok-str">&quot;DD/MM/YYYY&quot;</span>,</span>
<span class="line" id="L1723">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1724">					},</span>
<span class="line" id="L1725"></span>
<span class="line" id="L1726">					dds.REFTYP.DATE_US =&gt; {</span>
<span class="line" id="L1727">						vpnl.field.append(fld.newFieldDateUS(</span>
<span class="line" id="L1728">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1729">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1730">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1731">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1732">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1733">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1734">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1735">						)) </span>
<span class="line" id="L1736">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1737">							</span>
<span class="line" id="L1738">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1739">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1740"></span>
<span class="line" id="L1741">						fld.setText(</span>
<span class="line" id="L1742">							vpnl,</span>
<span class="line" id="L1743">							idx,</span>
<span class="line" id="L1744">							<span class="tok-str">&quot;MM/DD/YYYY&quot;</span>,</span>
<span class="line" id="L1745">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1746">					},</span>
<span class="line" id="L1747"></span>
<span class="line" id="L1748">					dds.REFTYP.TELEPHONE =&gt; {</span>
<span class="line" id="L1749">						vpnl.field.append(fld.newFieldTelephone(</span>
<span class="line" id="L1750">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1751">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1752">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1753">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1754">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1755">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1756">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1757">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text, <span class="tok-str">&quot;&quot;</span>))</span>
<span class="line" id="L1758">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1759"></span>
<span class="line" id="L1760">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1761">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1762">						</span>
<span class="line" id="L1763">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1764">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1765">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'*'</span>);</span>
<span class="line" id="L1766">						</span>
<span class="line" id="L1767">						fld.setText(</span>
<span class="line" id="L1768">							vpnl,</span>
<span class="line" id="L1769">							idx,</span>
<span class="line" id="L1770">							vText,</span>
<span class="line" id="L1771">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1772">					},</span>
<span class="line" id="L1773"></span>
<span class="line" id="L1774">					dds.REFTYP.MAIL_ISO =&gt; {</span>
<span class="line" id="L1775">						vpnl.field.append(fld.newFieldMail(</span>
<span class="line" id="L1776">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1777">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1778">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1779">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1780">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1781">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1782">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1783">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1784">						)) </span>
<span class="line" id="L1785">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1786"></span>
<span class="line" id="L1787">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1788">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1789"></span>
<span class="line" id="L1790">						vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1791">						vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1792">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'@'</span>);</span>
<span class="line" id="L1793">						</span>
<span class="line" id="L1794">						fld.setText(</span>
<span class="line" id="L1795">							vpnl,</span>
<span class="line" id="L1796">							idx,</span>
<span class="line" id="L1797">							vText,</span>
<span class="line" id="L1798">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1799">					},</span>
<span class="line" id="L1800"></span>
<span class="line" id="L1801">					dds.REFTYP.SWITCH =&gt; {</span>
<span class="line" id="L1802">						vpnl.field.append(fld.newFieldSwitch(</span>
<span class="line" id="L1803">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1804">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1805">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1806">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1807">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1808">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text))</span>
<span class="line" id="L1809">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1810"></span>
<span class="line" id="L1811">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1812">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1813"></span>
<span class="line" id="L1814">						</span>
<span class="line" id="L1815">						fld.setText(</span>
<span class="line" id="L1816">							vpnl,</span>
<span class="line" id="L1817">							idx,</span>
<span class="line" id="L1818">							dds.CTRUE,</span>
<span class="line" id="L1819">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1820">					},</span>
<span class="line" id="L1821"></span>
<span class="line" id="L1822">					dds.REFTYP.FUNC =&gt; {</span>
<span class="line" id="L1823">						vpnl.field.append(fld.newFieldFunc(</span>
<span class="line" id="L1824">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1825">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1826">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1827">							strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1828">							<span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1829">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1830">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc)].text,</span>
<span class="line" id="L1831">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1832">							pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text))</span>
<span class="line" id="L1833">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1834"></span>
<span class="line" id="L1835">						idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1836">							<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1837">						<span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'F'</span>);</span>
<span class="line" id="L1838">						fld.setText(</span>
<span class="line" id="L1839">							vpnl,</span>
<span class="line" id="L1840">							idx,</span>
<span class="line" id="L1841">							vText,</span>
<span class="line" id="L1842">						) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1843">					}</span>
<span class="line" id="L1844">				}</span>
<span class="line" id="L1845">				idx = fld.getIndex(vpnl, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1846">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1847">					</span>
<span class="line" id="L1848">				fld.setEdtcar(vpnl, idx, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text)</span>
<span class="line" id="L1849">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1850">					</span>
<span class="line" id="L1851">				fld.setTask(vpnl, idx, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftask)].text)</span>
<span class="line" id="L1852">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1853">					</span>
<span class="line" id="L1854">				fld.setProtect(vpnl, idx, pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fprotect)].zwitch)</span>
<span class="line" id="L1855">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1856">					</span>
<span class="line" id="L1857">				pnl.freePanel(pFmt02);</span>
<span class="line" id="L1858">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt02);</span>
<span class="line" id="L1859">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L1860">			},</span>
<span class="line" id="L1861"></span>
<span class="line" id="L1862">			<span class="tok-comment">// exit panel field</span>
</span>
<span class="line" id="L1863">			.F12 =&gt; {</span>
<span class="line" id="L1864">				pnl.freePanel(pFmt02);</span>
<span class="line" id="L1865">				<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt02);</span>
<span class="line" id="L1866">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L1867">			},</span>
<span class="line" id="L1868">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L1869">		}</span>
<span class="line" id="L1870">	}</span>
<span class="line" id="L1871">}</span>
<span class="line" id="L1872"></span>
<span class="line" id="L1873"><span class="tok-comment">// Order field</span>
</span>
<span class="line" id="L1874"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">orderField</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L1875">	<span class="tok-kw">var</span> idxligne: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1876">	<span class="tok-kw">const</span> allocatorOrder = std.heap.page_allocator;</span>
<span class="line" id="L1877">	<span class="tok-kw">var</span> newfield = std.ArrayList(fld.FIELD).init(allocatorOrder);</span>
<span class="line" id="L1878">	<span class="tok-kw">var</span> savfield = std.ArrayList(fld.FIELD).init(allocatorOrder);</span>
<span class="line" id="L1879"></span>
<span class="line" id="L1880">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1881">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L1882"></span>
<span class="line" id="L1883">	<span class="tok-kw">for</span> (vpnl.field.items) |p| {</span>
<span class="line" id="L1884">		savfield.append(p) </span>
<span class="line" id="L1885">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1886">	}</span>
<span class="line" id="L1887"></span>
<span class="line" id="L1888">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L1889">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L1890">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1891">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1892">		<span class="tok-number">32</span>,</span>
<span class="line" id="L1893">		grd.gridStyle,</span>
<span class="line" id="L1894">		dds.CADRE.line1,</span>
<span class="line" id="L1895">	);</span>
<span class="line" id="L1896">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L1897"></span>
<span class="line" id="L1898">	<span class="tok-kw">var</span> Order: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L1899">		<span class="tok-str">&quot;Order&quot;</span>,</span>
<span class="line" id="L1900">		<span class="tok-number">2</span>,</span>
<span class="line" id="L1901">		<span class="tok-number">70</span>,</span>
<span class="line" id="L1902">		<span class="tok-number">32</span>,</span>
<span class="line" id="L1903">		grd.gridStyle,</span>
<span class="line" id="L1904">		dds.CADRE.line1,</span>
<span class="line" id="L1905">	);</span>
<span class="line" id="L1906">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Order);</span>
<span class="line" id="L1907"></span>
<span class="line" id="L1908">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1909">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L1910">	grd.newCell(Origine, <span class="tok-str">&quot;reftype&quot;</span>, <span class="tok-number">20</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1911">	grd.newCell(Origine, <span class="tok-str">&quot;X&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1912">	grd.newCell(Origine, <span class="tok-str">&quot;Y&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1913">	grd.newCell(Origine, <span class="tok-str">&quot;width&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1914">	grd.newCell(Origine, <span class="tok-str">&quot;scal&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1915">	grd.setHeaders(Origine);</span>
<span class="line" id="L1916"></span>
<span class="line" id="L1917">	grd.newCell(Order, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1918">	grd.newCell(Order, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L1919">	grd.newCell(Order, <span class="tok-str">&quot;reftype&quot;</span>, <span class="tok-number">20</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1920">	grd.newCell(Order, <span class="tok-str">&quot;X&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgCyan);</span>
<span class="line" id="L1921">	grd.newCell(Order, <span class="tok-str">&quot;Y&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgCyan);</span>
<span class="line" id="L1922">	grd.newCell(Order, <span class="tok-str">&quot;width&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1923">	grd.newCell(Order, <span class="tok-str">&quot;scal&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L1924">	grd.setHeaders(Order);</span>
<span class="line" id="L1925"></span>
<span class="line" id="L1926">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1927">		grd.resetRows(Origine);</span>
<span class="line" id="L1928">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L1929">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L1930">			</span>
<span class="line" id="L1931">			<span class="tok-kw">var</span> posx = usizeToStr(f.posx) ;</span>
<span class="line" id="L1932">			<span class="tok-kw">var</span> posy = usizeToStr(f.posy) ;</span>
<span class="line" id="L1933">			<span class="tok-kw">var</span> width= usizeToStr(f.width) ;</span>
<span class="line" id="L1934">			<span class="tok-kw">var</span> scal = usizeToStr(f.scal) ;</span>
<span class="line" id="L1935"></span>
<span class="line" id="L1936">			grd.addRows(Origine, &amp;.{ ridx, f.name, <span class="tok-builtin">@tagName</span>(f.reftyp), posx , posy, width,scal });</span>
<span class="line" id="L1937">		}</span>
<span class="line" id="L1938"></span>
<span class="line" id="L1939">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L1940">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L1941">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L1942">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L1943">			newfield.append(vpnl.field.items[ strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>])])</span>
<span class="line" id="L1944">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1945"></span>
<span class="line" id="L1946">			<span class="tok-kw">var</span> ridn =usizeToStr(idxligne);</span>
<span class="line" id="L1947"> </span>
<span class="line" id="L1948">			grd.addRows(Order, &amp;.{ ridn, Gkey.Buf.items[<span class="tok-number">1</span>], Gkey.Buf.items[<span class="tok-number">2</span>],</span>
<span class="line" id="L1949">				Gkey.Buf.items[<span class="tok-number">3</span>], Gkey.Buf.items[<span class="tok-number">4</span>], Gkey.Buf.items[<span class="tok-number">5</span>], Gkey.Buf.items[<span class="tok-number">6</span>] });</span>
<span class="line" id="L1950">			idxligne += <span class="tok-number">1</span>;</span>
<span class="line" id="L1951">			grd.printGridHeader(Order);</span>
<span class="line" id="L1952">			grd.printGridRows(Order);</span>
<span class="line" id="L1953">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L1954"></span>
<span class="line" id="L1955">			_ = vpnl.field.orderedRemove(ligne);</span>
<span class="line" id="L1956">		}</span>
<span class="line" id="L1957">	}</span>
<span class="line" id="L1958"></span>
<span class="line" id="L1959">	vpnl.field.clearAndFree();</span>
<span class="line" id="L1960">	vpnl.field = std.ArrayList(fld.FIELD).init(dds.allocatorPnl);</span>
<span class="line" id="L1961">	vpnl.field.clearRetainingCapacity();</span>
<span class="line" id="L1962">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L1963">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L1964">		<span class="tok-kw">for</span> (savfield.items) |p| {</span>
<span class="line" id="L1965">			vpnl.field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1966">		}</span>
<span class="line" id="L1967">	}</span>
<span class="line" id="L1968">	<span class="tok-comment">// new Order and exit</span>
</span>
<span class="line" id="L1969">	<span class="tok-kw">else</span> {</span>
<span class="line" id="L1970">		<span class="tok-kw">for</span> (newfield.items) |p| {</span>
<span class="line" id="L1971">			vpnl.field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1972">		}</span>
<span class="line" id="L1973">	}</span>
<span class="line" id="L1974"></span>
<span class="line" id="L1975">	grd.freeGrid(Origine);</span>
<span class="line" id="L1976">	grd.freeGrid(Order);</span>
<span class="line" id="L1977"></span>
<span class="line" id="L1978">	newfield.clearAndFree();</span>
<span class="line" id="L1979">	newfield.deinit();</span>
<span class="line" id="L1980"></span>
<span class="line" id="L1981">	savfield.clearAndFree();</span>
<span class="line" id="L1982">	savfield.deinit();</span>
<span class="line" id="L1983"></span>
<span class="line" id="L1984">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L1985">}</span>
<span class="line" id="L1986"><span class="tok-comment">// remove Field</span>
</span>
<span class="line" id="L1987"><span class="tok-kw">fn</span> <span class="tok-fn">removeField</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L1988">	<span class="tok-kw">const</span> allocatorRemove = std.heap.page_allocator;</span>
<span class="line" id="L1989">	<span class="tok-kw">var</span> savfield: std.ArrayList(fld.FIELD) = std.ArrayList(fld.FIELD).init(allocatorRemove);</span>
<span class="line" id="L1990"></span>
<span class="line" id="L1991">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1992">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L1993"></span>
<span class="line" id="L1994">	<span class="tok-kw">for</span> (vpnl.field.items) |p| {</span>
<span class="line" id="L1995">		savfield.append(p)  </span>
<span class="line" id="L1996">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L1997">	}</span>
<span class="line" id="L1998"></span>
<span class="line" id="L1999">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L2000">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L2001">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2002">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2003">		<span class="tok-number">32</span>,</span>
<span class="line" id="L2004">		grd.gridStyle,</span>
<span class="line" id="L2005">		dds.CADRE.line1,</span>
<span class="line" id="L2006">	);</span>
<span class="line" id="L2007">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L2008"></span>
<span class="line" id="L2009">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2010">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L2011">	grd.newCell(Origine, <span class="tok-str">&quot;reftype&quot;</span>, <span class="tok-number">20</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2012">	grd.newCell(Origine, <span class="tok-str">&quot;X&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2013">	grd.newCell(Origine, <span class="tok-str">&quot;Y&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2014">	grd.newCell(Origine, <span class="tok-str">&quot;width&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT , dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2015">	grd.newCell(Origine, <span class="tok-str">&quot;scal&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2016">	grd.setHeaders(Origine);</span>
<span class="line" id="L2017"></span>
<span class="line" id="L2018">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L2019">		grd.resetRows(Origine);</span>
<span class="line" id="L2020">		<span class="tok-kw">for</span> (vpnl.field.items, <span class="tok-number">0</span>..) |f, idx| {</span>
<span class="line" id="L2021">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L2022">			</span>
<span class="line" id="L2023">			<span class="tok-kw">var</span> posx = usizeToStr(f.posx) ;</span>
<span class="line" id="L2024">			<span class="tok-kw">var</span> posy = usizeToStr(f.posy) ;</span>
<span class="line" id="L2025">			<span class="tok-kw">var</span> width= usizeToStr(f.width) ;</span>
<span class="line" id="L2026">			<span class="tok-kw">var</span> scal = usizeToStr(f.scal) ;</span>
<span class="line" id="L2027">			grd.addRows(Origine, &amp;.{ ridx, f.name, <span class="tok-builtin">@tagName</span>(f.reftyp), posx , posy, width, scal });</span>
<span class="line" id="L2028">		}</span>
<span class="line" id="L2029"></span>
<span class="line" id="L2030">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L2031">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2032">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2033">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L2034">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L2035"></span>
<span class="line" id="L2036">			_ = vpnl.field.orderedRemove(ligne);</span>
<span class="line" id="L2037">		}</span>
<span class="line" id="L2038">	}</span>
<span class="line" id="L2039"></span>
<span class="line" id="L2040">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L2041">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L2042">		vpnl.field.clearAndFree();</span>
<span class="line" id="L2043">		vpnl.field = std.ArrayList(fld.FIELD).init(dds.allocatorPnl);</span>
<span class="line" id="L2044">		vpnl.field.clearRetainingCapacity();</span>
<span class="line" id="L2045"></span>
<span class="line" id="L2046">		<span class="tok-kw">for</span> (savfield.items) |p| {</span>
<span class="line" id="L2047">			vpnl.field.append(p) </span>
<span class="line" id="L2048">			 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2049">		}</span>
<span class="line" id="L2050">	}</span>
<span class="line" id="L2051"></span>
<span class="line" id="L2052">	grd.freeGrid(Origine);</span>
<span class="line" id="L2053"></span>
<span class="line" id="L2054">	savfield.clearAndFree();</span>
<span class="line" id="L2055">	savfield.deinit();</span>
<span class="line" id="L2056">}</span>
<span class="line" id="L2057"></span>
<span class="line" id="L2058"><span class="tok-comment">//------------------------------------------------------------------</span>
</span>
<span class="line" id="L2059"><span class="tok-comment">// definition line horizontal</span>
</span>
<span class="line" id="L2060"></span>
<span class="line" id="L2061"><span class="tok-kw">fn</span> <span class="tok-fn">writeHorizontal</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L2062">	</span>
<span class="line" id="L2063">	<span class="tok-comment">//term.getCursor();</span>
</span>
<span class="line" id="L2064">	<span class="tok-kw">var</span> e_count: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L2065">	<span class="tok-kw">var</span> tampon: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2066">	<span class="tok-kw">var</span> e_LineH = std.ArrayList([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>).init(dds.allocatorUtils);</span>
<span class="line" id="L2067">	<span class="tok-kw">defer</span> e_LineH.deinit();</span>
<span class="line" id="L2068">	<span class="tok-kw">defer</span> dds.allocatorUtils.destroy(&amp;e_LineH);</span>
<span class="line" id="L2069"></span>
<span class="line" id="L2070">	<span class="tok-kw">var</span> e_posx: <span class="tok-type">usize</span> = term.posCurs.x ;</span>
<span class="line" id="L2071">	<span class="tok-kw">var</span> e_posy: <span class="tok-type">usize</span> = term.posCurs.y ;</span>
<span class="line" id="L2072">	<span class="tok-kw">var</span> e_curs: <span class="tok-type">usize</span> = e_posy;</span>
<span class="line" id="L2073"></span>
<span class="line" id="L2074">	<span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L2075">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2076">	<span class="tok-kw">var</span> pFmtH01 = Panel_HELP();</span>
<span class="line" id="L2077"></span>
<span class="line" id="L2078">	<span class="tok-kw">var</span> litem: <span class="tok-type">usize</span> = <span class="tok-number">0</span>; <span class="tok-comment">// type line cadre menu</span>
</span>
<span class="line" id="L2079"> </span>
<span class="line" id="L2080">	<span class="tok-kw">var</span> mDefline = mnu.newMenu(<span class="tok-str">&quot;DefLine&quot;</span>, <span class="tok-comment">// name</span>
</span>
<span class="line" id="L2081">			<span class="tok-number">1</span>, <span class="tok-number">1</span>, <span class="tok-comment">// posx, posy</span>
</span>
<span class="line" id="L2082">			dds.CADRE.line1, <span class="tok-comment">// type line fram</span>
</span>
<span class="line" id="L2083">			dds.MNUVH.vertical, <span class="tok-comment">// type menu vertical / horizontal</span>
</span>
<span class="line" id="L2084">			&amp;.{ <span class="tok-comment">// item</span>
</span>
<span class="line" id="L2085">			<span class="tok-str">&quot;Line 1&quot;</span>,</span>
<span class="line" id="L2086">			<span class="tok-str">&quot;LLine 2&quot;</span>,</span>
<span class="line" id="L2087">			}</span>
<span class="line" id="L2088">		);</span>
<span class="line" id="L2089"></span>
<span class="line" id="L2090"></span>
<span class="line" id="L2091">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L2092">		forms.dspCursor(vpnl, e_posx, e_curs,<span class="tok-str">&quot;Line Horiz.&quot;</span>);</span>
<span class="line" id="L2093"></span>
<span class="line" id="L2094">		Tkey = kbd.getKEY();</span>
<span class="line" id="L2095"></span>
<span class="line" id="L2096">		<span class="tok-comment">//dspMouse(vpnl);  // active display Cursor x/y mouse</span>
</span>
<span class="line" id="L2097">		<span class="tok-comment">//std.debug.print(&quot;Key: {d}  - {d}\n\r&quot;,.{term.posCurs.x, term.posCurs.y});</span>
</span>
<span class="line" id="L2098">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L2099">			.F1	 =&gt; {</span>
<span class="line" id="L2100">				fld.setText(pFmtH01,<span class="tok-number">0</span>,<span class="tok-str">&quot;F12 Abort ctrl-V  ctr-l Line &quot;</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L2101">				fld.setText(pFmtH01,<span class="tok-number">1</span>,<span class="tok-str">&quot;&quot;</span> ) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L2102">				_= pnl.ioPanel(pFmtH01);</span>
<span class="line" id="L2103">				pnl.rstPanel(pFmtH01,vpnl);</span>
<span class="line" id="L2104">				term.gotoXY(<span class="tok-number">1</span>,<span class="tok-number">1</span>);</span>
<span class="line" id="L2105">				<span class="tok-kw">continue</span>;</span>
<span class="line" id="L2106">			},</span>
<span class="line" id="L2107">			</span>
<span class="line" id="L2108">			.F12 =&gt; <span class="tok-kw">return</span>,</span>
<span class="line" id="L2109">			.ctrlL =&gt; {</span>
<span class="line" id="L2110">				litem = <span class="tok-number">0</span>;</span>
<span class="line" id="L2111">				litem = mnu.ioMenu(vpnl,mDefline, litem);</span>
<span class="line" id="L2112">				mnu.rstPanel(mDefline,vpnl);</span>
<span class="line" id="L2113">	 </span>
<span class="line" id="L2114">			},</span>
<span class="line" id="L2115">			.ctrlV =&gt; {</span>
<span class="line" id="L2116">				tampon = std.fmt.allocPrint(dds.allocatorStr, <span class="tok-str">&quot;H{d}{d}&quot;</span>, .{ e_posx, e_posy })</span>
<span class="line" id="L2117">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2118">				<span class="tok-comment">// std.debug.print(&quot;Key: {d}  - {d}      {d} \n\r&quot;,.{e_posx, e_posy, e_count });_= kbd.getKEY();</span>
</span>
<span class="line" id="L2119">				vpnl.lineh.append(lnh.newLine(tampon, e_posx, e_posy, e_count,<span class="tok-builtin">@enumFromInt</span>(litem))) </span>
<span class="line" id="L2120">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2121">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L2122">			},</span>
<span class="line" id="L2123">			.right, .tab =&gt; {</span>
<span class="line" id="L2124">				<span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posy) - <span class="tok-number">1</span>) {</span>
<span class="line" id="L2125">					e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L2126">					e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L2127">				}</span>
<span class="line" id="L2128">			},</span>
<span class="line" id="L2129">			.left, .stab =&gt; {</span>
<span class="line" id="L2130">				<span class="tok-kw">if</span> (e_curs &gt; e_posy) {</span>
<span class="line" id="L2131">					e_count -= <span class="tok-number">1</span>;</span>
<span class="line" id="L2132">					e_curs -= <span class="tok-number">1</span>;</span>
<span class="line" id="L2133">				}</span>
<span class="line" id="L2134">			},</span>
<span class="line" id="L2135">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L2136">		}</span>
<span class="line" id="L2137">	}</span>
<span class="line" id="L2138">}</span>
<span class="line" id="L2139"></span>
<span class="line" id="L2140"><span class="tok-comment">// Order horizontal</span>
</span>
<span class="line" id="L2141"><span class="tok-kw">fn</span> <span class="tok-fn">orderHorizontal</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L2142">	<span class="tok-kw">var</span> idy: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L2143">	<span class="tok-kw">const</span> allocatorOrder = std.heap.page_allocator;</span>
<span class="line" id="L2144">	<span class="tok-kw">var</span> newline = std.ArrayList(lnh.LINE).init(allocatorOrder);</span>
<span class="line" id="L2145">	<span class="tok-kw">var</span> savline = std.ArrayList(lnh.LINE).init(allocatorOrder);</span>
<span class="line" id="L2146"></span>
<span class="line" id="L2147">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2148">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L2149"></span>
<span class="line" id="L2150">	<span class="tok-kw">for</span> (vpnl.lineh.items) |p| {</span>
<span class="line" id="L2151">		savline.append(p)</span>
<span class="line" id="L2152">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };		</span>
<span class="line" id="L2153">	}</span>
<span class="line" id="L2154"></span>
<span class="line" id="L2155">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L2156">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L2157">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2158">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2159">		<span class="tok-number">25</span>,</span>
<span class="line" id="L2160">		grd.gridStyle,</span>
<span class="line" id="L2161">		dds.CADRE.line1,</span>
<span class="line" id="L2162">	);</span>
<span class="line" id="L2163">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L2164"></span>
<span class="line" id="L2165">	<span class="tok-kw">var</span> Order: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L2166">		<span class="tok-str">&quot;Order&quot;</span>,</span>
<span class="line" id="L2167">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2168">		<span class="tok-number">70</span>,</span>
<span class="line" id="L2169">		<span class="tok-number">25</span>,</span>
<span class="line" id="L2170">		grd.gridStyle,</span>
<span class="line" id="L2171">		dds.CADRE.line1,</span>
<span class="line" id="L2172">	);</span>
<span class="line" id="L2173">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Order);</span>
<span class="line" id="L2174"></span>
<span class="line" id="L2175">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2176">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L2177">	grd.setHeaders(Origine);</span>
<span class="line" id="L2178"></span>
<span class="line" id="L2179">	grd.newCell(Order, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2180">	grd.newCell(Order, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L2181">	grd.setHeaders(Order);</span>
<span class="line" id="L2182"></span>
<span class="line" id="L2183">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L2184">		grd.resetRows(Origine);</span>
<span class="line" id="L2185">		<span class="tok-kw">for</span> (vpnl.lineh.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L2186">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L2187"></span>
<span class="line" id="L2188">			grd.addRows(Origine, &amp;.{ ridx, l.name});</span>
<span class="line" id="L2189">		}</span>
<span class="line" id="L2190"></span>
<span class="line" id="L2191">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L2192">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2193">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2194">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L2195">			newline.append(vpnl.lineh.items[strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>])])</span>
<span class="line" id="L2196">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2197">			</span>
<span class="line" id="L2198">			<span class="tok-kw">var</span> ridy = usizeToStr(idy);</span>
<span class="line" id="L2199"></span>
<span class="line" id="L2200">			grd.addRows(Order, &amp;.{ ridy, Gkey.Buf.items[<span class="tok-number">1</span>]});</span>
<span class="line" id="L2201">			idy += <span class="tok-number">1</span>;</span>
<span class="line" id="L2202">			grd.printGridHeader(Order);</span>
<span class="line" id="L2203">			grd.printGridRows(Order);</span>
<span class="line" id="L2204">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L2205"></span>
<span class="line" id="L2206">			_ = vpnl.lineh.orderedRemove(ligne);</span>
<span class="line" id="L2207">		}</span>
<span class="line" id="L2208">	}</span>
<span class="line" id="L2209"></span>
<span class="line" id="L2210">	vpnl.lineh.clearAndFree();</span>
<span class="line" id="L2211">	vpnl.lineh = std.ArrayList(lnh.LINE).init(dds.allocatorPnl);</span>
<span class="line" id="L2212">	vpnl.lineh.clearRetainingCapacity();</span>
<span class="line" id="L2213">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L2214">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L2215">		<span class="tok-kw">for</span> (savline.items) |p| {</span>
<span class="line" id="L2216">			vpnl.lineh.append(p)</span>
<span class="line" id="L2217">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2218">		}</span>
<span class="line" id="L2219">	}</span>
<span class="line" id="L2220">	<span class="tok-comment">// new Order and exit CTRL-V</span>
</span>
<span class="line" id="L2221">	<span class="tok-kw">else</span> {</span>
<span class="line" id="L2222">		<span class="tok-kw">for</span> (newline.items) |p| {</span>
<span class="line" id="L2223">			vpnl.lineh.append(p)   </span>
<span class="line" id="L2224">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2225">				 }</span>
<span class="line" id="L2226">	}</span>
<span class="line" id="L2227"></span>
<span class="line" id="L2228">	grd.freeGrid(Origine);</span>
<span class="line" id="L2229">	grd.freeGrid(Order);</span>
<span class="line" id="L2230"></span>
<span class="line" id="L2231">	newline.clearAndFree();</span>
<span class="line" id="L2232">	newline.deinit();</span>
<span class="line" id="L2233"></span>
<span class="line" id="L2234">	savline.clearAndFree();</span>
<span class="line" id="L2235">	savline.deinit();</span>
<span class="line" id="L2236"></span>
<span class="line" id="L2237">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L2238">}</span>
<span class="line" id="L2239"></span>
<span class="line" id="L2240"><span class="tok-comment">// remove Horizontal</span>
</span>
<span class="line" id="L2241"><span class="tok-kw">fn</span> <span class="tok-fn">removeHorizontal</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L2242">	<span class="tok-kw">const</span> allocatorRemove = std.heap.page_allocator;</span>
<span class="line" id="L2243">	<span class="tok-kw">var</span> savline: std.ArrayList(lnh.LINE) = std.ArrayList(lnh.LINE).init(allocatorRemove);</span>
<span class="line" id="L2244"></span>
<span class="line" id="L2245">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2246">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L2247"></span>
<span class="line" id="L2248">	<span class="tok-kw">for</span> (vpnl.lineh.items) |p| {</span>
<span class="line" id="L2249">		savline.append(p)  </span>
<span class="line" id="L2250">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2251">	}</span>
<span class="line" id="L2252"></span>
<span class="line" id="L2253">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L2254">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L2255">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2256">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2257">		<span class="tok-number">25</span>,</span>
<span class="line" id="L2258">		grd.gridStyle,</span>
<span class="line" id="L2259">		dds.CADRE.line1,</span>
<span class="line" id="L2260">	);</span>
<span class="line" id="L2261">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L2262"></span>
<span class="line" id="L2263">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2264">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L2265">	grd.setHeaders(Origine);</span>
<span class="line" id="L2266"></span>
<span class="line" id="L2267">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L2268">		grd.resetRows(Origine);</span>
<span class="line" id="L2269">		<span class="tok-kw">for</span> (vpnl.lineh.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L2270">			<span class="tok-kw">var</span> ridx =  usizeToStr(idx);</span>
<span class="line" id="L2271"> </span>
<span class="line" id="L2272">			grd.addRows(Origine, &amp;.{ ridx, l.name});</span>
<span class="line" id="L2273">		}</span>
<span class="line" id="L2274"></span>
<span class="line" id="L2275">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L2276">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2277">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2278">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L2279">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L2280"></span>
<span class="line" id="L2281">			_ = vpnl.lineh.orderedRemove(ligne);</span>
<span class="line" id="L2282">		}</span>
<span class="line" id="L2283">	}</span>
<span class="line" id="L2284"></span>
<span class="line" id="L2285">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L2286">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L2287">		vpnl.lineh.clearAndFree();</span>
<span class="line" id="L2288">		vpnl.lineh = std.ArrayList(lnh.LINE).init(dds.allocatorPnl);</span>
<span class="line" id="L2289">		vpnl.lineh.clearRetainingCapacity();</span>
<span class="line" id="L2290"></span>
<span class="line" id="L2291">		<span class="tok-kw">for</span> (savline.items) |p| {</span>
<span class="line" id="L2292">			vpnl.lineh.append(p) </span>
<span class="line" id="L2293">			 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2294">		}</span>
<span class="line" id="L2295">	}</span>
<span class="line" id="L2296"></span>
<span class="line" id="L2297">	grd.freeGrid(Origine);</span>
<span class="line" id="L2298"></span>
<span class="line" id="L2299">	savline.clearAndFree();</span>
<span class="line" id="L2300">	savline.deinit();</span>
<span class="line" id="L2301">}</span>
<span class="line" id="L2302"></span>
<span class="line" id="L2303"></span>
<span class="line" id="L2304"><span class="tok-comment">//------------------------------------------------------------------</span>
</span>
<span class="line" id="L2305"><span class="tok-comment">// definition line horizontal</span>
</span>
<span class="line" id="L2306"></span>
<span class="line" id="L2307"><span class="tok-kw">fn</span> <span class="tok-fn">writeVertical</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L2308">	</span>
<span class="line" id="L2309">	<span class="tok-comment">//term.getCursor();</span>
</span>
<span class="line" id="L2310">	<span class="tok-kw">var</span> e_count: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L2311">	<span class="tok-kw">var</span> tampon: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2312">	<span class="tok-kw">var</span> e_LineV = std.ArrayList([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>).init(dds.allocatorUtils);</span>
<span class="line" id="L2313">	<span class="tok-kw">defer</span> e_LineV.deinit();</span>
<span class="line" id="L2314">	<span class="tok-kw">defer</span> dds.allocatorUtils.destroy(&amp;e_LineV);</span>
<span class="line" id="L2315"></span>
<span class="line" id="L2316">	<span class="tok-kw">var</span> e_posx: <span class="tok-type">usize</span> = term.posCurs.x ;</span>
<span class="line" id="L2317">	<span class="tok-kw">var</span> e_posy: <span class="tok-type">usize</span> = term.posCurs.y ;</span>
<span class="line" id="L2318">	<span class="tok-kw">var</span> e_curs: <span class="tok-type">usize</span> = e_posx;</span>
<span class="line" id="L2319"></span>
<span class="line" id="L2320">	<span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L2321">	<span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2322">	<span class="tok-kw">var</span> pFmtH01 = Panel_HELP();</span>
<span class="line" id="L2323"></span>
<span class="line" id="L2324">	<span class="tok-kw">var</span> litem: <span class="tok-type">usize</span> = <span class="tok-number">0</span>; <span class="tok-comment">// type line cadre menu</span>
</span>
<span class="line" id="L2325"> </span>
<span class="line" id="L2326">	<span class="tok-kw">var</span> mDefline = mnu.newMenu(<span class="tok-str">&quot;DefLine&quot;</span>, <span class="tok-comment">// name</span>
</span>
<span class="line" id="L2327">			<span class="tok-number">1</span>, <span class="tok-number">1</span>, <span class="tok-comment">// posx, posy</span>
</span>
<span class="line" id="L2328">			dds.CADRE.line1, <span class="tok-comment">// type line fram</span>
</span>
<span class="line" id="L2329">			dds.MNUVH.vertical, <span class="tok-comment">// type menu vertical / horizontal</span>
</span>
<span class="line" id="L2330">			&amp;.{ <span class="tok-comment">// item</span>
</span>
<span class="line" id="L2331">			<span class="tok-str">&quot;Line 1&quot;</span>,</span>
<span class="line" id="L2332">			<span class="tok-str">&quot;LLine 2&quot;</span>,</span>
<span class="line" id="L2333">			}</span>
<span class="line" id="L2334">		);</span>
<span class="line" id="L2335"></span>
<span class="line" id="L2336">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L2337">		forms.dspCursor(vpnl, e_curs, term.posCurs.y ,<span class="tok-str">&quot;Line Vertical.&quot;</span>);</span>
<span class="line" id="L2338">		Tkey = kbd.getKEY();</span>
<span class="line" id="L2339"></span>
<span class="line" id="L2340">		<span class="tok-comment">//dspMouse(vpnl);  // active display Cursor x/y mouse</span>
</span>
<span class="line" id="L2341">		<span class="tok-comment">//std.debug.print(&quot;Key: {d}  - {d}\n\r&quot;,.{term.posCurs.x, term.posCurs.y});</span>
</span>
<span class="line" id="L2342">		<span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L2343">			.F1	 =&gt; {</span>
<span class="line" id="L2344">				fld.setText(pFmtH01,<span class="tok-number">0</span>,<span class="tok-str">&quot;F12 Abort ctrl-V  ctr-l Line &quot;</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L2345">				fld.setText(pFmtH01,<span class="tok-number">1</span>,<span class="tok-str">&quot;&quot;</span> ) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L2346">				_= pnl.ioPanel(pFmtH01);</span>
<span class="line" id="L2347">				pnl.rstPanel(pFmtH01,vpnl);</span>
<span class="line" id="L2348">				term.gotoXY(<span class="tok-number">1</span>,<span class="tok-number">1</span>);</span>
<span class="line" id="L2349">				<span class="tok-kw">continue</span>;</span>
<span class="line" id="L2350">			},</span>
<span class="line" id="L2351">			</span>
<span class="line" id="L2352">			.F12 =&gt; <span class="tok-kw">return</span>,</span>
<span class="line" id="L2353">			.ctrlL =&gt; {</span>
<span class="line" id="L2354">				litem = <span class="tok-number">0</span>;</span>
<span class="line" id="L2355">				litem = mnu.ioMenu(vpnl,mDefline, litem);</span>
<span class="line" id="L2356">				mnu.rstPanel(mDefline,vpnl);</span>
<span class="line" id="L2357">	 </span>
<span class="line" id="L2358">			},</span>
<span class="line" id="L2359">			.ctrlV =&gt; {</span>
<span class="line" id="L2360">				tampon = std.fmt.allocPrint(dds.allocatorStr, <span class="tok-str">&quot;V{d}{d}&quot;</span>, .{ e_posx, e_posy })</span>
<span class="line" id="L2361">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2362">				<span class="tok-comment">// std.debug.print(&quot;Key: {d}  - {d}      {d} \n\r&quot;,.{e_posx, e_posy, e_count });_= kbd.getKEY();</span>
</span>
<span class="line" id="L2363">				vpnl.linev.append(lnv.newLine(tampon, e_posx, e_posy, e_count,<span class="tok-builtin">@enumFromInt</span>(litem))) </span>
<span class="line" id="L2364">					<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2365">				<span class="tok-kw">return</span>;</span>
<span class="line" id="L2366">			},</span>
<span class="line" id="L2367">			.down =&gt; {</span>
<span class="line" id="L2368">				<span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posx) - <span class="tok-number">1</span>) {</span>
<span class="line" id="L2369">					e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L2370">					e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L2371">				}</span>
<span class="line" id="L2372">			},</span>
<span class="line" id="L2373">			.up =&gt; {</span>
<span class="line" id="L2374">				<span class="tok-kw">if</span> (e_curs &gt; e_posx) {</span>
<span class="line" id="L2375">					e_count -= <span class="tok-number">1</span>;</span>
<span class="line" id="L2376">					e_curs -= <span class="tok-number">1</span>;</span>
<span class="line" id="L2377">				}</span>
<span class="line" id="L2378">			},</span>
<span class="line" id="L2379">			<span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L2380">		}</span>
<span class="line" id="L2381">	}</span>
<span class="line" id="L2382">}</span>
<span class="line" id="L2383"></span>
<span class="line" id="L2384"></span>
<span class="line" id="L2385"><span class="tok-comment">// Order horizontal</span>
</span>
<span class="line" id="L2386"><span class="tok-kw">fn</span> <span class="tok-fn">orderVertical</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L2387">	<span class="tok-kw">var</span> idy: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L2388">	<span class="tok-kw">const</span> allocatorOrder = std.heap.page_allocator;</span>
<span class="line" id="L2389">	<span class="tok-kw">var</span> newline = std.ArrayList(lnv.LINE).init(allocatorOrder);</span>
<span class="line" id="L2390">	<span class="tok-kw">var</span> savline = std.ArrayList(lnv.LINE).init(allocatorOrder);</span>
<span class="line" id="L2391"></span>
<span class="line" id="L2392">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2393">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L2394"></span>
<span class="line" id="L2395">	<span class="tok-kw">for</span> (vpnl.linev.items) |p| {</span>
<span class="line" id="L2396">		savline.append(p)</span>
<span class="line" id="L2397">		<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };		</span>
<span class="line" id="L2398">	}</span>
<span class="line" id="L2399"></span>
<span class="line" id="L2400">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L2401">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L2402">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2403">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2404">		<span class="tok-number">25</span>,</span>
<span class="line" id="L2405">		grd.gridStyle,</span>
<span class="line" id="L2406">		dds.CADRE.line1,</span>
<span class="line" id="L2407">	);</span>
<span class="line" id="L2408">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L2409"></span>
<span class="line" id="L2410">	<span class="tok-kw">var</span> Order: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L2411">		<span class="tok-str">&quot;Order&quot;</span>,</span>
<span class="line" id="L2412">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2413">		<span class="tok-number">70</span>,</span>
<span class="line" id="L2414">		<span class="tok-number">25</span>,</span>
<span class="line" id="L2415">		grd.gridStyle,</span>
<span class="line" id="L2416">		dds.CADRE.line1,</span>
<span class="line" id="L2417">	);</span>
<span class="line" id="L2418">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Order);</span>
<span class="line" id="L2419"></span>
<span class="line" id="L2420">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2421">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L2422">	grd.setHeaders(Origine);</span>
<span class="line" id="L2423"></span>
<span class="line" id="L2424">	grd.newCell(Order, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2425">	grd.newCell(Order, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L2426">	grd.setHeaders(Order);</span>
<span class="line" id="L2427"></span>
<span class="line" id="L2428">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L2429">		grd.resetRows(Origine);</span>
<span class="line" id="L2430">		<span class="tok-kw">for</span> (vpnl.linev.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L2431">			<span class="tok-kw">var</span> ridx = usizeToStr(idx);</span>
<span class="line" id="L2432"></span>
<span class="line" id="L2433">			grd.addRows(Origine, &amp;.{ ridx, l.name});</span>
<span class="line" id="L2434">		}</span>
<span class="line" id="L2435"></span>
<span class="line" id="L2436">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L2437">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2438">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2439">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L2440">			newline.append(vpnl.linev.items[strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>])])</span>
<span class="line" id="L2441">				<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2442">			</span>
<span class="line" id="L2443">			<span class="tok-kw">var</span> ridy = usizeToStr(idy);</span>
<span class="line" id="L2444"></span>
<span class="line" id="L2445">			grd.addRows(Order, &amp;.{ ridy, Gkey.Buf.items[<span class="tok-number">1</span>]});</span>
<span class="line" id="L2446">			idy += <span class="tok-number">1</span>;</span>
<span class="line" id="L2447">			grd.printGridHeader(Order);</span>
<span class="line" id="L2448">			grd.printGridRows(Order);</span>
<span class="line" id="L2449">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L2450"></span>
<span class="line" id="L2451">			_ = vpnl.linev.orderedRemove(ligne);</span>
<span class="line" id="L2452">		}</span>
<span class="line" id="L2453">	}</span>
<span class="line" id="L2454"></span>
<span class="line" id="L2455">	vpnl.linev.clearAndFree();</span>
<span class="line" id="L2456">	vpnl.linev = std.ArrayList(lnv.LINE).init(dds.allocatorPnl);</span>
<span class="line" id="L2457">	vpnl.linev.clearRetainingCapacity();</span>
<span class="line" id="L2458">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L2459">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L2460">		<span class="tok-kw">for</span> (savline.items) |p| {</span>
<span class="line" id="L2461">			vpnl.linev.append(p)</span>
<span class="line" id="L2462">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2463">		}</span>
<span class="line" id="L2464">	}</span>
<span class="line" id="L2465">	<span class="tok-comment">// new Order and exit CTRL-V</span>
</span>
<span class="line" id="L2466">	<span class="tok-kw">else</span> {</span>
<span class="line" id="L2467">		<span class="tok-kw">for</span> (newline.items) |p| {</span>
<span class="line" id="L2468">			vpnl.linev.append(p)   </span>
<span class="line" id="L2469">						<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2470">				 }</span>
<span class="line" id="L2471">	}</span>
<span class="line" id="L2472"></span>
<span class="line" id="L2473">	grd.freeGrid(Origine);</span>
<span class="line" id="L2474">	grd.freeGrid(Order);</span>
<span class="line" id="L2475"></span>
<span class="line" id="L2476">	newline.clearAndFree();</span>
<span class="line" id="L2477">	newline.deinit();</span>
<span class="line" id="L2478"></span>
<span class="line" id="L2479">	savline.clearAndFree();</span>
<span class="line" id="L2480">	savline.deinit();</span>
<span class="line" id="L2481"></span>
<span class="line" id="L2482">	<span class="tok-kw">return</span>;</span>
<span class="line" id="L2483">}</span>
<span class="line" id="L2484"></span>
<span class="line" id="L2485"><span class="tok-comment">// remove Horizontal</span>
</span>
<span class="line" id="L2486"><span class="tok-kw">fn</span> <span class="tok-fn">removeVertical</span>(vpnl: *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L2487">	<span class="tok-kw">const</span> allocatorRemove = std.heap.page_allocator;</span>
<span class="line" id="L2488">	<span class="tok-kw">var</span> savline: std.ArrayList(lnv.LINE) = std.ArrayList(lnv.LINE).init(allocatorRemove);</span>
<span class="line" id="L2489"></span>
<span class="line" id="L2490">	<span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L2491">	<span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L2492"></span>
<span class="line" id="L2493">	<span class="tok-kw">for</span> (vpnl.linev.items) |p| {</span>
<span class="line" id="L2494">		savline.append(p)  </span>
<span class="line" id="L2495">			<span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2496">	}</span>
<span class="line" id="L2497"></span>
<span class="line" id="L2498">	<span class="tok-kw">var</span> Origine: *grd.GRID = grd.newGridC(</span>
<span class="line" id="L2499">		<span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L2500">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2501">		<span class="tok-number">2</span>,</span>
<span class="line" id="L2502">		<span class="tok-number">25</span>,</span>
<span class="line" id="L2503">		grd.gridStyle,</span>
<span class="line" id="L2504">		dds.CADRE.line1,</span>
<span class="line" id="L2505">	);</span>
<span class="line" id="L2506">	<span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L2507"></span>
<span class="line" id="L2508">	grd.newCell(Origine, <span class="tok-str">&quot;col&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L2509">	grd.newCell(Origine, <span class="tok-str">&quot;name&quot;</span>, <span class="tok-number">6</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L2510">	grd.setHeaders(Origine);</span>
<span class="line" id="L2511"></span>
<span class="line" id="L2512">	<span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L2513">		grd.resetRows(Origine);</span>
<span class="line" id="L2514">		<span class="tok-kw">for</span> (vpnl.linev.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L2515">			<span class="tok-kw">var</span> ridx =  usizeToStr(idx);</span>
<span class="line" id="L2516"> </span>
<span class="line" id="L2517">			grd.addRows(Origine, &amp;.{ ridx, l.name});</span>
<span class="line" id="L2518">		}</span>
<span class="line" id="L2519"></span>
<span class="line" id="L2520">		Gkey = grd.ioGridKey(Origine, term.kbd.ctrlV, <span class="tok-null">false</span>);</span>
<span class="line" id="L2521">		<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2522">		<span class="tok-kw">if</span> (Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span>;</span>
<span class="line" id="L2523">		<span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L2524">			<span class="tok-kw">var</span> ligne: <span class="tok-type">usize</span> = strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L2525"></span>
<span class="line" id="L2526">			_ = vpnl.linev.orderedRemove(ligne);</span>
<span class="line" id="L2527">		}</span>
<span class="line" id="L2528">	}</span>
<span class="line" id="L2529"></span>
<span class="line" id="L2530">	<span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L2531">	<span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L2532">		vpnl.linev.clearAndFree();</span>
<span class="line" id="L2533">		vpnl.linev = std.ArrayList(lnv.LINE).init(dds.allocatorPnl);</span>
<span class="line" id="L2534">		vpnl.linev.clearRetainingCapacity();</span>
<span class="line" id="L2535"></span>
<span class="line" id="L2536">		<span class="tok-kw">for</span> (savline.items) |p| {</span>
<span class="line" id="L2537">			vpnl.linev.append(p) </span>
<span class="line" id="L2538">			 <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err)); };</span>
<span class="line" id="L2539">		}</span>
<span class="line" id="L2540">	}</span>
<span class="line" id="L2541"></span>
<span class="line" id="L2542">	grd.freeGrid(Origine);</span>
<span class="line" id="L2543"></span>
<span class="line" id="L2544">	savline.clearAndFree();</span>
<span class="line" id="L2545">	savline.deinit();</span>
<span class="line" id="L2546">}</span>
<span class="line" id="L2547"></span>
</code></pre></body>
</html>