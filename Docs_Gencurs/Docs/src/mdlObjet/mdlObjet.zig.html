<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>mdlObjet.zig - source view</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPNJREFUeNpi/P//PwMlgOXHUjly9E0G4hwgZmQiQZMqEK8H4v9QzUEgQSaoADK+zhH9iAGL+C0gDoAaNg9mGLoLfgA1awK9hS9gzgJxA9RQBmQDrgMxJzRMGKE4HYj/Ial5A8QmQLwCJoBsgBYW2+TR1ChDaWt4LOBxKsi/VUh8XiD+gq4IVyzwQAMJBoKwacZlAB8Qf0bi96IZhtOAe1D6LpqaEiz6rmEzQAeIzwGxCJpieFqApo/vQKyJboAaEBsAsSEupwI1MwKjGBTVHOhegMX5UajYRqiBjMgYmj400cVh0XgTiKdC0zhJgJHS7AwQYABm9EAdCKrEfAAAAABJRU5ErkJggg=="/>
    <style>
      body{
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        margin: 0;
        line-height: 1.5;
      }

      pre > code {
        display: block;
        overflow: auto;
        line-height: normal;
        margin: 0em;
      }
      .tok-kw {
          color: #333;
          font-weight: bold;
      }
      .tok-str {
          color: #d14;
      }
      .tok-builtin {
          color: #005C7A;
      }
      .tok-comment {
          color: #545454;
          font-style: italic;
      }
      .tok-fn {
          color: #900;
          font-weight: bold;
      }
      .tok-null {
          color: #005C5C;
      }
      .tok-number {
          color: #005C5C;
      }
      .tok-type {
          color: #458;
          font-weight: bold;
      }
      pre {
        counter-reset: line;
      }
      pre .line:before {
        counter-increment: line;
        content: counter(line);
        display: inline-block;
        padding-right: 1em;
        width: 2em;
        text-align: right;
        color: #999;
      }
      
      .line {
        width: 100%;
        display: inline-block;
      }
      .line:target {
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
        background: #fafafa;
      }

      @media (prefers-color-scheme: dark) {
        body{
            background:#222;
            color: #ccc;
        }
        pre > code {
            color: #ccc;
            background: #222;
            border: unset;
        }
        .line:target {
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            background: #333;
        }
        .tok-kw {
            color: #eee;
        }
        .tok-str {
            color: #2e5;
        }
        .tok-builtin {
            color: #ff894c;
        }
        .tok-comment {
            color: #aa7;
        }
        .tok-fn {
            color: #B1A0F8;
        }
        .tok-null {
            color: #ff8080;
        }
        .tok-number {
            color: #ff8080;
        }
        .tok-type {
            color: #68f;
        }
      }
    </style>
</head>
<body>
<pre><code><span class="line" id="L1"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line" id="L2"></span>
<span class="line" id="L3"><span class="tok-kw">const</span> dds = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;dds&quot;</span>);</span>
<span class="line" id="L4"></span>
<span class="line" id="L5"><span class="tok-comment">/// terminal Fonction</span></span>
<span class="line" id="L6"><span class="tok-kw">const</span> term = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;cursed&quot;</span>);</span>
<span class="line" id="L7"><span class="tok-comment">// keyboard</span>
</span>
<span class="line" id="L8"><span class="tok-kw">const</span> kbd = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;cursed&quot;</span>).kbd;</span>
<span class="line" id="L9"></span>
<span class="line" id="L10"><span class="tok-comment">// error</span>
</span>
<span class="line" id="L11"><span class="tok-kw">const</span> msgerr = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).ErrForms;</span>
<span class="line" id="L12"><span class="tok-kw">const</span> dsperr = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).dsperr;</span>
<span class="line" id="L13"></span>
<span class="line" id="L14"><span class="tok-comment">// full delete for produc</span>
</span>
<span class="line" id="L15"><span class="tok-kw">const</span> forms = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>);</span>
<span class="line" id="L16"></span>
<span class="line" id="L17"><span class="tok-comment">// frame</span>
</span>
<span class="line" id="L18"><span class="tok-kw">const</span> frm = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).frm;</span>
<span class="line" id="L19"><span class="tok-comment">// panel</span>
</span>
<span class="line" id="L20"><span class="tok-kw">const</span> pnl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).pnl;</span>
<span class="line" id="L21"><span class="tok-comment">// button</span>
</span>
<span class="line" id="L22"><span class="tok-kw">const</span> btn = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).btn;</span>
<span class="line" id="L23"><span class="tok-comment">// label</span>
</span>
<span class="line" id="L24"><span class="tok-kw">const</span> lbl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lbl;</span>
<span class="line" id="L25"><span class="tok-comment">// menu</span>
</span>
<span class="line" id="L26"><span class="tok-kw">const</span> mnu = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).mnu;</span>
<span class="line" id="L27"><span class="tok-comment">// flied</span>
</span>
<span class="line" id="L28"><span class="tok-kw">const</span> fld = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).fld;</span>
<span class="line" id="L29"><span class="tok-comment">// line horizontal</span>
</span>
<span class="line" id="L30"><span class="tok-kw">const</span> lnh = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lnh;</span>
<span class="line" id="L31"><span class="tok-comment">// line vertival</span>
</span>
<span class="line" id="L32"><span class="tok-kw">const</span> lnv = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;forms&quot;</span>).lnv;</span>
<span class="line" id="L33"></span>
<span class="line" id="L34"></span>
<span class="line" id="L35"><span class="tok-comment">// grid</span>
</span>
<span class="line" id="L36"><span class="tok-kw">const</span> grd = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;grid&quot;</span>).grd;</span>
<span class="line" id="L37"></span>
<span class="line" id="L38"><span class="tok-comment">// tools utility</span>
</span>
<span class="line" id="L39"><span class="tok-kw">const</span> utl = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;utils&quot;</span>);</span>
<span class="line" id="L40"></span>
<span class="line" id="L41"><span class="tok-comment">// tools regex</span>
</span>
<span class="line" id="L42"><span class="tok-kw">const</span> reg = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;match&quot;</span>);</span>
<span class="line" id="L43"></span>
<span class="line" id="L44"></span>
<span class="line" id="L45"></span>
<span class="line" id="L46"></span>
<span class="line" id="L47"></span>
<span class="line" id="L48"><span class="tok-kw">var</span> numPanel: <span class="tok-type">usize</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L49"></span>
<span class="line" id="L50"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ErrMain = <span class="tok-kw">error</span>{</span>
<span class="line" id="L51">    main_append_XPANEL_invalide,</span>
<span class="line" id="L52">    main_run_EnumFunc_invalide,</span>
<span class="line" id="L53">    main_run_EnumTask_invalide,</span>
<span class="line" id="L54">    main_loadPanel_allocPrint_invalide,</span>
<span class="line" id="L55">    main_updatePanel_allocPrint_invalide,</span>
<span class="line" id="L56">    main_XPANEL_invalide,</span>
<span class="line" id="L57">};</span>
<span class="line" id="L58"></span>
<span class="line" id="L59"><span class="tok-kw">fn</span> <span class="tok-fn">strToUsize</span>(v: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">usize</span>{</span>
<span class="line" id="L60">  <span class="tok-kw">if</span>( v.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-number">0</span> ;</span>
<span class="line" id="L61">  <span class="tok-kw">return</span> std.fmt.parseUnsigned(<span class="tok-type">u64</span>, v,<span class="tok-number">10</span>) </span>
<span class="line" id="L62">        <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L63">}</span>
<span class="line" id="L64"></span>
<span class="line" id="L65"><span class="tok-kw">fn</span> <span class="tok-fn">usizeToStr</span>(v: <span class="tok-type">usize</span> ) []<span class="tok-kw">const</span> <span class="tok-type">u8</span>{</span>
<span class="line" id="L66"></span>
<span class="line" id="L67">  <span class="tok-kw">return</span> std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{d}&quot;</span>, .{v})</span>
<span class="line" id="L68">  <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L69">}</span>
<span class="line" id="L70"></span>
<span class="line" id="L71"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L72"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L73"><span class="tok-comment">// choix work panel</span>
</span>
<span class="line" id="L74"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">qryPanel</span>(vpnl: *std.ArrayList(pnl.PANEL)) <span class="tok-type">usize</span> {</span>
<span class="line" id="L75">    <span class="tok-kw">var</span> cellPos: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L76"></span>
<span class="line" id="L77"></span>
<span class="line" id="L78">    <span class="tok-kw">var</span> Xcombo : *grd.GRID =  grd.newGridC(</span>
<span class="line" id="L79">        <span class="tok-str">&quot;qryPanel&quot;</span>,</span>
<span class="line" id="L80">        <span class="tok-number">1</span>,</span>
<span class="line" id="L81">        <span class="tok-number">1</span>,</span>
<span class="line" id="L82">        <span class="tok-number">20</span>,</span>
<span class="line" id="L83">        grd.gridStyle,</span>
<span class="line" id="L84">        dds.CADRE.line1,</span>
<span class="line" id="L85">    );</span>
<span class="line" id="L86">    <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Xcombo);</span>
<span class="line" id="L87"></span>
<span class="line" id="L88">    grd.newCell(Xcombo,<span class="tok-str">&quot;ID&quot;</span>, <span class="tok-number">3</span>, dds.REFTYP.UDIGIT, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L89">    grd.newCell(Xcombo,<span class="tok-str">&quot;Name&quot;</span>, <span class="tok-number">10</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L90">    grd.newCell(Xcombo,<span class="tok-str">&quot;Title&quot;</span>, <span class="tok-number">15</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L91">    grd.setHeaders(Xcombo);</span>
<span class="line" id="L92"></span>
<span class="line" id="L93"></span>
<span class="line" id="L94">    <span class="tok-kw">for</span> (vpnl.items , <span class="tok-number">0</span>..) |p , idx| {</span>
<span class="line" id="L95">        grd.addRows(Xcombo, &amp;.{ usizeToStr(idx), p.name, p.frame.title });</span>
<span class="line" id="L96">    }</span>
<span class="line" id="L97"></span>
<span class="line" id="L98">    <span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L99">    <span class="tok-kw">defer</span> Gkey.Buf.deinit();</span>
<span class="line" id="L100"></span>
<span class="line" id="L101">    <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L102">        Gkey = grd.ioCombo(Xcombo, cellPos);</span>
<span class="line" id="L103"></span>
<span class="line" id="L104">        <span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L105">            grd.freeGrid(Xcombo);</span>
<span class="line" id="L106">            </span>
<span class="line" id="L107">            <span class="tok-kw">return</span>  strToUsize(Gkey.Buf.items[<span class="tok-number">0</span>]);</span>
<span class="line" id="L108">        }</span>
<span class="line" id="L109"></span>
<span class="line" id="L110"></span>
<span class="line" id="L111">        <span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L112">            grd.freeGrid(Xcombo);</span>
<span class="line" id="L113">            </span>
<span class="line" id="L114">            <span class="tok-kw">return</span> <span class="tok-number">999</span>;</span>
<span class="line" id="L115">        }</span>
<span class="line" id="L116">    }</span>
<span class="line" id="L117">}</span>
<span class="line" id="L118"></span>
<span class="line" id="L119"><span class="tok-comment">// end desription Function</span>
</span>
<span class="line" id="L120"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L121"></span>
<span class="line" id="L122"></span>
<span class="line" id="L123"><span class="tok-kw">var</span> maxY: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L124"><span class="tok-kw">var</span> maxX: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L125"><span class="tok-kw">var</span> minY: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L126"><span class="tok-kw">var</span> minX: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L127"><span class="tok-kw">var</span> X: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L128"><span class="tok-kw">var</span> Y: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L129"></span>
<span class="line" id="L130"><span class="tok-comment">//pub fn main() !void {</span>
</span>
<span class="line" id="L131"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fnPanel</span>(XPANEL: *std.ArrayList(pnl.PANEL)) <span class="tok-type">void</span> {</span>
<span class="line" id="L132"></span>
<span class="line" id="L133">    term.cls();</span>
<span class="line" id="L134"></span>
<span class="line" id="L135">    numPanel = qryPanel(XPANEL);</span>
<span class="line" id="L136"></span>
<span class="line" id="L137">    <span class="tok-kw">if</span> (numPanel == <span class="tok-number">999</span>) <span class="tok-kw">return</span>;</span>
<span class="line" id="L138"></span>
<span class="line" id="L139">    term.cls();</span>
<span class="line" id="L140">    <span class="tok-kw">var</span> pFmt01 : *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;FRAM01&quot;</span>,</span>
<span class="line" id="L141">                  XPANEL.items[numPanel].posx,</span>
<span class="line" id="L142">                  XPANEL.items[numPanel].posy,</span>
<span class="line" id="L143">                  XPANEL.items[numPanel].lines,</span>
<span class="line" id="L144">                  XPANEL.items[numPanel].cols,</span>
<span class="line" id="L145">                  XPANEL.items[numPanel].frame.cadre,</span>
<span class="line" id="L146">                  XPANEL.items[numPanel].frame.title);</span>
<span class="line" id="L147">                  </span>
<span class="line" id="L148">                  </span>
<span class="line" id="L149"></span>
<span class="line" id="L150"></span>
<span class="line" id="L151">    <span class="tok-kw">for</span> (XPANEL.items[numPanel].button.items) |p| {</span>
<span class="line" id="L152">    pFmt01.button.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L153">    }</span>
<span class="line" id="L154">    <span class="tok-kw">for</span> (XPANEL.items[numPanel].label.items) |p| {</span>
<span class="line" id="L155">    pFmt01.label.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L156">    }</span>
<span class="line" id="L157">    <span class="tok-kw">for</span> (XPANEL.items[numPanel].field.items) |p| {</span>
<span class="line" id="L158">    pFmt01.field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L159">    }</span>
<span class="line" id="L160">    <span class="tok-kw">for</span> (XPANEL.items[numPanel].linev.items) |p| {</span>
<span class="line" id="L161">    pFmt01.linev.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L162">    }</span>
<span class="line" id="L163">    <span class="tok-kw">for</span> (XPANEL.items[numPanel].lineh.items) |p| {</span>
<span class="line" id="L164">    pFmt01.lineh.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L165">    }</span>
<span class="line" id="L166">    </span>
<span class="line" id="L167">    <span class="tok-kw">for</span> (XPANEL.items[numPanel].menu.items) |p| {</span>
<span class="line" id="L168">    pFmt01.menu.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L169">    }</span>
<span class="line" id="L170"></span>
<span class="line" id="L171"></span>
<span class="line" id="L172">    pFmt01.menu.append(mnu.newMenu(</span>
<span class="line" id="L173">                      <span class="tok-str">&quot;Choix&quot;</span>,                <span class="tok-comment">// name</span>
</span>
<span class="line" id="L174">                      <span class="tok-number">1</span>, <span class="tok-number">1</span>,                  <span class="tok-comment">// posx, posy  </span>
</span>
<span class="line" id="L175">                      dds.CADRE.line1,        <span class="tok-comment">// type line fram</span>
</span>
<span class="line" id="L176">                      dds.MNUVH.vertical,     <span class="tok-comment">// type menu vertical / horizontal</span>
</span>
<span class="line" id="L177">                      &amp;.{                    <span class="tok-comment">// item</span>
</span>
<span class="line" id="L178">                      <span class="tok-str">&quot;Label-Order&quot;</span>,</span>
<span class="line" id="L179">                      <span class="tok-str">&quot;Label-Remove&quot;</span>,</span>
<span class="line" id="L180">                      }</span>
<span class="line" id="L181">                      )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L182"></span>
<span class="line" id="L183">    pnl.printPanel(pFmt01);</span>
<span class="line" id="L184"></span>
<span class="line" id="L185">    maxY = pFmt01.cols + pFmt01.posy;</span>
<span class="line" id="L186">    <span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) maxY -= <span class="tok-number">0</span>;</span>
<span class="line" id="L187">    minY = pFmt01.posy;</span>
<span class="line" id="L188">    <span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) minY += <span class="tok-number">1</span>;</span>
<span class="line" id="L189"></span>
<span class="line" id="L190">    maxX = pFmt01.lines + pFmt01.posx;</span>
<span class="line" id="L191">    <span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) maxX -= <span class="tok-number">2</span>;</span>
<span class="line" id="L192">    minX = pFmt01.posx;</span>
<span class="line" id="L193">    <span class="tok-kw">if</span> (pFmt01.frame.cadre != dds.CADRE.line0) minX += <span class="tok-number">1</span>;</span>
<span class="line" id="L194"></span>
<span class="line" id="L195">    term.onMouse();</span>
<span class="line" id="L196">    <span class="tok-kw">var</span> Tkey : term.Keyboard = <span class="tok-null">undefined</span> ; <span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L197">    <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L198">        term.cursShow();</span>
<span class="line" id="L199">        Tkey = kbd.getKEY();</span>
<span class="line" id="L200"></span>
<span class="line" id="L201">        <span class="tok-kw">if</span> (Tkey.Key == kbd.mouse)  { forms.dspMouse(pFmt01);  <span class="tok-kw">continue</span>;  } <span class="tok-comment">// active display Cursor x/y mouse</span>
</span>
<span class="line" id="L202"></span>
<span class="line" id="L203">        <span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L204">            .F10 =&gt;  {</span>
<span class="line" id="L205">                XPANEL.items[numPanel].label.clearAndFree();</span>
<span class="line" id="L206">                XPANEL.items[numPanel].label =std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L207">                XPANEL.items[numPanel].label.clearRetainingCapacity(); </span>
<span class="line" id="L208">                <span class="tok-kw">for</span> (pFmt01.label.items) |p| {</span>
<span class="line" id="L209">                XPANEL.items[numPanel].label.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L210">                }</span>
<span class="line" id="L211"></span>
<span class="line" id="L212">                XPANEL.items[numPanel].field.clearAndFree();</span>
<span class="line" id="L213">                XPANEL.items[numPanel].field =std.ArrayList(fld.FIELD).init(dds.allocatorPnl);</span>
<span class="line" id="L214">                XPANEL.items[numPanel].field.clearRetainingCapacity(); </span>
<span class="line" id="L215">                <span class="tok-kw">for</span> (pFmt01.field.items) |p| {</span>
<span class="line" id="L216">                XPANEL.items[numPanel].field.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L217">                }</span>
<span class="line" id="L218"></span>
<span class="line" id="L219">                pnl.freePanel(pFmt01);</span>
<span class="line" id="L220">                <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt01);</span>
<span class="line" id="L221">                dds.deinitUtils();</span>
<span class="line" id="L222">                <span class="tok-kw">return</span>;</span>
<span class="line" id="L223">            },</span>
<span class="line" id="L224">            .F12 =&gt; {</span>
<span class="line" id="L225"></span>
<span class="line" id="L226">                pnl.freePanel(pFmt01);</span>
<span class="line" id="L227">                <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt01);</span>
<span class="line" id="L228">                dds.deinitUtils();</span>
<span class="line" id="L229">                <span class="tok-kw">return</span> ; </span>
<span class="line" id="L230">            } ,</span>
<span class="line" id="L231"></span>
<span class="line" id="L232">            <span class="tok-comment">// Def Title</span>
</span>
<span class="line" id="L233">            .altT =&gt; {</span>
<span class="line" id="L234">                term.getCursor(); </span>
<span class="line" id="L235">                <span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L236">                term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY ) <span class="tok-kw">continue</span> ;</span>
<span class="line" id="L237">                term.offMouse();</span>
<span class="line" id="L238">                writeLabel(pFmt01, <span class="tok-null">true</span>);</span>
<span class="line" id="L239">                pnl.printPanel(pFmt01);</span>
<span class="line" id="L240">                term.onMouse();</span>
<span class="line" id="L241">            },</span>
<span class="line" id="L242"></span>
<span class="line" id="L243">            <span class="tok-comment">// def label</span>
</span>
<span class="line" id="L244">            .altL =&gt; {</span>
<span class="line" id="L245">                term.getCursor();</span>
<span class="line" id="L246">                <span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L247">                    term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L248">                term.offMouse();</span>
<span class="line" id="L249">                writeLabel(pFmt01, <span class="tok-null">false</span>);</span>
<span class="line" id="L250">                pnl.printPanel(pFmt01);</span>
<span class="line" id="L251">                term.onMouse();</span>
<span class="line" id="L252">            },</span>
<span class="line" id="L253"></span>
<span class="line" id="L254">            <span class="tok-comment">// def Field</span>
</span>
<span class="line" id="L255">            .altF =&gt; {</span>
<span class="line" id="L256">                term.getCursor();</span>
<span class="line" id="L257">                <span class="tok-kw">if</span> (term.posCurs.x &lt; minX <span class="tok-kw">or</span> term.posCurs.x &gt; maxX <span class="tok-kw">or</span></span>
<span class="line" id="L258">                    term.posCurs.y &lt; minY <span class="tok-kw">or</span> term.posCurs.y &gt; maxY) <span class="tok-kw">continue</span>;</span>
<span class="line" id="L259">                term.writeStyled(<span class="tok-str">&quot;?&quot;</span>,pFmt01.attribut);</span>
<span class="line" id="L260">                term.gotoXY(term.posCurs.x,term.posCurs.y);</span>
<span class="line" id="L261">                term.getCursor();</span>
<span class="line" id="L262">                term.offMouse();</span>
<span class="line" id="L263">                writeField(pFmt01);</span>
<span class="line" id="L264">                term.cls();</span>
<span class="line" id="L265">                pnl.printPanel(pFmt01);</span>
<span class="line" id="L266">                term.onMouse();</span>
<span class="line" id="L267">            },</span>
<span class="line" id="L268">            <span class="tok-comment">// Order / Remove</span>
</span>
<span class="line" id="L269">            .altW =&gt; {</span>
<span class="line" id="L270">                <span class="tok-kw">var</span> nitem  :<span class="tok-type">usize</span> = <span class="tok-number">0</span>; </span>
<span class="line" id="L271">                  nitem  = mnu.ioMenu(pFmt01,pFmt01.menu.items[<span class="tok-number">0</span>],nitem);</span>
<span class="line" id="L272">                  <span class="tok-kw">if</span> (nitem == <span class="tok-number">0</span>) orderLabel(pFmt01);   <span class="tok-comment">// Order  Label</span>
</span>
<span class="line" id="L273">                  <span class="tok-kw">if</span> (nitem == <span class="tok-number">1</span>) removeLabel(pFmt01);  <span class="tok-comment">// Remove Label</span>
</span>
<span class="line" id="L274">                  term.offMouse();</span>
<span class="line" id="L275">                  term.cls();</span>
<span class="line" id="L276">                  pnl.printPanel(pFmt01);</span>
<span class="line" id="L277">                  term.onMouse();</span>
<span class="line" id="L278">            },</span>
<span class="line" id="L279">            <span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L280">        }</span>
<span class="line" id="L281">    }</span>
<span class="line" id="L282">}</span>
<span class="line" id="L283"></span>
<span class="line" id="L284"><span class="tok-comment">//------------------------------------------------------------------</span>
</span>
<span class="line" id="L285"><span class="tok-comment">// definition label</span>
</span>
<span class="line" id="L286"></span>
<span class="line" id="L287"><span class="tok-kw">fn</span> <span class="tok-fn">writeLabel</span>(vpnl: *pnl.PANEL, Title: <span class="tok-type">bool</span>) <span class="tok-type">void</span> {</span>
<span class="line" id="L288">    <span class="tok-comment">//term.getCursor();</span>
</span>
<span class="line" id="L289">    <span class="tok-kw">var</span> e_count: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L290">    <span class="tok-kw">var</span> tampon: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L291">    <span class="tok-kw">var</span> text: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L292">    <span class="tok-kw">var</span> e_LABEL = std.ArrayList([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>).init(dds.allocatorUtils);</span>
<span class="line" id="L293">    <span class="tok-kw">defer</span> e_LABEL.deinit();</span>
<span class="line" id="L294">    <span class="tok-kw">defer</span> dds.allocatorUtils.destroy(&amp;e_LABEL);</span>
<span class="line" id="L295"></span>
<span class="line" id="L296">    <span class="tok-kw">var</span> e_posx: <span class="tok-type">usize</span> = term.posCurs.x;</span>
<span class="line" id="L297">    <span class="tok-kw">var</span> e_posy: <span class="tok-type">usize</span> = term.posCurs.y;</span>
<span class="line" id="L298">    <span class="tok-kw">var</span> e_curs: <span class="tok-type">usize</span> = e_posy;</span>
<span class="line" id="L299"></span>
<span class="line" id="L300">    <span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L301">    <span class="tok-kw">var</span> Tkey: term.Keyboard = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L302"></span>
<span class="line" id="L303">    <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L304">    <span class="tok-kw">while</span> (i &lt; vpnl.cols) : (i += <span class="tok-number">1</span>) {</span>
<span class="line" id="L305">        e_LABEL.append(<span class="tok-str">&quot; &quot;</span>) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L306">    }</span>
<span class="line" id="L307">    <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L308">        forms.dspCursor(vpnl, e_posx, e_curs);</span>
<span class="line" id="L309"></span>
<span class="line" id="L310">        Tkey = kbd.getKEY();</span>
<span class="line" id="L311"></span>
<span class="line" id="L312">        <span class="tok-comment">//dspMouse(vpnl);  // active display Cursor x/y mouse</span>
</span>
<span class="line" id="L313">        <span class="tok-comment">//std.debug.print(&quot;Key: {d}  - {d}\n\r&quot;,.{term.posCurs.x, term.posCurs.y});</span>
</span>
<span class="line" id="L314">        <span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L315">            .F12 =&gt; <span class="tok-kw">return</span>,</span>
<span class="line" id="L316"></span>
<span class="line" id="L317">		</span>
<span class="line" id="L318">            .ctrlV =&gt; {</span>
<span class="line" id="L319">                tampon = std.fmt.allocPrint(dds.allocatorStr,<span class="tok-str">&quot;L{d}{d}&quot;</span>,.{e_posx,e_posy}) </span>
<span class="line" id="L320">                                  <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L321">                text = utl.trimStr(utl.listToStr(e_LABEL));</span>
<span class="line" id="L322">              <span class="tok-kw">if</span> (Title) {</span>
<span class="line" id="L323">                vpnl.label.append(lbl.newTitle(</span>
<span class="line" id="L324">                tampon, e_posx ,e_posy,fld.ToStr(text)</span>
<span class="line" id="L325">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L326">              }</span>
<span class="line" id="L327">              <span class="tok-kw">else</span> {</span>
<span class="line" id="L328">                vpnl.label.append(lbl.newLabel(</span>
<span class="line" id="L329">                tampon, e_posx ,e_posy,fld.ToStr(text)</span>
<span class="line" id="L330">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L331">              }</span>
<span class="line" id="L332">              <span class="tok-kw">return</span> ;</span>
<span class="line" id="L333">            },</span>
<span class="line" id="L334">            .home =&gt; {</span>
<span class="line" id="L335">                e_count = <span class="tok-number">0</span>;</span>
<span class="line" id="L336">                e_curs  = e_posy;</span>
<span class="line" id="L337">            },</span>
<span class="line" id="L338">            .end =&gt; {</span>
<span class="line" id="L339">                tampon = utl.listToStr(e_LABEL);</span>
<span class="line" id="L340">                e_count = utl.trimStr(tampon).len - <span class="tok-number">1</span>;</span>
<span class="line" id="L341">                e_curs = e_posy + utl.trimStr(tampon).len - <span class="tok-number">1</span>;</span>
<span class="line" id="L342">            },</span>
<span class="line" id="L343">            .right, .tab =&gt; {</span>
<span class="line" id="L344">                <span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posy) - <span class="tok-number">1</span> ) {</span>
<span class="line" id="L345">                    e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L346">                    e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L347">                }</span>
<span class="line" id="L348">            },</span>
<span class="line" id="L349">            .left, .stab =&gt; {</span>
<span class="line" id="L350">                <span class="tok-kw">if</span> (e_curs &gt; e_posy) {</span>
<span class="line" id="L351">                    e_count -= <span class="tok-number">1</span>;</span>
<span class="line" id="L352">                    e_curs -= <span class="tok-number">1</span>;</span>
<span class="line" id="L353">                }</span>
<span class="line" id="L354">            },</span>
<span class="line" id="L355">            .char =&gt; {</span>
<span class="line" id="L356">                <span class="tok-kw">if</span> (e_curs &lt; (vpnl.cols + vpnl.posy) - <span class="tok-number">1</span> ) {</span>
<span class="line" id="L357">                  <span class="tok-kw">if</span> (Title) {</span>
<span class="line" id="L358">                      term.writeStyled(Tkey.Char, lbl.AtrTitle);</span>
<span class="line" id="L359">                      e_LABEL.items[e_count] = Tkey.Char;</span>
<span class="line" id="L360">                  } <span class="tok-kw">else</span> {</span>
<span class="line" id="L361">                      term.writeStyled(Tkey.Char, lbl.AtrLabel);</span>
<span class="line" id="L362">                      e_LABEL.items[e_count] = Tkey.Char;</span>
<span class="line" id="L363">                  }</span>
<span class="line" id="L364">                  <span class="tok-kw">if</span> (e_count &lt; vpnl.cols) {</span>
<span class="line" id="L365">                      e_count += <span class="tok-number">1</span>;</span>
<span class="line" id="L366">                      e_curs += <span class="tok-number">1</span>;</span>
<span class="line" id="L367">                  }</span>
<span class="line" id="L368">                }</span>
<span class="line" id="L369">            },</span>
<span class="line" id="L370">            <span class="tok-kw">else</span> =&gt; {},</span>
<span class="line" id="L371">        }</span>
<span class="line" id="L372">    }</span>
<span class="line" id="L373">}</span>
<span class="line" id="L374"></span>
<span class="line" id="L375"></span>
<span class="line" id="L376"><span class="tok-comment">// Order label</span>
</span>
<span class="line" id="L377"><span class="tok-kw">fn</span> <span class="tok-fn">orderLabel</span>( vpnl : *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L378"></span>
<span class="line" id="L379">  <span class="tok-kw">var</span> idy: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L380">  <span class="tok-kw">const</span> allocatorOrder= std.heap.page_allocator;</span>
<span class="line" id="L381">  <span class="tok-kw">var</span> newlabel = std.ArrayList(lbl.LABEL).init(allocatorOrder);</span>
<span class="line" id="L382">  <span class="tok-kw">var</span> savlabel = std.ArrayList(lbl.LABEL).init(allocatorOrder);</span>
<span class="line" id="L383"></span>
<span class="line" id="L384"></span>
<span class="line" id="L385"></span>
<span class="line" id="L386">  <span class="tok-kw">var</span> Gkey :grd.GridSelect = <span class="tok-null">undefined</span> ;</span>
<span class="line" id="L387">  <span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L388"></span>
<span class="line" id="L389">  <span class="tok-kw">for</span> (vpnl.label.items) |p| {</span>
<span class="line" id="L390">    savlabel.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L391">    }</span>
<span class="line" id="L392"></span>
<span class="line" id="L393">  <span class="tok-kw">var</span> Origine : *grd.GRID =  grd.newGridC(</span>
<span class="line" id="L394">                  <span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L395">                  <span class="tok-number">2</span>, <span class="tok-number">2</span>,</span>
<span class="line" id="L396">                  <span class="tok-number">25</span>,  </span>
<span class="line" id="L397">                  grd.gridStyle,</span>
<span class="line" id="L398">                  dds.CADRE.line1,</span>
<span class="line" id="L399">                  )  ;</span>
<span class="line" id="L400">  <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L401"></span>
<span class="line" id="L402">  <span class="tok-kw">var</span> Order : *grd.GRID =  grd.newGridC(</span>
<span class="line" id="L403">                  <span class="tok-str">&quot;Order&quot;</span>,</span>
<span class="line" id="L404">                  <span class="tok-number">2</span>, <span class="tok-number">70</span>,</span>
<span class="line" id="L405">                  <span class="tok-number">25</span>,  </span>
<span class="line" id="L406">                  grd.gridStyle,</span>
<span class="line" id="L407">                  dds.CADRE.line1,</span>
<span class="line" id="L408">                  )  ;</span>
<span class="line" id="L409">  <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Order);</span>
<span class="line" id="L410"></span>
<span class="line" id="L411">  grd.newCell(Origine,<span class="tok-str">&quot;col&quot;</span>,<span class="tok-number">3</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L412">  grd.newCell(Origine,<span class="tok-str">&quot;name&quot;</span>,<span class="tok-number">6</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L413">  grd.newCell(Origine,<span class="tok-str">&quot;text&quot;</span>,<span class="tok-number">40</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L414">  grd.setHeaders(Origine) ;</span>
<span class="line" id="L415"></span>
<span class="line" id="L416">  grd.newCell(Order,<span class="tok-str">&quot;col&quot;</span>,<span class="tok-number">3</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L417">  grd.newCell(Order,<span class="tok-str">&quot;name&quot;</span>,<span class="tok-number">6</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L418">  grd.newCell(Order,<span class="tok-str">&quot;text&quot;</span>,<span class="tok-number">40</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L419">  grd.setHeaders(Order) ;</span>
<span class="line" id="L420"></span>
<span class="line" id="L421">  <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L422"></span>
<span class="line" id="L423">    grd.resetRows(Origine);</span>
<span class="line" id="L424">    <span class="tok-kw">for</span> (vpnl.label.items, <span class="tok-number">0</span>..) |l, idx| {</span>
<span class="line" id="L425">      <span class="tok-kw">var</span> ridx =  std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>,.{idx}) </span>
<span class="line" id="L426">                          <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L427"></span>
<span class="line" id="L428">      <span class="tok-kw">if</span> ( l.text.len &gt; <span class="tok-number">40</span>) grd.addRows(Origine , &amp;.{ridx, l.name, l.text[<span class="tok-number">0</span>..<span class="tok-number">39</span>] })</span>
<span class="line" id="L429">      <span class="tok-kw">else</span>  grd.addRows(Origine , &amp;.{ridx, l.name, l.text });</span>
<span class="line" id="L430"></span>
<span class="line" id="L431"></span>
<span class="line" id="L432">    }</span>
<span class="line" id="L433"></span>
<span class="line" id="L434"></span>
<span class="line" id="L435"></span>
<span class="line" id="L436">    Gkey =grd.ioGridKey(Origine,term.kbd.ctrlV,<span class="tok-null">false</span>);</span>
<span class="line" id="L437">    <span class="tok-kw">if</span> ( Gkey.Key == kbd.esc)   <span class="tok-kw">break</span> ;</span>
<span class="line" id="L438">    <span class="tok-kw">if</span> ( Gkey.Key == kbd.ctrlV)   <span class="tok-kw">break</span> ;</span>
<span class="line" id="L439">    <span class="tok-kw">if</span> ( Gkey.Key == kbd.enter ) {   </span>
<span class="line" id="L440">      newlabel.append(vpnl.label.items[</span>
<span class="line" id="L441">        std.fmt.parseInt(<span class="tok-type">usize</span>, Gkey.Buf.items[<span class="tok-number">0</span>], <span class="tok-number">10</span>) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));} </span>
<span class="line" id="L442">        ]) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L443"></span>
<span class="line" id="L444">      <span class="tok-kw">var</span> ridy =  std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>,.{idy})</span>
<span class="line" id="L445">                          <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L446"></span>
<span class="line" id="L447">      grd.addRows(Order , &amp;.{ridy, Gkey.Buf.items[<span class="tok-number">1</span>], Gkey.Buf.items[<span class="tok-number">2</span>] });</span>
<span class="line" id="L448">      idy += <span class="tok-number">1</span>;</span>
<span class="line" id="L449">      grd.printGridHeader(Order) ;</span>
<span class="line" id="L450">      grd.printGridRows(Order);</span>
<span class="line" id="L451">      <span class="tok-kw">var</span> ligne : <span class="tok-type">usize</span> = std.fmt.parseInt(<span class="tok-type">usize</span>, Gkey.Buf.items[<span class="tok-number">0</span>], <span class="tok-number">10</span>) </span>
<span class="line" id="L452">                          <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L453">      _=vpnl.label.orderedRemove(ligne);</span>
<span class="line" id="L454">    }</span>
<span class="line" id="L455">  }</span>
<span class="line" id="L456"></span>
<span class="line" id="L457">  vpnl.label.clearAndFree();</span>
<span class="line" id="L458">  vpnl.label =std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L459">  vpnl.label.clearRetainingCapacity();</span>
<span class="line" id="L460">  <span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L461">  <span class="tok-kw">if</span> ( Gkey.Key == kbd.esc ) {</span>
<span class="line" id="L462">    <span class="tok-kw">for</span> (savlabel.items) |p| {</span>
<span class="line" id="L463">    vpnl.label.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L464">    }</span>
<span class="line" id="L465">  }</span>
<span class="line" id="L466">  <span class="tok-comment">// new Order and exit</span>
</span>
<span class="line" id="L467">  <span class="tok-kw">else</span> { </span>
<span class="line" id="L468">    <span class="tok-kw">for</span> (newlabel.items) |p| {</span>
<span class="line" id="L469">    vpnl.label.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L470">    }</span>
<span class="line" id="L471">  }</span>
<span class="line" id="L472">  </span>
<span class="line" id="L473"></span>
<span class="line" id="L474">  grd.freeGrid(Origine);</span>
<span class="line" id="L475">  grd.freeGrid(Order);</span>
<span class="line" id="L476"></span>
<span class="line" id="L477">  newlabel.clearAndFree();</span>
<span class="line" id="L478">  newlabel.deinit();</span>
<span class="line" id="L479"></span>
<span class="line" id="L480"></span>
<span class="line" id="L481">  savlabel.clearAndFree();</span>
<span class="line" id="L482">  savlabel.deinit();</span>
<span class="line" id="L483"></span>
<span class="line" id="L484">  <span class="tok-kw">return</span> ;</span>
<span class="line" id="L485">}</span>
<span class="line" id="L486"></span>
<span class="line" id="L487"></span>
<span class="line" id="L488"><span class="tok-comment">// remove Label</span>
</span>
<span class="line" id="L489"><span class="tok-kw">fn</span> <span class="tok-fn">removeLabel</span>( vpnl : *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L490"></span>
<span class="line" id="L491"></span>
<span class="line" id="L492">  <span class="tok-kw">const</span> allocatorRemove= std.heap.page_allocator;</span>
<span class="line" id="L493">  <span class="tok-kw">var</span> savlabel : std.ArrayList(lbl.LABEL) = std.ArrayList(lbl.LABEL).init(allocatorRemove);</span>
<span class="line" id="L494"></span>
<span class="line" id="L495"></span>
<span class="line" id="L496"></span>
<span class="line" id="L497">  <span class="tok-kw">var</span> Gkey :grd.GridSelect = <span class="tok-null">undefined</span> ;</span>
<span class="line" id="L498">  <span class="tok-kw">defer</span> Gkey.Buf.clearAndFree();</span>
<span class="line" id="L499"></span>
<span class="line" id="L500">  <span class="tok-kw">for</span> (vpnl.label.items) |p| {</span>
<span class="line" id="L501">    savlabel.append(p) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L502">    }</span>
<span class="line" id="L503"></span>
<span class="line" id="L504">  <span class="tok-kw">var</span> Origine : *grd.GRID =  grd.newGridC(</span>
<span class="line" id="L505">                  <span class="tok-str">&quot;Origine&quot;</span>,</span>
<span class="line" id="L506">                  <span class="tok-number">2</span>, <span class="tok-number">2</span>,</span>
<span class="line" id="L507">                  <span class="tok-number">25</span>,  </span>
<span class="line" id="L508">                  grd.gridStyle,</span>
<span class="line" id="L509">                  dds.CADRE.line1,</span>
<span class="line" id="L510">                  )  ;</span>
<span class="line" id="L511">  <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Origine);</span>
<span class="line" id="L512"></span>
<span class="line" id="L513">  grd.newCell(Origine,<span class="tok-str">&quot;col&quot;</span>,<span class="tok-number">3</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L514">  grd.newCell(Origine,<span class="tok-str">&quot;name&quot;</span>,<span class="tok-number">6</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgYellow);</span>
<span class="line" id="L515">  grd.newCell(Origine,<span class="tok-str">&quot;text&quot;</span>,<span class="tok-number">40</span>,dds.REFTYP.TEXT_FREE,dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L516">  grd.setHeaders(Origine) ;</span>
<span class="line" id="L517">  </span>
<span class="line" id="L518"></span>
<span class="line" id="L519">  <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L520"></span>
<span class="line" id="L521">    grd.resetRows(Origine);</span>
<span class="line" id="L522">    <span class="tok-kw">for</span> (vpnl.label.items, <span class="tok-number">0</span>..) |l , idx | {</span>
<span class="line" id="L523">      <span class="tok-kw">var</span> ridx =  std.fmt.allocPrint(dds.allocatorUtils, <span class="tok-str">&quot;{d}&quot;</span>,.{idx}) </span>
<span class="line" id="L524">                          <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L525"></span>
<span class="line" id="L526"></span>
<span class="line" id="L527">      <span class="tok-kw">if</span> ( l.text.len &gt; <span class="tok-number">40</span>) grd.addRows(Origine , &amp;.{ridx, l.name, l.text[<span class="tok-number">0</span>..<span class="tok-number">39</span>] })</span>
<span class="line" id="L528">      <span class="tok-kw">else</span>  grd.addRows(Origine , &amp;.{ridx, l.name, l.text });</span>
<span class="line" id="L529"></span>
<span class="line" id="L530">    }</span>
<span class="line" id="L531"></span>
<span class="line" id="L532">    Gkey =grd.ioGridKey(Origine,term.kbd.ctrlV,<span class="tok-null">false</span>);</span>
<span class="line" id="L533">    <span class="tok-kw">if</span> ( Gkey.Key == kbd.esc)   <span class="tok-kw">break</span> ;</span>
<span class="line" id="L534">    <span class="tok-kw">if</span> ( Gkey.Key == kbd.ctrlV) <span class="tok-kw">break</span> ;</span>
<span class="line" id="L535">    <span class="tok-kw">if</span> ( Gkey.Key == kbd.enter ) {</span>
<span class="line" id="L536">      <span class="tok-kw">var</span> ridx : <span class="tok-type">usize</span> = std.fmt.parseInt(<span class="tok-type">usize</span>, Gkey.Buf.items[<span class="tok-number">0</span>], <span class="tok-number">10</span>)</span>
<span class="line" id="L537">                          <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L538"></span>
<span class="line" id="L539">      _=vpnl.label.orderedRemove(ridx);</span>
<span class="line" id="L540">    }</span>
<span class="line" id="L541">  }</span>
<span class="line" id="L542"></span>
<span class="line" id="L543"></span>
<span class="line" id="L544">  <span class="tok-comment">// restor and exit</span>
</span>
<span class="line" id="L545">  <span class="tok-kw">if</span> ( Gkey.Key == kbd.esc ) {</span>
<span class="line" id="L546">    vpnl.label.clearAndFree();</span>
<span class="line" id="L547">    vpnl.label =std.ArrayList(lbl.LABEL).init(dds.allocatorPnl);</span>
<span class="line" id="L548">    vpnl.label.clearRetainingCapacity();</span>
<span class="line" id="L549"></span>
<span class="line" id="L550">    <span class="tok-kw">for</span> (savlabel.items) |p| {</span>
<span class="line" id="L551">    vpnl.label.append(p) </span>
<span class="line" id="L552">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L553">    }</span>
<span class="line" id="L554">  }</span>
<span class="line" id="L555"></span>
<span class="line" id="L556"></span>
<span class="line" id="L557">  grd.freeGrid(Origine);</span>
<span class="line" id="L558">  </span>
<span class="line" id="L559">  savlabel.clearAndFree();</span>
<span class="line" id="L560">  savlabel.deinit();</span>
<span class="line" id="L561"></span>
<span class="line" id="L562">}</span>
<span class="line" id="L563"></span>
<span class="line" id="L564"><span class="tok-comment">// FIELD Management</span>
</span>
<span class="line" id="L565"></span>
<span class="line" id="L566"></span>
<span class="line" id="L567"><span class="tok-comment">// forms Field</span>
</span>
<span class="line" id="L568"><span class="tok-kw">const</span> fp02 = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L569">  fname,</span>
<span class="line" id="L570">  fposx,</span>
<span class="line" id="L571">  fposy,</span>
<span class="line" id="L572">  ftype,</span>
<span class="line" id="L573">  fwidth,</span>
<span class="line" id="L574">  fscal,</span>
<span class="line" id="L575">  frequi,</span>
<span class="line" id="L576">  fprotect,</span>
<span class="line" id="L577">  fedtcar,</span>
<span class="line" id="L578">  ferrmsg,</span>
<span class="line" id="L579">  fhelp,</span>
<span class="line" id="L580">  ffunc,</span>
<span class="line" id="L581">  ftask,</span>
<span class="line" id="L582">};</span>
<span class="line" id="L583"></span>
<span class="line" id="L584"><span class="tok-comment">// panel for field</span>
</span>
<span class="line" id="L585"><span class="tok-kw">fn</span> <span class="tok-fn">Panel_Fmt02</span>(nposx : <span class="tok-type">usize</span>) *pnl.PANEL {</span>
<span class="line" id="L586"></span>
<span class="line" id="L587"><span class="tok-kw">var</span> Panel : *pnl.PANEL = pnl.newPanelC(<span class="tok-str">&quot;FRAM01&quot;</span>,</span>
<span class="line" id="L588">                  nposx, <span class="tok-number">2</span>,</span>
<span class="line" id="L589">                  <span class="tok-number">12</span>,</span>
<span class="line" id="L590">                  <span class="tok-number">62</span> ,</span>
<span class="line" id="L591">                  dds.CADRE.line1,</span>
<span class="line" id="L592">                  <span class="tok-str">&quot;Def.Field&quot;</span>);</span>
<span class="line" id="L593"></span>
<span class="line" id="L594">  Panel.button.append(btn.newButton(</span>
<span class="line" id="L595">                        kbd.F9,                 <span class="tok-comment">// function</span>
</span>
<span class="line" id="L596">                        <span class="tok-null">true</span>,                   <span class="tok-comment">// show</span>
</span>
<span class="line" id="L597">                        <span class="tok-null">true</span>,                   <span class="tok-comment">// check field</span>
</span>
<span class="line" id="L598">                        <span class="tok-str">&quot;Enrg&quot;</span>,                 <span class="tok-comment">// title </span>
</span>
<span class="line" id="L599">                        )</span>
<span class="line" id="L600">                    ) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L601"></span>
<span class="line" id="L602">  Panel.button.append(btn.newButton(</span>
<span class="line" id="L603">                        kbd.F12,                <span class="tok-comment">// function</span>
</span>
<span class="line" id="L604">                        <span class="tok-null">true</span>,                   <span class="tok-comment">// show</span>
</span>
<span class="line" id="L605">                        <span class="tok-null">false</span>,                  <span class="tok-comment">// check field</span>
</span>
<span class="line" id="L606">                        <span class="tok-str">&quot;Return&quot;</span>,               <span class="tok-comment">// title </span>
</span>
<span class="line" id="L607">                        )</span>
<span class="line" id="L608">                    ) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L609"></span>
<span class="line" id="L610"></span>
<span class="line" id="L611">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fname)   ,<span class="tok-number">2</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;name.....:&quot;</span>) ) </span>
<span class="line" id="L612">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L613"></span>
<span class="line" id="L614">  Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.fname),</span>
<span class="line" id="L615">                <span class="tok-number">2</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L616">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L617">                <span class="tok-number">15</span>,           <span class="tok-comment">// len</span>
</span>
<span class="line" id="L618">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L619">                <span class="tok-null">true</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L620">                <span class="tok-str">&quot;required&quot;</span>,   <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L621">                <span class="tok-str">&quot;please enter text [a-zA-Z]{1,1}  [A-z0-9]&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L622">                <span class="tok-str">&quot;^[A-Z]{1,1}[a-zA-Z0-9]{0,}$&quot;</span>              <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L623">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L624"></span>
<span class="line" id="L625">  fld.setTask(Panel,<span class="tok-builtin">@intFromEnum</span>(fp02.fname),<span class="tok-str">&quot;TaskName&quot;</span>)</span>
<span class="line" id="L626">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L627"></span>
<span class="line" id="L628">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fposx)   ,<span class="tok-number">3</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;PosX.:&quot;</span>) ) </span>
<span class="line" id="L629">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L630"></span>
<span class="line" id="L631">  Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fposx),</span>
<span class="line" id="L632">                <span class="tok-number">3</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L633">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L634">                <span class="tok-number">2</span>,            <span class="tok-comment">// len</span>
</span>
<span class="line" id="L635">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L636">                <span class="tok-null">false</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L637">                <span class="tok-str">&quot;&quot;</span>,  <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L638">                <span class="tok-str">&quot;&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L639">                <span class="tok-str">&quot;&quot;</span>   <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L640">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L641"></span>
<span class="line" id="L642">  fld.setProtect(Panel,<span class="tok-builtin">@intFromEnum</span>(fp02.fposx),<span class="tok-null">true</span>)</span>
<span class="line" id="L643">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L644"></span>
<span class="line" id="L645">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fposy)   ,<span class="tok-number">3</span>,<span class="tok-number">12</span>, <span class="tok-str">&quot;PosY.:&quot;</span>) ) </span>
<span class="line" id="L646">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L647"></span>
<span class="line" id="L648">  Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fposy),</span>
<span class="line" id="L649">                <span class="tok-number">3</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L650">                <span class="tok-number">12</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L651">                <span class="tok-number">3</span>,            <span class="tok-comment">// len</span>
</span>
<span class="line" id="L652">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L653">                <span class="tok-null">false</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L654">                <span class="tok-str">&quot;&quot;</span>,  <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L655">                <span class="tok-str">&quot;&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L656">                <span class="tok-str">&quot;&quot;</span>   <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L657">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L658"></span>
<span class="line" id="L659">  fld.setProtect(Panel,<span class="tok-builtin">@intFromEnum</span>(fp02.fposy),<span class="tok-null">true</span>)</span>
<span class="line" id="L660">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L661">  </span>
<span class="line" id="L662">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ftype)   ,<span class="tok-number">3</span>,<span class="tok-number">32</span>, <span class="tok-str">&quot;Type.:&quot;</span>) )</span>
<span class="line" id="L663">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L664"></span>
<span class="line" id="L665">  Panel.field.append(fld.newFieldFunc(<span class="tok-builtin">@tagName</span>(fp02.ftype),</span>
<span class="line" id="L666">                <span class="tok-number">3</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L667">                <span class="tok-number">32</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftype)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L668">                <span class="tok-number">19</span>,           <span class="tok-comment">// len</span>
</span>
<span class="line" id="L669">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L670">                <span class="tok-null">true</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L671">                <span class="tok-str">&quot;funcType&quot;</span>,   <span class="tok-comment">// function</span>
</span>
<span class="line" id="L672">                <span class="tok-str">&quot;Reference type required&quot;</span>,  <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L673">                <span class="tok-str">&quot;Refence field&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L674">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L675"></span>
<span class="line" id="L676">  </span>
<span class="line" id="L677">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fwidth)   ,<span class="tok-number">4</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;Width.:&quot;</span>) )</span>
<span class="line" id="L678">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L679"></span>
<span class="line" id="L680">  Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fwidth),</span>
<span class="line" id="L681">                <span class="tok-number">4</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L682">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L683">                <span class="tok-number">3</span>,            <span class="tok-comment">// len</span>
</span>
<span class="line" id="L684">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L685">                <span class="tok-null">true</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L686">                <span class="tok-str">&quot;Len field required or too long&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L687">                <span class="tok-str">&quot;len field&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L688">                <span class="tok-str">&quot;&quot;</span>            <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L689">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L690"></span>
<span class="line" id="L691">  fld.setTask(Panel,<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth),<span class="tok-str">&quot;TaskWidth&quot;</span>) </span>
<span class="line" id="L692">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));}; </span>
<span class="line" id="L693">  </span>
<span class="line" id="L694">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fscal)   ,<span class="tok-number">4</span>,<span class="tok-number">20</span>, <span class="tok-str">&quot;Scal.:&quot;</span>) )</span>
<span class="line" id="L695">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L696"></span>
<span class="line" id="L697">  Panel.field.append(fld.newFieldUDigit(<span class="tok-builtin">@tagName</span>(fp02.fscal),</span>
<span class="line" id="L698">                <span class="tok-number">4</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L699">                <span class="tok-number">20</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L700">                <span class="tok-number">3</span>,            <span class="tok-comment">// len</span>
</span>
<span class="line" id="L701">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L702">                <span class="tok-null">true</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L703">                <span class="tok-str">&quot;Len Scal field required or too long&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L704">                <span class="tok-str">&quot;len Scal field&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L705">                <span class="tok-str">&quot;&quot;</span>            <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L706">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L707"></span>
<span class="line" id="L708">  fld.setTask(Panel,<span class="tok-builtin">@intFromEnum</span>(fp02.fscal),<span class="tok-str">&quot;TaskScal&quot;</span>) </span>
<span class="line" id="L709">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L710">  </span>
<span class="line" id="L711">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.frequi)   ,<span class="tok-number">4</span>,<span class="tok-number">32</span>, <span class="tok-str">&quot;Required.:&quot;</span>) )</span>
<span class="line" id="L712">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L713"></span>
<span class="line" id="L714">  Panel.field.append(fld.newFieldSwitch(<span class="tok-builtin">@tagName</span>(fp02.frequi),</span>
<span class="line" id="L715">                <span class="tok-number">4</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L716">                <span class="tok-number">32</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L717">                <span class="tok-null">false</span>,        <span class="tok-comment">// required</span>
</span>
<span class="line" id="L718">                <span class="tok-str">&quot;field required True or False&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L719">                <span class="tok-str">&quot; field value required True or False&quot;</span> <span class="tok-comment">// Text</span>
</span>
<span class="line" id="L720">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L721">  </span>
<span class="line" id="L722">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fprotect)   ,<span class="tok-number">5</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;Protect.:&quot;</span>) ) </span>
<span class="line" id="L723">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L724"></span>
<span class="line" id="L725">  Panel.field.append(fld.newFieldSwitch(<span class="tok-builtin">@tagName</span>(fp02.fprotect),</span>
<span class="line" id="L726">                <span class="tok-number">5</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L727">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fprotect)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L728">                <span class="tok-null">false</span>,        <span class="tok-comment">// required</span>
</span>
<span class="line" id="L729">                <span class="tok-str">&quot;Protect required True or False&quot;</span>, <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L730">                <span class="tok-str">&quot; field Protect required True or False&quot;</span> <span class="tok-comment">// Text</span>
</span>
<span class="line" id="L731">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L732"></span>
<span class="line" id="L733">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fedtcar)   ,<span class="tok-number">5</span>,<span class="tok-number">20</span>, <span class="tok-str">&quot;Edit Car.:&quot;</span>) ) </span>
<span class="line" id="L734">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L735"></span>
<span class="line" id="L736">  Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.fedtcar),</span>
<span class="line" id="L737">                <span class="tok-number">5</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L738">                <span class="tok-number">20</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L739">                <span class="tok-number">1</span>,           <span class="tok-comment">// len</span>
</span>
<span class="line" id="L740">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L741">                <span class="tok-null">false</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L742">                <span class="tok-str">&quot;&quot;</span>,   <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L743">                <span class="tok-str">&quot;please enter text ex:$ € % £&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L744">                <span class="tok-str">&quot;&quot;</span>              <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L745">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L746"></span>
<span class="line" id="L747">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ferrmsg)   ,<span class="tok-number">6</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;Err Msg.:&quot;</span>) )</span>
<span class="line" id="L748">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L749"></span>
<span class="line" id="L750">  Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.ferrmsg),</span>
<span class="line" id="L751">                <span class="tok-number">6</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L752">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L753">                <span class="tok-number">50</span>,           <span class="tok-comment">// len</span>
</span>
<span class="line" id="L754">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L755">                <span class="tok-null">false</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L756">                <span class="tok-str">&quot;required&quot;</span>,   <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L757">                <span class="tok-str">&quot;please enter text  message error&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L758">                <span class="tok-str">&quot;&quot;</span>              <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L759">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L760"></span>
<span class="line" id="L761">  fld.setTask(Panel,<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg),<span class="tok-str">&quot;TaskErrmsg&quot;</span>) </span>
<span class="line" id="L762">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L763"></span>
<span class="line" id="L764"></span>
<span class="line" id="L765">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.fhelp)   ,<span class="tok-number">7</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;Help.:&quot;</span>) )</span>
<span class="line" id="L766">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L767"></span>
<span class="line" id="L768">  Panel.field.append(fld.newFieldTextFull(<span class="tok-builtin">@tagName</span>(fp02.fhelp),</span>
<span class="line" id="L769">                <span class="tok-number">7</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L770">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L771">                <span class="tok-number">50</span>,           <span class="tok-comment">// len</span>
</span>
<span class="line" id="L772">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L773">                <span class="tok-null">true</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L774">                <span class="tok-str">&quot;required Help&quot;</span>,   <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L775">                <span class="tok-str">&quot;please enter text  Help&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L776">                <span class="tok-str">&quot;&quot;</span>              <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L777">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L778"></span>
<span class="line" id="L779">  </span>
<span class="line" id="L780">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ffunc)   ,<span class="tok-number">8</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;Function.:&quot;</span>) ) </span>
<span class="line" id="L781">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L782"></span>
<span class="line" id="L783">  Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.ffunc),</span>
<span class="line" id="L784">                <span class="tok-number">8</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L785">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L786">                <span class="tok-number">15</span>,           <span class="tok-comment">// len</span>
</span>
<span class="line" id="L787">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L788">                <span class="tok-null">false</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L789">                <span class="tok-str">&quot;required Function&quot;</span>,   <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L790">                <span class="tok-str">&quot;please enter Name Function&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L791">                <span class="tok-str">&quot;^[A-Z]{1,1}[a-zA-Z0-9]{0,}$&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L792">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L793"></span>
<span class="line" id="L794">  fld.setTask(Panel,<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc),<span class="tok-str">&quot;TaskFunc&quot;</span>) </span>
<span class="line" id="L795">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L796"></span>
<span class="line" id="L797">  Panel.label.append(lbl.newLabel(<span class="tok-builtin">@tagName</span>(fp02.ftask)   ,<span class="tok-number">9</span>,<span class="tok-number">2</span>, <span class="tok-str">&quot;Task.:&quot;</span>) ) </span>
<span class="line" id="L798">                <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L799"></span>
<span class="line" id="L800">  Panel.field.append(fld.newFieldAlphaNumeric(<span class="tok-builtin">@tagName</span>(fp02.ftask),</span>
<span class="line" id="L801">                <span class="tok-number">9</span>,            <span class="tok-comment">// posx</span>
</span>
<span class="line" id="L802">                <span class="tok-number">2</span> + Panel.label.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftask)].text.len,  <span class="tok-comment">//posy</span>
</span>
<span class="line" id="L803">                <span class="tok-number">15</span>,           <span class="tok-comment">// len</span>
</span>
<span class="line" id="L804">                <span class="tok-str">&quot;&quot;</span>,           <span class="tok-comment">// text</span>
</span>
<span class="line" id="L805">                <span class="tok-null">false</span>,         <span class="tok-comment">// required</span>
</span>
<span class="line" id="L806">                <span class="tok-str">&quot;required Task&quot;</span>,   <span class="tok-comment">// Msg err</span>
</span>
<span class="line" id="L807">                <span class="tok-str">&quot;please enter Name Task&quot;</span>,  <span class="tok-comment">// help</span>
</span>
<span class="line" id="L808">                <span class="tok-str">&quot;^[A-Z]{1,1}[a-zA-Z0-9]{0,}$&quot;</span> <span class="tok-comment">// regex</span>
</span>
<span class="line" id="L809">                )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L810"></span>
<span class="line" id="L811"></span>
<span class="line" id="L812">  <span class="tok-kw">return</span> Panel;</span>
<span class="line" id="L813">}</span>
<span class="line" id="L814"></span>
<span class="line" id="L815"></span>
<span class="line" id="L816"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L817"></span>
<span class="line" id="L818"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L819"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L820"><span class="tok-comment">// choix Cadre</span>
</span>
<span class="line" id="L821"><span class="tok-kw">fn</span> <span class="tok-fn">funcType</span>( vpnl: *pnl.PANEL , vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L822"></span>
<span class="line" id="L823">  <span class="tok-kw">var</span> pos:<span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L824"></span>
<span class="line" id="L825">  <span class="tok-kw">var</span> Xcombo : *grd.GRID =  grd.newGridC(</span>
<span class="line" id="L826">        <span class="tok-str">&quot;qryPanel&quot;</span>,</span>
<span class="line" id="L827">        vpnl.posx + <span class="tok-number">1</span>,</span>
<span class="line" id="L828">        vpnl.posy + <span class="tok-number">1</span>,</span>
<span class="line" id="L829">        <span class="tok-number">5</span>,</span>
<span class="line" id="L830">        grd.gridStyle,</span>
<span class="line" id="L831">        dds.CADRE.line1,</span>
<span class="line" id="L832">    );</span>
<span class="line" id="L833">  <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(Xcombo);</span>
<span class="line" id="L834">  grd.newCell(Xcombo,<span class="tok-str">&quot;Ref.Type&quot;</span>, <span class="tok-number">19</span>, dds.REFTYP.TEXT_FREE, dds.ForegroundColor.fgGreen);</span>
<span class="line" id="L835">  grd.setHeaders(Xcombo);</span>
<span class="line" id="L836">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TEXT_FREE&quot;</span>});            <span class="tok-comment">// Free</span>
</span>
<span class="line" id="L837">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TEXT_FULL&quot;</span>});            <span class="tok-comment">// Letter Digit Char-special</span>
</span>
<span class="line" id="L838">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA&quot;</span>});                <span class="tok-comment">// Letter</span>
</span>
<span class="line" id="L839">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_UPPER&quot;</span>});          <span class="tok-comment">// Letter</span>
</span>
<span class="line" id="L840">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_NUMERIC&quot;</span>});        <span class="tok-comment">// Letter Digit espace -</span>
</span>
<span class="line" id="L841">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;ALPHA_NUMERIC_UPPER&quot;</span>});  <span class="tok-comment">// Letter Digit espace -</span>
</span>
<span class="line" id="L842">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;PASSWORD,&quot;</span>});            <span class="tok-comment">// Letter Digit and normaliz char-special</span>
</span>
<span class="line" id="L843">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;YES_NO&quot;</span>});               <span class="tok-comment">// 'y' or 'Y' / 'o' or 'O'</span>
</span>
<span class="line" id="L844">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;UDIGIT&quot;</span>});               <span class="tok-comment">// Digit unsigned</span>
</span>
<span class="line" id="L845">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DIGIT&quot;</span>});                <span class="tok-comment">// Digit signed </span>
</span>
<span class="line" id="L846">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;UDECIMAL&quot;</span>});             <span class="tok-comment">// Decimal unsigned</span>
</span>
<span class="line" id="L847">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DECIMAL&quot;</span>});              <span class="tok-comment">// Decimal signed</span>
</span>
<span class="line" id="L848">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_ISO&quot;</span>});             <span class="tok-comment">// YYYY/MM/DD</span>
</span>
<span class="line" id="L849">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_FR&quot;</span>});              <span class="tok-comment">// DD/MM/YYYY</span>
</span>
<span class="line" id="L850">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;DATE_US&quot;</span>});              <span class="tok-comment">// MM/DD/YYYY</span>
</span>
<span class="line" id="L851">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;TELEPHONE&quot;</span>});            <span class="tok-comment">// (+123) 6 00 01 00 02 </span>
</span>
<span class="line" id="L852">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;MAIL_ISO&quot;</span>});             <span class="tok-comment">// normalize regex</span>
</span>
<span class="line" id="L853">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;SWITCH&quot;</span>});               <span class="tok-comment">// CTRUE CFALSE</span>
</span>
<span class="line" id="L854">  grd.addRows(Xcombo, &amp;.{<span class="tok-str">&quot;FUNC&quot;</span>});                 <span class="tok-comment">// call Function</span>
</span>
<span class="line" id="L855">  <span class="tok-comment">//grd.addRows(Xcombo, &amp;.{&quot;CAll&quot;});                 // call Program</span>
</span>
<span class="line" id="L856"></span>
<span class="line" id="L857">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TEXT_FREE&quot;</span>)) pos = <span class="tok-number">0</span>;</span>
<span class="line" id="L858">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TEXT_FULL&quot;</span>)) pos = <span class="tok-number">1</span>;</span>
<span class="line" id="L859">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA&quot;</span>)) pos = <span class="tok-number">2</span>;</span>
<span class="line" id="L860">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_UPPER&quot;</span>)) pos = <span class="tok-number">3</span>;</span>
<span class="line" id="L861">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_NUMERIC&quot;</span>)) pos = <span class="tok-number">4</span>;</span>
<span class="line" id="L862">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;ALPHA_NUMERIC_UPPER&quot;</span>)) pos = <span class="tok-number">5</span>;</span>
<span class="line" id="L863">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;PASSWORD&quot;</span>)) pos = <span class="tok-number">6</span>;</span>
<span class="line" id="L864">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;YES_NO&quot;</span>)) pos = <span class="tok-number">7</span>;</span>
<span class="line" id="L865">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDIGIT&quot;</span>)) pos = <span class="tok-number">8</span>;</span>
<span class="line" id="L866">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDECIMAL&quot;</span>)) pos = <span class="tok-number">9</span>;</span>
<span class="line" id="L867">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) pos = <span class="tok-number">10</span>;</span>
<span class="line" id="L868">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_ISO&quot;</span>)) pos = <span class="tok-number">11</span>;</span>
<span class="line" id="L869">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_FR&quot;</span>)) pos = <span class="tok-number">12</span>;</span>
<span class="line" id="L870">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DATE_US&quot;</span>)) pos = <span class="tok-number">13</span>;</span>
<span class="line" id="L871">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;TELEPHONE&quot;</span>)) pos = <span class="tok-number">14</span>;</span>
<span class="line" id="L872">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;MAIL_ISO&quot;</span>)) pos = <span class="tok-number">15</span>;</span>
<span class="line" id="L873">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;SWITCH&quot;</span>)) pos = <span class="tok-number">16</span>;</span>
<span class="line" id="L874">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;FUNC&quot;</span>)) pos = <span class="tok-number">17</span>;</span>
<span class="line" id="L875">  <span class="tok-comment">//if (std.mem.eql(u8, vfld.text, &quot;CALL&quot;)) pos = 18;</span>
</span>
<span class="line" id="L876"></span>
<span class="line" id="L877">  <span class="tok-kw">var</span> Gkey: grd.GridSelect = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L878">    <span class="tok-kw">defer</span> Gkey.Buf.deinit();</span>
<span class="line" id="L879"></span>
<span class="line" id="L880">  <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L881">        Gkey = grd.ioCombo(Xcombo, pos);</span>
<span class="line" id="L882"></span>
<span class="line" id="L883">        <span class="tok-kw">if</span> (Gkey.Key == kbd.enter) {</span>
<span class="line" id="L884">            grd.rstPanel(Xcombo,vpnl);</span>
<span class="line" id="L885">            grd.freeGrid(Xcombo);</span>
<span class="line" id="L886">            fld.setText(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.ftype),Gkey.Buf.items[<span class="tok-number">0</span>]) </span>
<span class="line" id="L887">                <span class="tok-kw">catch</span> |err| {dsperr.errorForms(vpnl, err); <span class="tok-kw">return</span>;};</span>
<span class="line" id="L888"></span>
<span class="line" id="L889">            <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, Gkey.Buf.items[<span class="tok-number">0</span>], <span class="tok-str">&quot;UDECIMAL&quot;</span>) <span class="tok-kw">or</span> </span>
<span class="line" id="L890">                std.mem.eql(<span class="tok-type">u8</span>, Gkey.Buf.items[<span class="tok-number">0</span>], <span class="tok-str">&quot;DECIMAL&quot;</span>) ) {</span>
<span class="line" id="L891">                  fld.setProtect(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.fscal),<span class="tok-null">false</span>) <span class="tok-kw">catch</span> |err| {dsperr.errorForms(vpnl,  err);};</span>
<span class="line" id="L892">                }</span>
<span class="line" id="L893">                <span class="tok-kw">else</span> {</span>
<span class="line" id="L894">                  fld.setProtect(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.fscal),<span class="tok-null">true</span>) <span class="tok-kw">catch</span> |err| {dsperr.errorForms(vpnl,  err);};</span>
<span class="line" id="L895"></span>
<span class="line" id="L896">                  fld.setText(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.fscal),<span class="tok-str">&quot;0&quot;</span>) <span class="tok-kw">catch</span> |err| {dsperr.errorForms(vpnl,  err);};</span>
<span class="line" id="L897">                }</span>
<span class="line" id="L898"></span>
<span class="line" id="L899">            <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, Gkey.Buf.items[<span class="tok-number">0</span>], <span class="tok-str">&quot;FUNC&quot;</span>)) {</span>
<span class="line" id="L900">                  fld.setProtect(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc),<span class="tok-null">false</span>) <span class="tok-kw">catch</span> |err| {dsperr.errorForms(vpnl,  err);};</span>
<span class="line" id="L901">                }</span>
<span class="line" id="L902">                <span class="tok-kw">else</span> { </span>
<span class="line" id="L903">                  fld.setProtect(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc),<span class="tok-null">true</span>) <span class="tok-kw">catch</span> |err| {dsperr.errorForms( vpnl, err);};</span>
<span class="line" id="L904"></span>
<span class="line" id="L905">                  fld.setText(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc),<span class="tok-str">&quot;&quot;</span>) <span class="tok-kw">catch</span> |err| {dsperr.errorForms(vpnl,  err);};</span>
<span class="line" id="L906">                }</span>
<span class="line" id="L907"></span>
<span class="line" id="L908">            <span class="tok-kw">return</span> ;</span>
<span class="line" id="L909">        }</span>
<span class="line" id="L910"></span>
<span class="line" id="L911"></span>
<span class="line" id="L912">        <span class="tok-kw">if</span> (Gkey.Key == kbd.esc) {</span>
<span class="line" id="L913">            grd.rstPanel(Xcombo,vpnl);</span>
<span class="line" id="L914">            grd.freeGrid(Xcombo);</span>
<span class="line" id="L915">            <span class="tok-kw">return</span>;</span>
<span class="line" id="L916">        }</span>
<span class="line" id="L917">    } </span>
<span class="line" id="L918">}</span>
<span class="line" id="L919"></span>
<span class="line" id="L920"><span class="tok-kw">var</span> callFunc: FuncEnum = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L921"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L922"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L923"><span class="tok-comment">/// run emun Function ex: combo</span></span>
<span class="line" id="L924"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> FuncEnum = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L925">  funcType,</span>
<span class="line" id="L926">  none,</span>
<span class="line" id="L927"></span>
<span class="line" id="L928">  <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">run</span>(self: FuncEnum, vpnl : *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span>  {</span>
<span class="line" id="L929">    <span class="tok-kw">switch</span> (self) {</span>
<span class="line" id="L930">        .funcType =&gt; funcType(vpnl,vfld),</span>
<span class="line" id="L931">        <span class="tok-kw">else</span> =&gt; dsperr.errorForms( vpnl, ErrMain.main_run_EnumFunc_invalide)</span>
<span class="line" id="L932">    }</span>
<span class="line" id="L933">  }</span>
<span class="line" id="L934"></span>
<span class="line" id="L935">  <span class="tok-kw">fn</span> <span class="tok-fn">searchFn</span> ( vtext: [] <span class="tok-kw">const</span> <span class="tok-type">u8</span> ) FuncEnum {</span>
<span class="line" id="L936">    <span class="tok-kw">var</span> max :<span class="tok-type">usize</span> = <span class="tok-builtin">@typeInfo</span>(FuncEnum).Enum.fields.len;</span>
<span class="line" id="L937">    </span>
<span class="line" id="L938">    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(FuncEnum).Enum.fields) |f| { </span>
<span class="line" id="L939">        <span class="tok-kw">if</span> ( std.mem.eql(<span class="tok-type">u8</span>, f.name , vtext) ) <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(FuncEnum,<span class="tok-builtin">@enumFromInt</span>(f.value));</span>
<span class="line" id="L940">      }</span>
<span class="line" id="L941">      <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(FuncEnum,<span class="tok-builtin">@enumFromInt</span>(max)); </span>
<span class="line" id="L942">  }</span>
<span class="line" id="L943">};</span>
<span class="line" id="L944"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L945"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L946"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L947"><span class="tok-comment">// test exist Name for add or change name</span>
</span>
<span class="line" id="L948"></span>
<span class="line" id="L949"><span class="tok-kw">fn</span> <span class="tok-fn">TaskName</span>( vpnl: *pnl.PANEL , vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L950"></span>
<span class="line" id="L951">  <span class="tok-kw">for</span> (vpnl.field.items) |f | {</span>
<span class="line" id="L952">    <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, f.name, vfld.text)) {</span>
<span class="line" id="L953">      pnl.msgErr(vpnl, <span class="tok-str">&quot;Already existing invalide Name Field&quot;</span>);</span>
<span class="line" id="L954">      vpnl.keyField = kbd.task; </span>
<span class="line" id="L955">      <span class="tok-kw">return</span> ;</span>
<span class="line" id="L956">    }</span>
<span class="line" id="L957">  }</span>
<span class="line" id="L958">  <span class="tok-kw">return</span>;</span>
<span class="line" id="L959">}</span>
<span class="line" id="L960"><span class="tok-kw">fn</span> <span class="tok-fn">TaskWidth</span>( vpnl: *pnl.PANEL , vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L961">    </span>
<span class="line" id="L962">    <span class="tok-kw">var</span> vlen = strToUsize(vfld.text);</span>
<span class="line" id="L963">    </span>
<span class="line" id="L964">    <span class="tok-kw">if</span> (vlen + vpnl.posx &gt;= vpnl.cols ) {</span>
<span class="line" id="L965">      <span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{d} the length of the zone is excessive&quot;</span>, .{vlen})</span>
<span class="line" id="L966">                          <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L967">      pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L968">      vpnl.keyField = kbd.task;</span>
<span class="line" id="L969">    }</span>
<span class="line" id="L970">  <span class="tok-kw">return</span>;</span>
<span class="line" id="L971">}</span>
<span class="line" id="L972"></span>
<span class="line" id="L973"><span class="tok-kw">fn</span> <span class="tok-fn">TaskScal</span>( vpnl: *pnl.PANEL , vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L974"></span>
<span class="line" id="L975">    <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;UDECIMAL&quot;</span>) <span class="tok-kw">or</span> std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;DECIMAL&quot;</span>)) {</span>
<span class="line" id="L976">    </span>
<span class="line" id="L977">      <span class="tok-kw">var</span> vscal =  strToUsize(vfld.text);</span>
<span class="line" id="L978"></span>
<span class="line" id="L979">      <span class="tok-kw">var</span> vlen  =  strToUsize( </span>
<span class="line" id="L980">        fld.getText(vpnl,<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth))</span>
<span class="line" id="L981">        <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));}</span>
<span class="line" id="L982">      );</span>
<span class="line" id="L983"></span>
<span class="line" id="L984">    </span>
<span class="line" id="L985">      <span class="tok-kw">if</span> (vscal &gt;= vlen) {</span>
<span class="line" id="L986">        <span class="tok-kw">const</span> msg = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{d} the Scal of the zone is excessive&quot;</span>, .{vlen}) </span>
<span class="line" id="L987">                            <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L988">        pnl.msgErr(vpnl, msg);</span>
<span class="line" id="L989">        vpnl.keyField = kbd.task;</span>
<span class="line" id="L990">      }</span>
<span class="line" id="L991">    }</span>
<span class="line" id="L992">  <span class="tok-kw">return</span>;</span>
<span class="line" id="L993">}</span>
<span class="line" id="L994"></span>
<span class="line" id="L995"></span>
<span class="line" id="L996"></span>
<span class="line" id="L997"><span class="tok-kw">fn</span>  <span class="tok-fn">TaskErrmsg</span>( vpnl: *pnl.PANEL , vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L998">    </span>
<span class="line" id="L999"></span>
<span class="line" id="L1000">  <span class="tok-kw">if</span> ( !vfld.zwitch <span class="tok-kw">and</span>  std.mem.eql(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, vfld.text)) {</span>
<span class="line" id="L1001">    pnl.msgErr(vpnl, <span class="tok-str">&quot;the error message text is invalid&quot;</span>);</span>
<span class="line" id="L1002">    vpnl.keyField = kbd.task;</span>
<span class="line" id="L1003">  }</span>
<span class="line" id="L1004">    </span>
<span class="line" id="L1005">  <span class="tok-kw">return</span>;</span>
<span class="line" id="L1006">}</span>
<span class="line" id="L1007"></span>
<span class="line" id="L1008"><span class="tok-kw">fn</span>  <span class="tok-fn">TaskFunc</span>( vpnl: *pnl.PANEL , vfld: *fld.FIELD) <span class="tok-type">void</span> {</span>
<span class="line" id="L1009">    </span>
<span class="line" id="L1010">  <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, vfld.text, <span class="tok-str">&quot;FUNC&quot;</span>)) {</span>
<span class="line" id="L1011"></span>
<span class="line" id="L1012"></span>
<span class="line" id="L1013">    <span class="tok-kw">if</span> (std.mem.eql(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, vfld.text)) {</span>
<span class="line" id="L1014">      pnl.msgErr(vpnl, <span class="tok-str">&quot;the function name is invalid&quot;</span>);</span>
<span class="line" id="L1015">      vpnl.keyField = kbd.task;</span>
<span class="line" id="L1016">    }</span>
<span class="line" id="L1017">  }</span>
<span class="line" id="L1018">    </span>
<span class="line" id="L1019">  <span class="tok-kw">return</span>;</span>
<span class="line" id="L1020">}</span>
<span class="line" id="L1021"><span class="tok-kw">var</span> callTask: TaskEnum = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1022"><span class="tok-comment">//=================================================</span>
</span>
<span class="line" id="L1023"><span class="tok-comment">// description Function</span>
</span>
<span class="line" id="L1024"><span class="tok-comment">/// run emun Function ex: combo</span></span>
<span class="line" id="L1025"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> TaskEnum = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L1026">  TaskName,</span>
<span class="line" id="L1027">  TaskWidth,</span>
<span class="line" id="L1028">  TaskScal,</span>
<span class="line" id="L1029">  TaskErrmsg,</span>
<span class="line" id="L1030">  TaskFunc,</span>
<span class="line" id="L1031">  none,</span>
<span class="line" id="L1032"></span>
<span class="line" id="L1033">  <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">run</span>(self: TaskEnum,vpnl : *pnl.PANEL, vfld: *fld.FIELD) <span class="tok-type">void</span>  {</span>
<span class="line" id="L1034">      <span class="tok-kw">switch</span> (self) {</span>
<span class="line" id="L1035">          .TaskName   =&gt; TaskName(vpnl,vfld),</span>
<span class="line" id="L1036">          .TaskWidth  =&gt; TaskWidth(vpnl,vfld),</span>
<span class="line" id="L1037">          .TaskScal   =&gt; TaskScal(vpnl,vfld),</span>
<span class="line" id="L1038">          .TaskErrmsg =&gt; TaskErrmsg(vpnl,vfld),</span>
<span class="line" id="L1039">          .TaskFunc   =&gt; TaskFunc(vpnl,vfld),</span>
<span class="line" id="L1040"></span>
<span class="line" id="L1041"></span>
<span class="line" id="L1042">          <span class="tok-kw">else</span> =&gt; dsperr.errorForms(vpnl, ErrMain.main_run_EnumTask_invalide)</span>
<span class="line" id="L1043">      }</span>
<span class="line" id="L1044">  }</span>
<span class="line" id="L1045">  <span class="tok-kw">fn</span> <span class="tok-fn">searchFn</span> ( vtext: [] <span class="tok-kw">const</span> <span class="tok-type">u8</span> ) TaskEnum {</span>
<span class="line" id="L1046">    <span class="tok-kw">var</span> max :<span class="tok-type">usize</span> = <span class="tok-builtin">@typeInfo</span>(TaskEnum).Enum.fields.len;</span>
<span class="line" id="L1047">    </span>
<span class="line" id="L1048">    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(TaskEnum).Enum.fields) |f| { </span>
<span class="line" id="L1049">        <span class="tok-kw">if</span> ( std.mem.eql(<span class="tok-type">u8</span>, f.name , vtext) ) <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(TaskEnum,<span class="tok-builtin">@enumFromInt</span>(f.value));</span>
<span class="line" id="L1050">      }</span>
<span class="line" id="L1051">      <span class="tok-kw">return</span> <span class="tok-builtin">@as</span>(TaskEnum,<span class="tok-builtin">@enumFromInt</span>(max));</span>
<span class="line" id="L1052">  }</span>
<span class="line" id="L1053">};</span>
<span class="line" id="L1054"><span class="tok-comment">//---------------------------------------------------------------------------</span>
</span>
<span class="line" id="L1055"><span class="tok-comment">//  string return enum</span>
</span>
<span class="line" id="L1056"><span class="tok-kw">fn</span> <span class="tok-fn">strToEnum</span> (<span class="tok-kw">comptime</span> EnumTag: <span class="tok-type">type</span>, vtext: [] <span class="tok-kw">const</span> <span class="tok-type">u8</span> ) EnumTag {</span>
<span class="line" id="L1057"></span>
<span class="line" id="L1058">    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(EnumTag).Enum.fields) |f| {</span>
<span class="line" id="L1059">      </span>
<span class="line" id="L1060">      <span class="tok-kw">if</span> ( std.mem.eql(<span class="tok-type">u8</span>, f.name , vtext) )  <span class="tok-kw">return</span> <span class="tok-builtin">@field</span>(EnumTag, f.name);</span>
<span class="line" id="L1061"></span>
<span class="line" id="L1062">    }</span>
<span class="line" id="L1063">    </span>
<span class="line" id="L1064"></span>
<span class="line" id="L1065">    <span class="tok-kw">var</span> buffer : [<span class="tok-number">128</span>] <span class="tok-type">u8</span> =  [_]<span class="tok-type">u8</span>{<span class="tok-number">0</span>} ** <span class="tok-number">128</span>;</span>
<span class="line" id="L1066">    <span class="tok-kw">var</span> result =  std.fmt.bufPrintZ(buffer[<span class="tok-number">0</span>..], <span class="tok-str">&quot;invalid Text {s} for strToEnum &quot;</span>,.{vtext}) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1067">    <span class="tok-builtin">@panic</span>(result);</span>
<span class="line" id="L1068">}</span>
<span class="line" id="L1069"></span>
<span class="line" id="L1070"></span>
<span class="line" id="L1071"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">writeField</span>( vpnl : *pnl.PANEL) <span class="tok-type">void</span> {</span>
<span class="line" id="L1072"></span>
<span class="line" id="L1073">  term.getCursor();</span>
<span class="line" id="L1074">  <span class="tok-kw">var</span> v_posx: <span class="tok-type">usize</span> = term.posCurs.x; </span>
<span class="line" id="L1075">  <span class="tok-kw">var</span> v_posy: <span class="tok-type">usize</span> = term.posCurs.y;</span>
<span class="line" id="L1076"></span>
<span class="line" id="L1077">  <span class="tok-kw">if</span> (v_posx &lt; <span class="tok-number">15</span>) v_posx = <span class="tok-number">15</span> <span class="tok-kw">else</span> v_posx = <span class="tok-number">2</span>;</span>
<span class="line" id="L1078">  </span>
<span class="line" id="L1079"></span>
<span class="line" id="L1080"></span>
<span class="line" id="L1081">  <span class="tok-comment">// Init format panel</span>
</span>
<span class="line" id="L1082">  <span class="tok-kw">var</span> pFmt02 = Panel_Fmt02(v_posx);</span>
<span class="line" id="L1083">  </span>
<span class="line" id="L1084">  v_posx = term.posCurs.x;</span>
<span class="line" id="L1085">  <span class="tok-comment">// init zone Field</span>
</span>
<span class="line" id="L1086">  fld.setText(pFmt02,<span class="tok-builtin">@intFromEnum</span>(fp02.fposx),</span>
<span class="line" id="L1087">              std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{d}&quot;</span>,.{v_posx}) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L1088">  fld.setText(pFmt02,<span class="tok-builtin">@intFromEnum</span>(fp02.fposy),</span>
<span class="line" id="L1089">              std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{d}&quot;</span>,.{v_posy}) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span> ;</span>
<span class="line" id="L1090"></span>
<span class="line" id="L1091"></span>
<span class="line" id="L1092">  <span class="tok-comment">// init struct key</span>
</span>
<span class="line" id="L1093">  <span class="tok-kw">var</span> Tkey : term.Keyboard = <span class="tok-null">undefined</span> ; <span class="tok-comment">// defines the receiving structure of the keyboard</span>
</span>
<span class="line" id="L1094">  <span class="tok-kw">var</span> idx  : <span class="tok-type">usize</span> = <span class="tok-number">0</span>;</span>
<span class="line" id="L1095">  <span class="tok-kw">var</span> vReftyp : dds.REFTYP = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1096">  <span class="tok-kw">var</span> vText : []  <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1097">  <span class="tok-kw">var</span> vlen  : <span class="tok-type">usize</span> = <span class="tok-number">0</span> ;</span>
<span class="line" id="L1098">  <span class="tok-kw">var</span> vText2 : []  <span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L1099">  <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {</span>
<span class="line" id="L1100">    <span class="tok-comment">//Tkey = kbd.getKEY();</span>
</span>
<span class="line" id="L1101"></span>
<span class="line" id="L1102">    Tkey.Key = pnl.ioPanel(pFmt02);</span>
<span class="line" id="L1103">    <span class="tok-kw">switch</span> (Tkey.Key) {</span>
<span class="line" id="L1104">      <span class="tok-comment">// call function combo</span>
</span>
<span class="line" id="L1105">      .func =&gt; {</span>
<span class="line" id="L1106">        callFunc = FuncEnum.searchFn(pFmt02.field.items[pFmt02.idxfld].procfunc); </span>
<span class="line" id="L1107">        callFunc.run(pFmt02, &amp;pFmt02.field.items[pFmt02.idxfld]) ;</span>
<span class="line" id="L1108">      },</span>
<span class="line" id="L1109">      <span class="tok-comment">// call proc contrôl chek value</span>
</span>
<span class="line" id="L1110">      .task =&gt; {</span>
<span class="line" id="L1111">        callTask = TaskEnum.searchFn(pFmt02.field.items[pFmt02.idxfld].proctask); </span>
<span class="line" id="L1112">        callTask.run(pFmt02, &amp;pFmt02.field.items[pFmt02.idxfld]) ;</span>
<span class="line" id="L1113">      },</span>
<span class="line" id="L1114">      <span class="tok-comment">// write Field to panel</span>
</span>
<span class="line" id="L1115">      .F9 =&gt; {</span>
<span class="line" id="L1116">        </span>
<span class="line" id="L1117">        vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text) ;</span>
<span class="line" id="L1118">        vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) </span>
<span class="line" id="L1119">        <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1120"></span>
<span class="line" id="L1121">        vReftyp = strToEnum(dds.REFTYP,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftype)].text);</span>
<span class="line" id="L1122">        <span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'#'</span>) ;</span>
<span class="line" id="L1123">        <span class="tok-kw">switch</span>(vReftyp) {</span>
<span class="line" id="L1124">          dds.REFTYP.TEXT_FREE =&gt; {</span>
<span class="line" id="L1125">            vpnl.field.append(fld.newFieldTextFree(</span>
<span class="line" id="L1126">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1127">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1128">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1129">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1130">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1131">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1132">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1133">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1134">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1135"></span>
<span class="line" id="L1136">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1137">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1138"></span>
<span class="line" id="L1139"></span>
<span class="line" id="L1140">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1141">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1142">          },</span>
<span class="line" id="L1143">          dds.REFTYP.TEXT_FULL =&gt; {</span>
<span class="line" id="L1144">            vpnl.field.append(fld.newFieldTextFull(</span>
<span class="line" id="L1145">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1146">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1147">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1148">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1149">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1150">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1151">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1152">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1153">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1154"></span>
<span class="line" id="L1155">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1156">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1157"></span>
<span class="line" id="L1158">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1159">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl,err);};</span>
<span class="line" id="L1160"></span>
<span class="line" id="L1161">              </span>
<span class="line" id="L1162">          },</span>
<span class="line" id="L1163">          dds.REFTYP.ALPHA =&gt; {</span>
<span class="line" id="L1164">            vpnl.field.append(fld.newFieldAlpha(</span>
<span class="line" id="L1165">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1166">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1167">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1168">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1169">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1170">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1171">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1172">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1173">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1174"></span>
<span class="line" id="L1175">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1176">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1177"></span>
<span class="line" id="L1178">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1179">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1180">          },</span>
<span class="line" id="L1181">          dds.REFTYP.ALPHA_UPPER =&gt; {</span>
<span class="line" id="L1182">            vpnl.field.append(fld.newFieldAlphaUpper(</span>
<span class="line" id="L1183">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1184">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1185">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1186">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1187">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1188">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1189">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1190">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1191">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1192"></span>
<span class="line" id="L1193">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1194">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1195"></span>
<span class="line" id="L1196">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1197">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1198">          },</span>
<span class="line" id="L1199">          dds.REFTYP.ALPHA_NUMERIC =&gt; {</span>
<span class="line" id="L1200">            vpnl.field.append(fld.newFieldAlphaNumeric(</span>
<span class="line" id="L1201">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1202">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1203">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1204">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1205">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1206">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1207">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1208">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1209">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1210"></span>
<span class="line" id="L1211">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1212">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1213"></span>
<span class="line" id="L1214">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1215">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1216">          },</span>
<span class="line" id="L1217">          dds.REFTYP.ALPHA_NUMERIC_UPPER =&gt; {</span>
<span class="line" id="L1218">            vpnl.field.append(fld.newFieldAlphaNumericUpper(</span>
<span class="line" id="L1219">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1220">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1221">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1222">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1223">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1224">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1225">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1226">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1227">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1228"></span>
<span class="line" id="L1229">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1230">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1231">          },</span>
<span class="line" id="L1232">          dds.REFTYP.PASSWORD =&gt; {</span>
<span class="line" id="L1233">            vpnl.field.append(fld.newFieldPassword(</span>
<span class="line" id="L1234">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1235">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1236">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1237">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1238">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1239">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1240">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1241">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1242">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1243"></span>
<span class="line" id="L1244">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1245">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1246"></span>
<span class="line" id="L1247">              fld.setText(vpnl,idx,vText,)</span>
<span class="line" id="L1248">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms( vpnl, err);};</span>
<span class="line" id="L1249">          },</span>
<span class="line" id="L1250">          dds.REFTYP.YES_NO =&gt; {</span>
<span class="line" id="L1251">            vpnl.field.append(fld.newFieldYesNo(</span>
<span class="line" id="L1252">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1253">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1254">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1255">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1256">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1257">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1258">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1259">              )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1260"></span>
<span class="line" id="L1261">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1262">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1263"></span>
<span class="line" id="L1264">              fld.setText(vpnl,idx,vText,)</span>
<span class="line" id="L1265">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1266">          },</span>
<span class="line" id="L1267">          dds.REFTYP.UDIGIT =&gt; {</span>
<span class="line" id="L1268">            vpnl.field.append(fld.newFieldUDigit(</span>
<span class="line" id="L1269">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1270">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1271">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1272">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1273">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1274">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1275">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1276">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1277">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1278"></span>
<span class="line" id="L1279">              <span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>) ;</span>
<span class="line" id="L1280"></span>
<span class="line" id="L1281">                            </span>
<span class="line" id="L1282">              <span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1283">              <span class="tok-kw">if</span> ( pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1284">              vText = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{s}{s}&quot;</span>, </span>
<span class="line" id="L1285">              .{vText,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text}) </span>
<span class="line" id="L1286">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1287">              }</span>
<span class="line" id="L1288"></span>
<span class="line" id="L1289">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1290">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1291"></span>
<span class="line" id="L1292">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1293">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1294">          },</span>
<span class="line" id="L1295">          dds.REFTYP.DIGIT =&gt; {</span>
<span class="line" id="L1296">            vpnl.field.append(fld.newFieldDigit(</span>
<span class="line" id="L1297">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1298">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1299">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1300">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1301">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1302">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1303">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1304">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1305">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1306"></span>
<span class="line" id="L1307">              <span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>) ; <span class="tok-comment">// + signe</span>
</span>
<span class="line" id="L1308">              vText = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;+{s}&quot;</span>, .{vText}) </span>
<span class="line" id="L1309">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1310"></span>
<span class="line" id="L1311">              <span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1312">              <span class="tok-kw">if</span> ( pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1313">              vText = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{s}{s}&quot;</span>, </span>
<span class="line" id="L1314">              .{vText,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text}) </span>
<span class="line" id="L1315">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1316">              }</span>
<span class="line" id="L1317"></span>
<span class="line" id="L1318">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1319">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1320"></span>
<span class="line" id="L1321">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1322">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms( vpnl, err);};</span>
<span class="line" id="L1323">          },</span>
<span class="line" id="L1324">          dds.REFTYP.UDECIMAL =&gt; {</span>
<span class="line" id="L1325">            vpnl.field.append(fld.newFieldUDecimal(</span>
<span class="line" id="L1326">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1327">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1328">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1329">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1330">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text),</span>
<span class="line" id="L1331">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1332">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1333">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1334">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1335">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1336"></span>
<span class="line" id="L1337">              vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1338">              vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) </span>
<span class="line" id="L1339">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1340"></span>
<span class="line" id="L1341">              <span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>) ;</span>
<span class="line" id="L1342">              vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text);</span>
<span class="line" id="L1343">              vText2 = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) </span>
<span class="line" id="L1344">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1345">              <span class="tok-builtin">@memset</span>(vText2[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>) ;</span>
<span class="line" id="L1346">              vText = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{s},{s}&quot;</span>, .{vText,vText2}) </span>
<span class="line" id="L1347">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1348"></span>
<span class="line" id="L1349">              <span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1350">              <span class="tok-kw">if</span> ( pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) {</span>
<span class="line" id="L1351">              vText2 = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{s}{s}&quot;</span>, </span>
<span class="line" id="L1352">              .{vText2,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text}) </span>
<span class="line" id="L1353">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1354">              }</span>
<span class="line" id="L1355"></span>
<span class="line" id="L1356">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1357">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1358"></span>
<span class="line" id="L1359">              fld.setText(vpnl,idx,vText,)</span>
<span class="line" id="L1360">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1361">          },</span>
<span class="line" id="L1362">          dds.REFTYP.DECIMAL =&gt; {</span>
<span class="line" id="L1363">            vpnl.field.append(fld.newFieldDecimal(</span>
<span class="line" id="L1364">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1365">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1366">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1367">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1368">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text),</span>
<span class="line" id="L1369">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1370">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1371">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1372">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1373">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1374"></span>
<span class="line" id="L1375">              vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text);</span>
<span class="line" id="L1376">              vText = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) </span>
<span class="line" id="L1377">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1378"></span>
<span class="line" id="L1379">              <span class="tok-builtin">@memset</span>(vText[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>) ;</span>
<span class="line" id="L1380">              vlen = strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fscal)].text);</span>
<span class="line" id="L1381">              vText2 = std.heap.page_allocator.alloc(<span class="tok-type">u8</span>, vlen) </span>
<span class="line" id="L1382">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1383">              <span class="tok-builtin">@memset</span>(vText2[<span class="tok-number">0</span>..vlen], <span class="tok-str">'0'</span>) ;</span>
<span class="line" id="L1384">              vText = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;+{s},{s}&quot;</span>, .{vText,vText2}) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;</span>
<span class="line" id="L1385"></span>
<span class="line" id="L1386">              <span class="tok-comment">// editcar</span>
</span>
<span class="line" id="L1387">              <span class="tok-kw">if</span> ( pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text.len &gt; <span class="tok-number">0</span>) { </span>
<span class="line" id="L1388">              vText2 = std.fmt.allocPrint(dds.allocatorUtils,<span class="tok-str">&quot;{s}{s}&quot;</span>, </span>
<span class="line" id="L1389">              .{vText2,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text}) </span>
<span class="line" id="L1390">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1391">              }</span>
<span class="line" id="L1392"></span>
<span class="line" id="L1393">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1394">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1395"></span>
<span class="line" id="L1396">              fld.setText(vpnl,idx,vText,)</span>
<span class="line" id="L1397">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1398">          },          </span>
<span class="line" id="L1399">          dds.REFTYP.DATE_ISO =&gt; {</span>
<span class="line" id="L1400">            vpnl.field.append(fld.newFieldDateISO(</span>
<span class="line" id="L1401">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1402">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1403">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1404">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1405">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1406">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1407">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1408">              )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1409"></span>
<span class="line" id="L1410">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1411">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1412"></span>
<span class="line" id="L1413">              fld.setText(vpnl,idx,<span class="tok-str">&quot;YYYY/MM/DD&quot;</span>,)</span>
<span class="line" id="L1414">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1415">          },</span>
<span class="line" id="L1416">          dds.REFTYP.DATE_FR =&gt; {</span>
<span class="line" id="L1417">            vpnl.field.append(fld.newFieldDateFR(</span>
<span class="line" id="L1418">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1419">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1420">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1421">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1422">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1423">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1424">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1425">              )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1426"></span>
<span class="line" id="L1427">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1428">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1429"></span>
<span class="line" id="L1430">              fld.setText(vpnl,idx,<span class="tok-str">&quot;DD/MM/YYYY&quot;</span>,)</span>
<span class="line" id="L1431">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1432">          },</span>
<span class="line" id="L1433">          dds.REFTYP.DATE_US =&gt; {</span>
<span class="line" id="L1434">            vpnl.field.append(fld.newFieldDateUS(</span>
<span class="line" id="L1435">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1436">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1437">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text) ,</span>
<span class="line" id="L1438">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1439">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1440">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1441">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1442">              )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1443"></span>
<span class="line" id="L1444">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1445">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1446"></span>
<span class="line" id="L1447">              fld.setText(vpnl,idx,<span class="tok-str">&quot;MM/DD/YYYY&quot;</span>,) </span>
<span class="line" id="L1448">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1449">          },</span>
<span class="line" id="L1450">          dds.REFTYP.TELEPHONE =&gt; {</span>
<span class="line" id="L1451">            vpnl.field.append(fld.newFieldTelephone(</span>
<span class="line" id="L1452">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1453">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1454">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1455">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1456">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1457">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1458">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1459">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1460">              <span class="tok-str">&quot;&quot;</span>)) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1461"></span>
<span class="line" id="L1462">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1463">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1464"></span>
<span class="line" id="L1465">              fld.setText(vpnl,idx,<span class="tok-str">&quot;(00) 007 .001&quot;</span>,) </span>
<span class="line" id="L1466">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1467">          },</span>
<span class="line" id="L1468">          dds.REFTYP.MAIL_ISO =&gt; {</span>
<span class="line" id="L1469">            vpnl.field.append(fld.newFieldMail(</span>
<span class="line" id="L1470">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1471">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1472">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1473">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fwidth)].text),</span>
<span class="line" id="L1474">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1475">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1476">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1477">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text,</span>
<span class="line" id="L1478">              )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1479"></span>
<span class="line" id="L1480">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1481">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1482"></span>
<span class="line" id="L1483">              fld.setText(vpnl,idx,<span class="tok-str">&quot;MY_name@google.com&quot;</span>,)</span>
<span class="line" id="L1484">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1485">          },</span>
<span class="line" id="L1486">          dds.REFTYP.SWITCH =&gt; {</span>
<span class="line" id="L1487">            vpnl.field.append(fld.newFieldSwitch(</span>
<span class="line" id="L1488">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1489">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1490">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1491">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1492">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1493">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text</span>
<span class="line" id="L1494">              )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1495"></span>
<span class="line" id="L1496">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1497">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1498">          },</span>
<span class="line" id="L1499">          dds.REFTYP.FUNC =&gt; {</span>
<span class="line" id="L1500">            vpnl.field.append(fld.newFieldFunc(</span>
<span class="line" id="L1501">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text,</span>
<span class="line" id="L1502">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].posx,</span>
<span class="line" id="L1503">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposx)].text),</span>
<span class="line" id="L1504">              strToUsize(pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fposy)].text),</span>
<span class="line" id="L1505">              <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L1506">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.frequi)].zwitch,</span>
<span class="line" id="L1507">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ffunc)].text,</span>
<span class="line" id="L1508">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ferrmsg)].text,</span>
<span class="line" id="L1509">              pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fhelp)].text</span>
<span class="line" id="L1510">              )) <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1511"></span>
<span class="line" id="L1512">              idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text)</span>
<span class="line" id="L1513">              <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1514"></span>
<span class="line" id="L1515">              fld.setText(vpnl,idx,vText,) </span>
<span class="line" id="L1516">              <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1517">          },</span>
<span class="line" id="L1518">          <span class="tok-kw">else</span> =&gt; {}</span>
<span class="line" id="L1519">        }</span>
<span class="line" id="L1520">        idx = fld.getIndex(vpnl,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text) </span>
<span class="line" id="L1521">        <span class="tok-kw">catch</span> |err| { <span class="tok-builtin">@panic</span>(<span class="tok-builtin">@errorName</span>(err));};</span>
<span class="line" id="L1522"></span>
<span class="line" id="L1523"></span>
<span class="line" id="L1524"></span>
<span class="line" id="L1525">        fld.setEdtcar(vpnl,idx,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fedtcar)].text)</span>
<span class="line" id="L1526">        <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1527"></span>
<span class="line" id="L1528">        fld.setTask(vpnl,idx,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.ftask)].text)</span>
<span class="line" id="L1529">        <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1530"></span>
<span class="line" id="L1531">        fld.setProtect(vpnl,idx,</span>
<span class="line" id="L1532">        pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fprotect)].protect)</span>
<span class="line" id="L1533">        <span class="tok-kw">catch</span> |err| { dsperr.errorForms(vpnl, err);};</span>
<span class="line" id="L1534"></span>
<span class="line" id="L1535"></span>
<span class="line" id="L1536">        term.gotoXY(<span class="tok-number">30</span>,<span class="tok-number">40</span>);</span>
<span class="line" id="L1537">        std.debug.print(<span class="tok-str">&quot;{d}   {s}&quot;</span>,.{idx,pFmt02.field.items[<span class="tok-builtin">@intFromEnum</span>(fp02.fname)].text});</span>
<span class="line" id="L1538">        _= kbd.getKEY();</span>
<span class="line" id="L1539"></span>
<span class="line" id="L1540">        pnl.freePanel(pFmt02);</span>
<span class="line" id="L1541">        <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt02); </span>
<span class="line" id="L1542">        <span class="tok-kw">return</span> ; </span>
<span class="line" id="L1543">      },</span>
<span class="line" id="L1544">      <span class="tok-comment">// exit panel Field</span>
</span>
<span class="line" id="L1545">      .F12 =&gt; {</span>
<span class="line" id="L1546">        pnl.freePanel(pFmt02);</span>
<span class="line" id="L1547">        <span class="tok-kw">defer</span> dds.allocatorPnl.destroy(pFmt02); </span>
<span class="line" id="L1548">        <span class="tok-kw">return</span> ; </span>
<span class="line" id="L1549">      },</span>
<span class="line" id="L1550">      <span class="tok-kw">else</span> =&gt; {}</span>
<span class="line" id="L1551">    }</span>
<span class="line" id="L1552">  }</span>
<span class="line" id="L1553"></span>
<span class="line" id="L1554">}</span>
</code></pre></body>
</html>